
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Village Community App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #4caf50;
            --secondary: #2196f3;
            --accent: #ff9800;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray: #6c757d;
            --warning: #ff5722;
            --community: #9c27b0;
            --nature: #4caf50;
            --safety: #f44336;
            --events: #ff9800;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            padding-bottom: 70px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 28px;
        }
        
        .logo h1 {
            font-size: 22px;
            font-weight: 700;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .weather-mini {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .notification-icon {
            position: relative;
            font-size: 22px;
            cursor: pointer;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff5252;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Language Toggle Button */
        .language-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: 500;
        }
        
        /* Marquee Styles */
        .marquee-container {
            background: linear-gradient(to right, var(--accent), #ff5722);
            color: white;
            padding: 10px 0;
            overflow: hidden;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .marquee-title {
            position: absolute;
            left: 0;
            top: 0;
            background: var(--dark);
            color: white;
            padding: 10px 15px;
            font-weight: bold;
            z-index: 2;
            height: 100%;
            display: flex;
            align-items: center;
        }
        
        .marquee {
            white-space: nowrap;
            animation: marquee 25s linear infinite;
            padding-left: 120px;
        }
        
        .marquee a {
            color: white;
            text-decoration: none;
            margin-right: 30px;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .marquee a:hover {
            color: #ffeb3b;
            text-decoration: underline;
        }
        
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* Content Section */
        .content-section {
            padding: 20px;
            display: none;
        }
        
        .content-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .section-title {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
            color: var(--dark);
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Carousel Styles */
        .carousel {
            position: relative;
            height: 200px;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .carousel-inner {
            height: 100%;
            position: relative;
        }
        
        .carousel-item {
            height: 100%;
            width: 100%;
            position: absolute;
            opacity: 0;
            transition: opacity 0.8s ease;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end;
            padding: 15px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
        }
        
        .carousel-item.active {
            opacity: 1;
        }
        
        .carousel-dots {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .carousel-dot.active {
            background-color: white;
        }
        
        /* News Section */
        .news-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .news-item {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            display: flex;
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .news-item:hover {
            transform: translateY(-5px);
        }
        
        .news-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
        }
        
        .news-content {
            padding: 12px;
            flex: 1;
        }
        
        .news-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .news-date {
            font-size: 12px;
            color: var(--gray);
            margin-bottom: 8px;
        }
        
        .news-excerpt {
            font-size: 14px;
            color: #555;
        }
        
        /* News Detail View */
        .news-detail {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: none;
        }
        
        .news-detail.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        .news-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .news-detail-title {
            font-size: 24px;
            color: var(--dark);
        }
        
        .news-detail-date {
            color: var(--gray);
            font-size: 14px;
        }
        
        .news-detail-content {
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .news-detail-gallery {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .news-detail-image {
            height: 150px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .news-detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .back-button {
            background: var(--gray);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        /* Feature Sections (Community, Nature, Safety, Events) */
        .feature-section {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .feature-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
        }
        
        .community-header {
            border-color: var(--community);
            color: var(--community);
        }
        
        .nature-header {
            border-color: var(--nature);
            color: var(--nature);
        }
        
        .safety-header {
            border-color: var(--safety);
            color: var(--safety);
        }
        
        .events-header {
            border-color: var(--events);
            color: var(--events);
        }
        
        .feature-content {
            line-height: 1.6;
            color: #444;
        }
        
        .feature-content p {
            margin-bottom: 15px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .feature-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-card i {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .community-card i {
            color: var(--community);
        }
        
        .nature-card i {
            color: var(--nature);
        }
        
        .safety-card i {
            color: var(--safety);
        }
        
        .events-card i {
            color: var(--events);
        }
        
        /* Events Section */
        .events-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .event-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .event-date {
            background: var(--primary);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .event-day {
            font-size: 22px;
            font-weight: 700;
            line-height: 1;
        }
        
        .event-month {
            font-size: 14px;
            text-transform: uppercase;
        }
        
        .event-details {
            flex: 1;
        }
        
        .event-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .event-time {
            font-size: 14px;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Clubs Section */
        .clubs-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .club-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .club-card:hover {
            transform: translateY(-5px);
        }
        
        .club-icon {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: white;
        }
        
        .club-content {
            padding: 15px 10px;
        }
        
        .club-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .club-members {
            font-size: 13px;
            color: var(--gray);
        }
        
        /* Photos Section */
        .photos-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }
        
        .photo-item {
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        
        .photo-item:hover img {
            transform: scale(1.1);
        }
        
        /* About Section */
        .about-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            line-height: 1.6;
            color: #444;
        }
        
        .about-content p {
            margin-bottom: 15px;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .feature {
            background: #f0f9ff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
        }
        
        .feature:hover {
            transform: translateY(-5px);
        }
        
        .feature i {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .community-feature i {
            color: var(--community);
        }
        
        .nature-feature i {
            color: var(--nature);
        }
        
        .safety-feature i {
            color: var(--safety);
        }
        
        .events-feature i {
            color: var(--events);
        }
        
        /* Quick Actions */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .action-button {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .action-button:hover {
            transform: translateY(-5px);
        }
        
        .action-button i {
            font-size: 24px;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .action-button span {
            display: block;
            font-weight: 500;
            color: var(--dark);
        }
        
        /* Emergency Contacts */
        .emergency-contacts {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .emergency-title {
            color: var(--warning);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .contact-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }
        
        .contact-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        /* Notification Popup */
        .notification-popup {
            position: fixed;
            top: 70px;
            right: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 320px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        
        .notification-popup.active {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification-header {
            background: var(--primary);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .notification-header h3 {
            font-size: 18px;
        }
        
        .close-notifications {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }
        
        .notification-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .notification-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .notification-item:hover {
            background: #f9f9f9;
        }
        
        .notification-item img {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .notification-excerpt {
            font-size: 13px;
            color: var(--gray);
        }
        
        /* Advertisement Banner */
        .ad-banner {
            background: linear-gradient(135deg, #ff9800, #ff5722);
            border-radius: 12px;
            padding: 15px;
            margin: 20px 0;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .ad-close {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        
        .ad-content {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .ad-icon {
            font-size: 40px;
            flex-shrink: 0;
        }
        
        .ad-text h3 {
            margin-bottom: 5px;
            font-size: 18px;
        }
        
        .ad-text p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            color: var(--gray);
            text-decoration: none;
            font-size: 13px;
            transition: color 0.3s;
            background: none;
            border: none;
            cursor: pointer;
        }
        
        .nav-btn i {
            font-size: 20px;
        }
        
        .nav-btn.active {
            color: var(--primary);
        }
        
        /* Responsive Design */
        @media (min-width: 768px) {
            .carousel {
                height: 300px;
            }
            
            .news-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .events-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .clubs-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .photos-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .news-detail-gallery {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .contact-list {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .quick-actions {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .feature-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <i class="fas fa-tree"></i>
            <h1 id="header-title">Larikatta</h1>
        </div>
        <div class="header-right">
            <button class="language-toggle" id="language-toggle">
                <i class="fas fa-language"></i>
                <span id="language-text">नेपाली</span>
            </button>
            <div class="weather-mini">
                <i class="fas fa-cloud-sun" id="weather-mini-icon"></i>
                <span id="weather-mini-temp">24°C</span>
            </div>
            <div class="notification-icon" id="notification-icon">
                <i class="fas fa-bell"></i>
                <span class="notification-badge">3</span>
            </div>
        </div>
    </header>

    <!-- Notification Popup -->
    <div class="notification-popup" id="notification-popup">
        <div class="notification-header">
            <h3 id="notification-header-text">Notifications</h3>
            <button class="close-notifications" id="close-notifications">&times;</button>
        </div>
        <div class="notification-list">
            <div class="notification-item" data-news="0">
                <img src="https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Road works">
                <div class="notification-content">
                    <div class="notification-title" id="notif-title-0">Road Maintenance Scheduled</div>
                    <div class="notification-excerpt" id="notif-excerpt-0">Maintenance work on Maple Street will begin next Monday...</div>
                </div>
            </div>
            <div class="notification-item" data-news="1">
                <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Library">
                <div class="notification-content">
                    <div class="notification-title" id="notif-title-1">New Library Hours</div>
                    <div class="notification-excerpt" id="notif-excerpt-1">The village library will extend its opening hours...</div>
                </div>
            </div>
            <div class="notification-item" data-news="2">
                <img src="https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Garden">
                <div class="notification-content">
                    <div class="notification-title" id="notif-title-2">Community Garden Opening</div>
                    <div class="notification-excerpt" id="notif-excerpt-2">The new community garden is now open. Plots are available...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Marquee for Latest News -->
    <div class="marquee-container">
        <div class="marquee-title" id="marquee-title">LATEST NEWS:</div>
        <div class="marquee">
            <a href="#" data-news="0" id="marquee-0">Road Maintenance Scheduled for Next Week</a>
            <a href="#" data-news="1" id="marquee-1">Village Library Extends Opening Hours</a>
            <a href="#" data-news="2" id="marquee-2">New Community Garden Now Open for Residents</a>
            <a href="#" data-news="3" id="marquee-3">Weekly Farmers Market Returns This Saturday</a>
        </div>
    </div>

    <!-- Content Sections -->
    <main>
        <!-- Home Section -->
        <section id="home" class="content-section active">
            <h2 class="section-title"><i class="fas fa-home"></i> <span id="village-overview-text">Village Overview</span></h2>
            
            <!-- Carousel at the top -->
            <div class="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active" style="background-image: url('https://images.unsplash.com/photo-1599813789635-3605c57b4cf3?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80');">
                        <div class="carousel-content">
                            <h3 id="carousel-title-1">Village Festival</h3>
                            <p id="carousel-desc-1">Annual celebration this weekend</p>
                        </div>
                    </div>
                    <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80');">
                        <div class="carousel-content">
                            <h3 id="carousel-title-2">New Community Garden</h3>
                            <p id="carousel-desc-2">Now open for all residents</p>
                        </div>
                    </div>
                    <div class="carousel-item" style="background-image: url('https://images.unsplash.com/photo-1516253593875-bd7ba052fbc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80');">
                        <div class="carousel-content">
                            <h3 id="carousel-title-3">Village Market</h3>
                            <p id="carousel-desc-3">Fresh produce every Saturday</p>
                        </div>
                    </div>
                </div>
                <div class="carousel-dots">
                    <div class="carousel-dot active"></div>
                    <div class="carousel-dot"></div>
                    <div class="carousel-dot"></div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <div class="action-button">
                    <i class="fas fa-calendar-day"></i>
                    <span id="action-events">Events</span>
                </div>
                <div class="action-button">
                    <i class="fas fa-utensils"></i>
                    <span id="action-restaurants">Restaurants</span>
                </div>
                <div class="action-button">
                    <i class="fas fa-map-marked-alt"></i>
                    <span id="action-map">Map</span>
                </div>
                <div class="action-button">
                    <i class="fas fa-question-circle"></i>
                    <span id="action-help">Help</span>
                </div>
            </div>
            
            <!-- Feature Highlights -->
            <h3 style="margin: 25px 0 15px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-star" style="color: var(--accent);"></i> <span id="village-features-text">Village Features</span>
            </h3>
            
            <div class="features">
                <div class="feature community-feature" data-feature="community">
                    <i class="fas fa-users"></i>
                    <h4 id="feature-community">Community</h4>
                    <p id="feature-community-desc">Friendly neighbors</p>
                </div>
                <div class="feature nature-feature" data-feature="nature">
                    <i class="fas fa-tree"></i>
                    <h4 id="feature-nature">Nature</h4>
                    <p id="feature-nature-desc">Green spaces</p>
                </div>
                <div class="feature safety-feature" data-feature="safety">
                    <i class="fas fa-shield-alt"></i>
                    <h4 id="feature-safety">Safety</h4>
                    <p id="feature-safety-desc">Secure environment</p>
                </div>
                <div class="feature events-feature" data-feature="events">
                    <i class="fas fa-calendar-alt"></i>
                    <h4 id="feature-events">Events</h4>
                    <p id="feature-events-desc">Regular activities</p>
                </div>
            </div>
            
            <!-- News Highlights -->
            <h3 style="margin: 25px 0 15px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-newspaper" style="color: var(--secondary);"></i> <span id="latest-news-text">Latest News</span>
            </h3>
            
            <div class="news-grid">
                <div class="news-item" data-news="0">
                    <img src="https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Road works" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-title-0">Road Maintenance Scheduled</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-date-0">June 15, 2023</span></div>
                        <p class="news-excerpt" id="news-excerpt-0">Maintenance work on Maple Street will begin next Monday...</p>
                    </div>
                </div>
                
                <div class="news-item" data-news="1">
                    <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Library" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-title-1">New Library Hours</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-date-1">June 12, 2023</span></div>
                        <p class="news-excerpt" id="news-excerpt-1">The village library will extend its opening hours starting next month...</p>
                    </div>
                </div>
                
                <div class="news-item" data-news="2">
                    <img src="https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Garden" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-title-2">Community Garden Opening</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-date-2">June 5, 2023</span></div>
                        <p class="news-excerpt" id="news-excerpt-2">The new community garden is now open. Plots are available for residents...</p>
                    </div>
                </div>
                
                <div class="news-item" data-news="3">
                    <img src="https://images.unsplash.com/photo-1516253593875-bd7ba052fbc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Market" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-title-3">Farmers Market Returns</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-date-3">May 28, 2023</span></div>
                        <p class="news-excerpt" id="news-excerpt-3">The weekly farmers market returns this Saturday with local produce...</p>
                    </div>
                </div>
            </div>
            
            <!-- Advertisement Banner -->
            <div class="ad-banner" id="ad-banner">
                <button class="ad-close" id="ad-close">&times;</button>
                <div class="ad-content">
                    <div class="ad-icon">
                        <i class="fas fa-gift"></i>
                    </div>
                    <div class="ad-text">
                        <h3 id="ad-title">Special Offer for Residents!</h3>
                        <p id="ad-desc">Get 20% off at all local businesses this weekend. Show your village ID to claim discount.</p>
                    </div>
                </div>
            </div>
            
            <!-- About Village -->
            <h3 style="margin: 30px 0 15px; display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-info-circle" style="color: var(--primary);"></i> <span id="about-village-text">About Our Village</span>
            </h3>
            
            <div class="about-content">
                <h3 id="about-title">Welcome to GreenVillage</h3>
                <p id="about-desc-1">GreenVillage is a peaceful community nestled in the countryside, where neighbors become friends and nature is right at your doorstep. Our village offers a perfect blend of traditional values and modern amenities.</p>
                <p id="about-desc-2">With over 300 homes, a community center, sports facilities, and regular social events, there's always something happening in GreenVillage.</p>
            </div>
            
            <!-- Emergency Contacts -->
            <div class="emergency-contacts">
                <h3 class="emergency-title"><i class="fas fa-exclamation-triangle"></i> <span id="emergency-contacts-text">Emergency Contacts</span></h3>
                <div class="contact-list">
                    <div class="contact-item">
                        <span id="emergency-police">Police</span>
                        <span>111-222-333</span>
                    </div>
                    <div class="contact-item">
                        <span id="emergency-medical">Medical</span>
                        <span>111-333-555</span>
                    </div>
                    <div class="contact-item">
                        <span id="emergency-fire">Fire Department</span>
                        <span>111-444-777</span>
                    </div>
                    <div class="contact-item">
                        <span id="emergency-mayor">Mayor's Office</span>
                        <span>111-555-999</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- News Section -->
        <section id="news" class="content-section">
            <h2 class="section-title"><i class="fas fa-newspaper"></i> <span id="village-news-text">Village News</span></h2>
            
            <!-- News Detail View (initially hidden) -->
            <div class="news-detail" id="news-detail">
                <button class="back-button" id="back-button">
                    <i class="fas fa-arrow-left"></i> <span id="back-to-news-text">Back to News</span>
                </button>
                
                <div class="news-detail-header">
                    <h3 class="news-detail-title" id="detail-title">Road Maintenance Scheduled</h3>
                    <div class="news-detail-date" id="detail-date"><i class="far fa-calendar-alt"></i> June 15, 2023</div>
                </div>
                
                <div class="news-detail-content" id="detail-content">
                    <p>Maintenance work on Maple Street will begin next Monday. Expect temporary disruptions to traffic flow between 9 AM and 4 PM daily.</p>
                    <p>The work is expected to be completed by Friday, and includes road resurfacing, sidewalk repairs, and new drainage installation.</p>
                    <p>Please use alternative routes during this period if possible. Local access will be maintained for residents.</p>
                </div>
                
                <div class="news-detail-gallery">
                    <div class="news-detail-image">
                        <img src="https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Road work">
                    </div>
                    <div class="news-detail-image">
                        <img src="https://images.unsplash.com/photo-1573100094256-3e9dd5c48c36?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Road work">
                    </div>
                    <div class="news-detail-image">
                        <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Road work">
                    </div>
                </div>
            </div>
            
            <!-- News List -->
            <div class="news-grid" id="news-list">
                <div class="news-item" data-news="0">
                    <img src="https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Road works" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-list-title-0">Road Maintenance Scheduled</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-list-date-0">June 15, 2023</span></div>
                        <p class="news-excerpt" id="news-list-excerpt-0">Maintenance work on Maple Street will begin next Monday. Expect temporary disruptions.</p>
                    </div>
                </div>
                
                <div class="news-item" data-news="1">
                    <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Library" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-list-title-1">New Library Hours</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-list-date-1">June 12, 2023</span></div>
                        <p class="news-excerpt" id="news-list-excerpt-1">The village library will extend its opening hours starting next month.</p>
                    </div>
                </div>
                
                <div class="news-item" data-news="2">
                    <img src="https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Garden" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-list-title-2">Community Garden Opening</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-list-date-2">June 5, 2023</span></div>
                        <p class="news-excerpt" id="news-list-excerpt-2">The new community garden is now open. Plots are available for residents.</p>
                    </div>
                </div>
                
                <div class="news-item" data-news="3">
                    <img src="https://images.unsplash.com/photo-1516253593875-bd7ba052fbc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" alt="Market" class="news-image">
                    <div class="news-content">
                        <h4 class="news-title" id="news-list-title-3">Farmers Market Returns</h4>
                        <div class="news-date"><i class="far fa-calendar-alt"></i> <span id="news-list-date-3">May 28, 2023</span></div>
                        <p class="news-excerpt" id="news-list-excerpt-3">The weekly farmers market returns this Saturday with local produce.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Events Section -->
        <section id="events" class="content-section">
            <h2 class="section-title"><i class="fas fa-calendar-alt"></i> <span id="upcoming-events-text">Upcoming Events</span></h2>
            
            <div class="events-container">
                <div class="event-card">
                    <div class="event-date">
                        <div class="event-day">24</div>
                        <div class="event-month">Jun</div>
                    </div>
                    <div class="event-details">
                        <h4 class="event-title" id="event-title-1">Summer Festival</h4>
                        <div class="event-time"><i class="far fa-clock"></i> <span id="event-time-1">2:00 PM - 10:00 PM</span></div>
                        <div class="event-location"><i class="fas fa-map-marker-alt"></i> <span id="event-location-1">Village Square</span></div>
                    </div>
                </div>
                
                <div class="event-card">
                    <div class="event-date">
                        <div class="event-day">28</div>
                        <div class="event-month">Jun</div>
                    </div>
                    <div class="event-details">
                        <h4 class="event-title" id="event-title-2">Yoga in the Park</h4>
                        <div class="event-time"><i class="far fa-clock"></i> <span id="event-time-2">8:00 AM - 9:00 AM</span></div>
                        <div class="event-location"><i class="fas fa-map-marker-alt"></i> <span id="event-location-2">Central Park</span></div>
                    </div>
                </div>
                
                <div class="event-card">
                    <div class="event-date">
                        <div class="event-day">01</div>
                        <div class="event-month">Jul</div>
                    </div>
                    <div class="event-details">
                        <h4 class="event-title" id="event-title-3">Book Club Meeting</h4>
                        <div class="event-time"><i class="far fa-clock"></i> <span id="event-time-3">6:00 PM - 7:30 PM</span></div>
                        <div class="event-location"><i class="fas fa-map-marker-alt"></i> <span id="event-location-3">Village Library</span></div>
                    </div>
                </div>
                
                <div class="event-card">
                    <div class="event-date">
                        <div class="event-day">04</div>
                        <div class="event-month">Jul</div>
                    </div>
                    <div class="event-details">
                        <h4 class="event-title" id="event-title-4">Independence Day Parade</h4>
                        <div class="event-time"><i class="far fa-clock"></i> <span id="event-time-4">10:00 AM - 12:00 PM</span></div>
                        <div class="event-location"><i class="fas fa-map-marker-alt"></i> <span id="event-location-4">Main Street</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Clubs Section -->
        <section id="clubs" class="content-section">
            <h2 class="section-title"><i class="fas fa-users"></i> <span id="village-clubs-text">Village Clubs</span></h2>
            
            <div class="clubs-grid">
                <div class="club-card">
                    <div class="club-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="club-content">
                        <h4 class="club-name" id="club-name-1">Book Club</h4>
                        <div class="club-members" id="club-members-1">42 members</div>
                    </div>
                </div>
                
                <div class="club-card">
                    <div class="club-icon">
                        <i class="fas fa-paint-brush"></i>
                    </div>
                    <div class="club-content">
                        <h4 class="club-name" id="club-name-2">Art Society</h4>
                        <div class="club-members" id="club-members-2">28 members</div>
                    </div>
                </div>
                
                <div class="club-card">
                    <div class="club-icon">
                        <i class="fas fa-running"></i>
                    </div>
                    <div class="club-content">
                        <h4 class="club-name" id="club-name-3">Running Group</h4>
                        <div class="club-members" id="club-members-3">65 members</div>
                    </div>
                </div>
                
                <div class="club-card">
                    <div class="club-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <div class="club-content">
                        <h4 class="club-name" id="club-name-4">Gardeners</h4>
                        <div class="club-members" id="club-members-4">37 members</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Photos Section -->
        <section id="photos" class="content-section">
            <h2 class="section-title"><i class="fas fa-camera"></i> <span id="village-photos-text">Village Photos</span></h2>
            
            <div class="photos-grid">
                <div class="photo-item">
                    <img src="https://images.unsplash.com/photo-1599813789635-3605c57b4cf3?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Village Festival">
                </div>
                <div class="photo-item">
                    <img src="https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Community Garden">
                </div>
                <div class="photo-item">
                    <img src="https://images.unsplash.com/photo-1516253593875-bd7ba052fbc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Village Market">
                </div>
                <div class="photo-item">
                    <img src="https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Village Street">
                </div>
                <div class="photo-item">
                    <img src="https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Village Library">
                </div>
                <div class="photo-item">
                    <img src="https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" alt="Community Event">
                </div>
            </div>
        </section>

        <!-- Feature Sections -->
        <section id="community" class="content-section">
            <div class="feature-section">
                <div class="feature-header community-header">
                    <i class="fas fa-users fa-2x"></i>
                    <h2 id="feature-community-title">Community</h2>
                </div>
                <button class="back-button" data-back="home">
                    <i class="fas fa-arrow-left"></i> <span id="back-to-home-text">Back to Home</span>
                </button>
                <div class="feature-content">
                    <p id="community-desc-1">Our village community is the heart of GreenVillage. We pride ourselves on our friendly atmosphere and strong sense of belonging.</p>
                    <p id="community-desc-2">With regular community events, neighborhood watch programs, and volunteer opportunities, there are many ways to get involved and connect with your neighbors.</p>
                    
                    <div class="feature-grid">
                        <div class="feature-card community-card">
                            <i class="fas fa-handshake"></i>
                            <h4 id="community-feature-1">Neighborhood Watch</h4>
                            <p id="community-feature-desc-1">Join our community safety program</p>
                        </div>
                        <div class="feature-card community-card">
                            <i class="fas fa-hands-helping"></i>
                            <h4 id="community-feature-2">Volunteer</h4>
                            <p id="community-feature-desc-2">Make a difference in our community</p>
                        </div>
                        <div class="feature-card community-card">
                            <i class="fas fa-calendar-check"></i>
                            <h4 id="community-feature-3">Community Meetings</h4>
                            <p id="community-feature-desc-3">First Tuesday of every month</p>
                        </div>
                        <div class="feature-card community-card">
                            <i class="fas fa-child"></i>
                            <h4 id="community-feature-4">Youth Programs</h4>
                            <p id="community-feature-desc-4">Activities for children and teens</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="nature" class="content-section">
            <div class="feature-section">
                <div class="feature-header nature-header">
                    <i class="fas fa-tree fa-2x"></i>
                    <h2 id="feature-nature-title">Nature & Environment</h2>
                </div>
                <button class="back-button" data-back="home">
                    <i class="fas fa-arrow-left"></i> <span>Back to Home</span>
                </button>
                <div class="feature-content">
                    <p id="nature-desc-1">GreenVillage is surrounded by beautiful natural landscapes, from our community gardens to the nearby forest trails and parks.</p>
                    <p id="nature-desc-2">We are committed to environmental sustainability and preserving the natural beauty of our area for future generations.</p>
                    
                    <div class="feature-grid">
                        <div class="feature-card nature-card">
                            <i class="fas fa-seedling"></i>
                            <h4 id="nature-feature-1">Community Garden</h4>
                            <p id="nature-feature-desc-1">Grow your own fruits and vegetables</p>
                        </div>
                        <div class="feature-card nature-card">
                            <i class="fas fa-recycle"></i>
                            <h4 id="nature-feature-2">Recycling Program</h4>
                            <p id="nature-feature-desc-2">Help keep our village green</p>
                        </div>
                        <div class="feature-card nature-card">
                            <i class="fas fa-hiking"></i>
                            <h4 id="nature-feature-3">Nature Trails</h4>
                            <p id="nature-feature-desc-3">Explore our beautiful walking paths</p>
                        </div>
                        <div class="feature-card nature-card">
                            <i class="fas fa-leaf"></i>
                            <h4 id="nature-feature-4">Tree Planting</h4>
                            <p id="nature-feature-desc-4">Annual community tree planting event</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="safety" class="content-section">
            <div class="feature-section">
                <div class="feature-header safety-header">
                    <i class="fas fa-shield-alt fa-2x"></i>
                    <h2 id="feature-safety-title">Safety & Security</h2>
                </div>
                <button class="back-button" data-back="home">
                    <i class="fas fa-arrow-left"></i> <span>Back to Home</span>
                </button>
                <div class="feature-content">
                    <p id="safety-desc-1">The safety of our residents is our top priority. GreenVillage has implemented multiple measures to ensure a secure living environment.</p>
                    <p id="safety-desc-2">From our neighborhood watch program to emergency preparedness initiatives, we work together to keep our community safe.</p>
                    
                    <div class="feature-grid">
                        <div class="feature-card safety-card">
                            <i class="fas fa-phone-alt"></i>
                            <h4 id="safety-feature-1">Emergency Contacts</h4>
                            <p id="safety-feature-desc-1">Important numbers for urgent situations</p>
                        </div>
                        <div class="feature-card safety-card">
                            <i class="fas fa-first-aid"></i>
                            <h4 id="safety-feature-2">First Aid Training</h4>
                            <p id="safety-feature-desc-2">Free classes for residents</p>
                        </div>
                        <div class="feature-card safety-card">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h4 id="safety-feature-3">Emergency Alerts</h4>
                            <p id="safety-feature-desc-3">Stay informed during critical situations</p>
                        </div>
                        <div class="feature-card safety-card">
                            <i class="fas fa-house-damage"></i>
                            <h4 id="safety-feature-4">Disaster Preparedness</h4>
                            <p id="safety-feature-desc-4">Be ready for any emergency</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="events-feature" class="content-section">
            <div class="feature-section">
                <div class="feature-header events-header">
                    <i class="fas fa-calendar-alt fa-2x"></i>
                    <h2 id="feature-events-title">Events & Activities</h2>
                </div>
                <button class="back-button" data-back="home">
                    <i class="fas fa-arrow-left"></i> <span>Back to Home</span>
                </button>
                <div class="feature-content">
                    <p id="events-desc-1">GreenVillage offers a vibrant calendar of events and activities for residents of all ages throughout the year.</p>
                    <p id="events-desc-2">From seasonal festivals to weekly classes, there's always something happening in our community.</p>
                    
                    <div class="feature-grid">
                        <div class="feature-card events-card">
                            <i class="fas fa-music"></i>
                            <h4 id="events-feature-1">Summer Festival</h4>
                            <p id="events-feature-desc-1">Annual celebration with music and food</p>
                        </div>
                        <div class="feature-card events-card">
                            <i class="fas fa-utensils"></i>
                            <h4 id="events-feature-2">Farmers Market</h4>
                            <p id="events-feature-desc-2">Every Saturday, May through October</p>
                        </div>
                        <div class="feature-card events-card">
                            <i class="fas fa-film"></i>
                            <h4 id="events-feature-3">Movie Nights</h4>
                            <p id="events-feature-desc-3">Outdoor films in the park</p>
                        </div>
                        <div class="feature-card events-card">
                            <i class="fas fa-dumbbell"></i>
                            <h4 id="events-feature-4">Fitness Classes</h4>
                            <p id="events-feature-desc-4">Yoga, Zumba, and more</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="nav-btn active" data-target="home">
            <i class="fas fa-home"></i>
            <span id="nav-home">Home</span>
        </button>
        <button class="nav-btn" data-target="news">
            <i class="fas fa-newspaper"></i>
            <span id="nav-news">News</span>
        </button>
        <button class="nav-btn" data-target="events">
            <i class="fas fa-calendar-alt"></i>
            <span id="nav-events">Events</span>
        </button>
        <button class="nav-btn" data-target="clubs">
            <i class="fas fa-users"></i>
            <span id="nav-clubs">Clubs</span>
        </button>
        <button class="nav-btn" data-target="photos">
            <i class="fas fa-camera"></i>
            <span id="nav-photos">Photos</span>
        </button>
    </nav>

    <script>
        // Language data
        const languageData = {
            en: {
                // Header
                'header-title': 'Larikatta',
                'language-text': 'नेपाली',
                
                // Marquee
                'marquee-title': 'LATEST NEWS:',
                'marquee-0': 'Road Maintenance Scheduled for Next Week',
                'marquee-1': 'Village Library Extends Opening Hours',
                'marquee-2': 'New Community Garden Now Open for Residents',
                'marquee-3': 'Weekly Farmers Market Returns This Saturday',
                
                // Navigation
                'nav-home': 'Home',
                'nav-news': 'News',
                'nav-events': 'Events',
                'nav-clubs': 'Clubs',
                'nav-photos': 'Photos',
                
                // Home Section
                'village-overview-text': 'Village Overview',
                'carousel-title-1': 'Village Festival',
                'carousel-desc-1': 'Annual celebration this weekend',
                'carousel-title-2': 'New Community Garden',
                'carousel-desc-2': 'Now open for all residents',
                'carousel-title-3': 'Village Market',
                'carousel-desc-3': 'Fresh produce every Saturday',
                
                'action-events': 'Events',
                'action-restaurants': 'Restaurants',
                'action-map': 'Map',
                'action-help': 'Help',
                
                'village-features-text': 'Village Features',
                'feature-community': 'Community',
                'feature-community-desc': 'Friendly neighbors',
                'feature-nature': 'Nature',
                'feature-nature-desc': 'Green spaces',
                'feature-safety': 'Safety',
                'feature-safety-desc': 'Secure environment',
                'feature-events': 'Events',
                'feature-events-desc': 'Regular activities',
                
                'latest-news-text': 'Latest News',
                'news-title-0': 'Road Maintenance Scheduled',
                'news-date-0': 'June 15, 2023',
                'news-excerpt-0': 'Maintenance work on Maple Street will begin next Monday...',
                'news-title-1': 'New Library Hours',
                'news-date-1': 'June 12, 2023',
                'news-excerpt-1': 'The village library will extend its opening hours starting next month...',
                'news-title-2': 'Community Garden Opening',
                'news-date-2': 'June 5, 2023',
                'news-excerpt-2': 'The new community garden is now open. Plots are available for residents...',
                'news-title-3': 'Farmers Market Returns',
                'news-date-3': 'May 28, 2023',
                'news-excerpt-3': 'The weekly farmers market returns this Saturday with local produce...',
                
                'ad-title': 'Special Offer for Residents!',
                'ad-desc': 'Get 20% off at all local businesses this weekend. Show your village ID to claim discount.',
                
                'about-village-text': 'About Our Village',
                'about-title': 'Welcome to GreenVillage',
                'about-desc-1': 'GreenVillage is a peaceful community nestled in the countryside, where neighbors become friends and nature is right at your doorstep. Our village offers a perfect blend of traditional values and modern amenities.',
                'about-desc-2': 'With over 300 homes, a community center, sports facilities, and regular social events, there\'s always something happening in GreenVillage.',
                
                'emergency-contacts-text': 'Emergency Contacts',
                'emergency-police': 'Police',
                'emergency-medical': 'Medical',
                'emergency-fire': 'Fire Department',
                'emergency-mayor': 'Mayor\'s Office',
                
                // News Section
                'village-news-text': 'Village News',
                'back-to-news-text': 'Back to News',
                'news-list-title-0': 'Road Maintenance Scheduled',
                'news-list-date-0': 'June 15, 2023',
                'news-list-excerpt-0': 'Maintenance work on Maple Street will begin next Monday. Expect temporary disruptions.',
                'news-list-title-1': 'New Library Hours',
                'news-list-date-1': 'June 12, 2023',
                'news-list-excerpt-1': 'The village library will extend its opening hours starting next month.',
                'news-list-title-2': 'Community Garden Opening',
                'news-list-date-2': 'June 5, 2023',
                'news-list-excerpt-2': 'The new community garden is now open. Plots are available for residents.',
                'news-list-title-3': 'Farmers Market Returns',
                'news-list-date-3': 'May 28, 2023',
                'news-list-excerpt-3': 'The weekly farmers market returns this Saturday with local produce.',
                
                // Events Section
                'upcoming-events-text': 'Upcoming Events',
                'event-title-1': 'Summer Festival',
                'event-time-1': '2:00 PM - 10:00 PM',
                'event-location-1': 'Village Square',
                'event-title-2': 'Yoga in the Park',
                'event-time-2': '8:00 AM - 9:00 AM',
                'event-location-2': 'Central Park',
                'event-title-3': 'Book Club Meeting',
                'event-time-3': '6:00 PM - 7:30 PM',
                'event-location-3': 'Village Library',
                'event-title-4': 'Independence Day Parade',
                'event-time-4': '10:00 AM - 12:00 PM',
                'event-location-4': 'Main Street',
                
                // Clubs Section
                'village-clubs-text': 'Village Clubs',
                'club-name-1': 'Book Club',
                'club-members-1': '42 members',
                'club-name-2': 'Art Society',
                'club-members-2': '28 members',
                'club-name-3': 'Running Group',
                'club-members-3': '65 members',
                'club-name-4': 'Gardeners',
                'club-members-4': '37 members',
                
                // Photos Section
                'village-photos-text': 'Village Photos',
                
                // Feature Sections
                'back-to-home-text': 'Back to Home',
                
                'feature-community-title': 'Community',
                'community-desc-1': 'Our village community is the heart of GreenVillage. We pride ourselves on our friendly atmosphere and strong sense of belonging.',
                'community-desc-2': 'With regular community events, neighborhood watch programs, and volunteer opportunities, there are many ways to get involved and connect with your neighbors.',
                'community-feature-1': 'Neighborhood Watch',
                'community-feature-desc-1': 'Join our community safety program',
                'community-feature-2': 'Volunteer',
                'community-feature-desc-2': 'Make a difference in our community',
                'community-feature-3': 'Community Meetings',
                'community-feature-desc-3': 'First Tuesday of every month',
                'community-feature-4': 'Youth Programs',
                'community-feature-desc-4': 'Activities for children and teens',
                
                'feature-nature-title': 'Nature & Environment',
                'nature-desc-1': 'GreenVillage is surrounded by beautiful natural landscapes, from our community gardens to the nearby forest trails and parks.',
                'nature-desc-2': 'We are committed to environmental sustainability and preserving the natural beauty of our area for future generations.',
                'nature-feature-1': 'Community Garden',
                'nature-feature-desc-1': 'Grow your own fruits and vegetables',
                'nature-feature-2': 'Recycling Program',
                'nature-feature-desc-2': 'Help keep our village green',
                'nature-feature-3': 'Nature Trails',
                'nature-feature-desc-3': 'Explore our beautiful walking paths',
                'nature-feature-4': 'Tree Planting',
                'nature-feature-desc-4': 'Annual community tree planting event',
                
                'feature-safety-title': 'Safety & Security',
                'safety-desc-1': 'The safety of our residents is our top priority. GreenVillage has implemented multiple measures to ensure a secure living environment.',
                'safety-desc-2': 'From our neighborhood watch program to emergency preparedness initiatives, we work together to keep our community safe.',
                'safety-feature-1': 'Emergency Contacts',
                'safety-feature-desc-1': 'Important numbers for urgent situations',
                'safety-feature-2': 'First Aid Training',
                'safety-feature-desc-2': 'Free classes for residents',
                'safety-feature-3': 'Emergency Alerts',
                'safety-feature-desc-3': 'Stay informed during critical situations',
                'safety-feature-4': 'Disaster Preparedness',
                'safety-feature-desc-4': 'Be ready for any emergency',
                
                'feature-events-title': 'Events & Activities',
                'events-desc-1': 'GreenVillage offers a vibrant calendar of events and activities for residents of all ages throughout the year.',
                'events-desc-2': 'From seasonal festivals to weekly classes, there\'s always something happening in our community.',
                'events-feature-1': 'Summer Festival',
                'events-feature-desc-1': 'Annual celebration with music and food',
                'events-feature-2': 'Farmers Market',
                'events-feature-desc-2': 'Every Saturday, May through October',
                'events-feature-3': 'Movie Nights',
                'events-feature-desc-3': 'Outdoor films in the park',
                'events-feature-4': 'Fitness Classes',
                'events-feature-desc-4': 'Yoga, Zumba, and more',
                
                // Notifications
                'notification-header-text': 'Notifications',
                'notif-title-0': 'Road Maintenance Scheduled',
                'notif-excerpt-0': 'Maintenance work on Maple Street will begin next Monday...',
                'notif-title-1': 'New Library Hours',
                'notif-excerpt-1': 'The village library will extend its opening hours...',
                'notif-title-2': 'Community Garden Opening',
                'notif-excerpt-2': 'The new community garden is now open. Plots are available...'
            },
            ne: {
                // Header
                'header-title': 'ग्रिनभिलेज',
                'language-text': 'English',
                
                // Marquee
                'marquee-title': 'ताजा समाचार:',
                'marquee-0': 'आउँदो हप्ता सडक मर्मत सम्झौता',
                'marquee-1': 'ग्राम पुस्तकालयको समय विस्तार',
                'marquee-2': 'नयाँ सामुदायिक बगैंचा बासिन्दाका लागि खुल्यो',
                'marquee-3': 'यो शनिबारबाट साप्ताहिक किसान बजार फर्किएको छ',
                
                // Navigation
                'nav-home': 'गृह',
                'nav-news': 'समाचार',
                'nav-events': 'कार्यक्रम',
                'nav-clubs': 'क्लबहरू',
                'nav-photos': 'तस्वीरहरू',
                
                // Home Section
                'village-overview-text': 'गाउँको अवलोकन',
                'carousel-title-1': 'गाउँ उत्सव',
                'carousel-desc-1': 'यो सप्ताहन्त वार्षिक उत्सव',
                'carousel-title-2': 'नयाँ सामुदायिक बगैंचा',
                'carousel-desc-2': 'सबै बासिन्दाका लागि खुल्यो',
                'carousel-title-3': 'गाउँ बजार',
                'carousel-desc-3': 'हरेक शनिबार ताजा उत्पादन',
                
                'action-events': 'कार्यक्रम',
                'action-restaurants': 'रेस्टुरेन्टहरू',
                'action-map': 'नक्सा',
                'action-help': 'मद्दत',
                
                'village-features-text': 'गाउँका विशेषताहरू',
                'feature-community': 'समुदाय',
                'feature-community-desc': 'मिलनसार छिमेकीहरू',
                'feature-nature': 'प्रकृति',
                'feature-nature-desc': 'हरियाली क्षेत्रहरू',
                'feature-safety': 'सुरक्षा',
                'feature-safety-desc': 'सुरक्षित वातावरण',
                'feature-events': 'कार्यक्रम',
                'feature-events-desc': 'नियमित गतिविधिहरू',
                
                'latest-news-text': 'ताजा समाचार',
                'news-title-0': 'सडक मर्मत सम्झौता',
                'news-date-0': 'जुन १५, २०२३',
                'news-excerpt-0': 'मेपल स्ट्रिटमा आउँदो सोमबारबाट मर्मत कार्य सुरु हुनेछ...',
                'news-title-1': 'नयाँ पुस्तकालय समय',
                'news-date-1': 'जुन १२, २०२३',
                'news-excerpt-1': 'आउँदो महिनाबाट ग्राम पुस्तकालयले आफ्नो खुल्ने समय विस्तार गर्नेछ...',
                'news-title-2': 'सामुदायिक बगैंचा उद्घाटन',
                'news-date-2': 'जुन ५, २०२३',
                'news-excerpt-2': 'नयाँ सामुदायिक बगैंचा अहिले खुल्यो। बासिन्दाका लागि प्लटहरू उपलब्ध छन्...',
                'news-title-3': 'किसान बजार फर्किएको',
                'news-date-3': 'मे २८, २०२३',
                'news-excerpt-3': 'स्थानीय उत्पादनहरूसहित यो शनिबार साप्ताहिक किसान बजार फर्किएको छ...',
                
                'ad-title': 'बासिन्दाहरूका लागि विशेष छुट!',
                'ad-desc': 'यो सप्ताहन्त स्थानीय व्यवसायहरूमा २०% छुट पाउनुहोस्। छुट दावी गर्न आफ्नो गाउँ आईडी देखाउनुहोस्।',
                
                'about-village-text': 'हाम्रो गाउँको बारेमा',
                'about-title': 'ग्रिनभिलेजमा स्वागत छ',
                'about-desc-1': 'ग्रिनभिलेज ग्रामीण इलाकामा अवस्थित एक शान्त समुदाय हो, जहाँ छिमेकीहरू साथीहरू बन्छन् र प्रकृति तपाईंको ढोकामै हुन्छ। हाम्रो गाउँले पारम्परिक मूल्यहरू र आधुनिक सुविधाहरूको उत्तम मिश्रण प्रदान गर्दछ।',
                'about-desc-2': '३०० भन्दा बढी घरहरू, सामुदायिक केन्द्र, खेलकुद सुविधाहरू, र नियमित सामाजिक कार्यक्रमहरूको साथ, ग्रिनभिलेजमा सधैं केहि न केहि हुँदैरहन्छ।',
                
                'emergency-contacts-text': 'आपतकालीन सम्पर्क',
                'emergency-police': 'प्रहरी',
                'emergency-medical': 'चिकित्सा',
                'emergency-fire': 'अग्निशमन',
                'emergency-mayor': 'प्रमुखको कार्यालय',
                
                // News Section
                'village-news-text': 'गाउँका समाचार',
                'back-to-news-text': 'समाचारमा फर्कनुहोस्',
                'news-list-title-0': 'सडक मर्मत सम्झौता',
                'news-list-date-0': 'जुन १५, २०२३',
                'news-list-excerpt-0': 'मेपल स्ट्रिटमा आउँदो सोमबारबाट मर्मत कार्य सुरु हुनेछ। अस्थायी अवरोधहरूको अपेक्षा गर्नुहोस्।',
                'news-list-title-1': 'नयाँ पुस्तकालय समय',
                'news-list-date-1': 'जुन १२, २०२३',
                'news-list-excerpt-1': 'आउँदो महिनाबाट ग्राम पुस्तकालयले आफ्नो खुल्ने समय विस्तार गर्नेछ।',
                'news-list-title-2': 'सामुदायिक बगैंचा उद्घाटन',
                'news-list-date-2': 'जुन ५, २०२३',
                'news-list-excerpt-2': 'नयाँ सामुदायिक बगैंचा अहिले खुल्यो। बासिन्दाका लागि प्लटहरू उपलब्ध छन्।',
                'news-list-title-3': 'किसान बजार फर्किएको',
                'news-list-date-3': 'मे २८, २०२३',
                'news-list-excerpt-3': 'स्थानीय उत्पादनहरूसहित यो शनिबार साप्ताहिक किसान बजार फर्किएको छ।',
                
                // Events Section
                'upcoming-events-text': 'आगामी कार्यक्रमहरू',
                'event-title-1': 'ग्रीष्मकालीन उत्सव',
                'event-time-1': '२:०० बजे देखि १०:०० बजे सम्म',
                'event-location-1': 'गाउँ क्षेत्र',
                'event-title-2': 'पार्कमा योग',
                'event-time-2': '८:०० बजे देखि ९:०० बजे सम्म',
                'event-location-2': 'केन्द्रीय पार्क',
                'event-title-3': 'पुस्तक क्लब बैठक',
                'event-time-3': '६:०० बजे देखि ७:३० बजे सम्म',
                'event-location-3': 'ग्राम पुस्तकालय',
                'event-title-4': 'स्वतन्त्रता दिवस परेड',
                'event-time-4': '१०:०० बजे देखि १२:०० बजे सम्म',
                'event-location-4': 'मुख्य सडक',
                
                // Clubs Section
                'village-clubs-text': 'गाउँका क्लबहरू',
                'club-name-1': 'पुस्तक क्लब',
                'club-members-1': '४२ सदस्यहरू',
                'club-name-2': 'कला समाज',
                'club-members-2': '२८ सदस्यहरू',
                'club-name-3': 'दौड समूह',
                'club-members-3': '६५ सदस्यहरू',
                'club-name-4': 'बगैंचा मालीहरू',
                'club-members-4': '३७ सदस्यहरू',
                
                // Photos Section
                'village-photos-text': 'गाउँका तस्वीरहरू',
                
                // Feature Sections
                'back-to-home-text': 'गृहमा फर्कनुहोस्',
                
                'feature-community-title': 'समुदाय',
                'community-desc-1': 'हाम्रो गाउँ समुदाय ग्रिनभिलेजको हृदय हो। हामी आफ्नो मिलनसार वातावरण र अपनत्वको मजबूत भावनामा गर्व गर्छौं।',
                'community-desc-2': 'नियमित सामुदायिक कार्यक्रमहरू, छिमेकी निगरानी कार्यक्रमहरू, र स्वयंसेवक अवसरहरूको साथ, तपाईंको छिमेकीहरूसँग जडान गर्न र संलग्न हुन धेरै तरिकाहरू छन्।',
                'community-feature-1': 'छिमेकी निगरानी',
                'community-feature-desc-1': 'हाम्रो सामुदायिक सुरक्षा कार्यक्रममा सामेल हुनुहोस्',
                'community-feature-2': 'स्वयंसेवक',
                'community-feature-desc-2': 'हाम्रो समुदायमा फरक ल्याउनुहोस्',
                'community-feature-3': 'सामुदायिक बैठकहरू',
                'community-feature-desc-3': 'हरेक महिनाको पहिलो मंगलबार',
                'community-feature-4': 'युवा कार्यक्रमहरू',
                'community-feature-desc-4': 'बच्चाहरू र किशोरहरूका लागि गतिविधिहरू',
                
                'feature-nature-title': 'प्रकृति र वातावरण',
                'nature-desc-1': 'ग्रिनभिलेज हाम्रो सामुदायिक बगैंचाहरूदेखि नजिकैको वन पथहरू र पार्कहरूसम्म सुन्दर प्राकृतिक दृश्यहरूले घेरिएको छ।',
                'nature-desc-2': 'हामी भविष्यका पुस्ताहरूका लागि हाम्रो क्षेत्रको प्राकृतिक सुन्दरता संरक्षण गर्न र वातावरणीय स्थिरताको प्रतिबद्ध छौं।',
                'nature-feature-1': 'सामुदायिक बगैंचा',
                'nature-feature-desc-1': 'आफ्नै फलफूल र तरकारीहरू उमार्नुहोस्',
                'nature-feature-2': 'रिसाइक्लिंग कार्यक्रम',
                'nature-feature-desc-2': 'हाम्रो गाउँलाई हरियाली राख्न मद्दत गर्नुहोस्',
                'nature-feature-3': 'प्रकृति पथहरू',
                'nature-feature-desc-3': 'हाम्रा सुन्दर हिँड्ने बाटाहरू अन्वेषण गर्नुहोस्',
                'nature-feature-4': 'रूख रोप्ने',
                'nature-feature-desc-4': 'वार्षिक सामुदायिक रूख रोप्ने कार्यक्रम',
                
                'feature-safety-title': 'सुरक्षा',
                'safety-desc-1': 'हाम्रा बासिन्दाहरूको सुरक्षा हाम्रो सर्वोच्च प्राथमिकता हो। ग्रिनभिलेजले सुरक्षित बासस्थान वातावरण सुनिश्चित गर्न धेरै उपायहरू लागू गरेको छ।',
                'safety-desc-2': 'हाम्रो छिमेकी निगरानी कार्यक्रमदेखि आपतकालीन तयारी पहलहरूसम्म, हामी सँगै काम गरेर हाम्रो समुदायलाई सुरक्षित राख्छौं।',
                'safety-feature-1': 'आपतकालीन सम्पर्क',
                'safety-feature-desc-1': 'जरुरी अवस्थाहरूका लागि महत्त्वपूर्ण नम्बरहरू',
                'safety-feature-2': 'प्राथमिक उपचार प्रशिक्षण',
                'safety-feature-desc-2': 'बासिन्दाहरूका लागि निःशुल्क कक्षाहरू',
                'safety-feature-3': 'आपतकालीन सूचनाहरू',
                'safety-feature-desc-3': 'गम्भीर अवस्थाहरूमा सूचित रहनुहोस्',
                'safety-feature-4': 'प्रकोप तयारी',
                'safety-feature-desc-4': 'कुनै पनि आपतकालीनको लागि तयार हुनुहोस्',
                
                'feature-events-title': 'कार्यक्रम र गतिविधिहरू',
                'events-desc-1': 'ग्रिनभिलेजले वर्षभरि सबै उमेरका बासिन्दाहरूका लागि कार्यक्रम र गतिविधिहरूको जीवन्त पात्रो प्रदान गर्दछ।',
                'events-desc-2': 'मौसमी उत्सवहरूदेखि साप्ताहिक कक्षाहरूसम्म, हाम्रो समुदायमा सधैं केहि न केहि हुँदैरहन्छ।',
                'events-feature-1': 'ग्रीष्मकालीन उत्सव',
                'events-feature-desc-1': 'संगीत र खानाको साथ वार्षिक उत्सव',
                'events-feature-2': 'किसान बजार',
                'events-feature-desc-2': 'हरेक शनिबार, मेदेखि अक्टोबर सम्म',
                'events-feature-3': 'चलचित्र रातिहरू',
                'events-feature-desc-3': 'पार्कमा बाहिरी चलचित्रहरू',
                'events-feature-4': 'फिटनेस कक्षाहरू',
                'events-feature-desc-4': 'योग, जुम्बा, र थप',
                
                // Notifications
                'notification-header-text': 'सूचनाहरू',
                'notif-title-0': 'सडक मर्मत सम्झौता',
                'notif-excerpt-0': 'मेपल स्ट्रिटमा आउँदो सोमबारबाट मर्मत कार्य सुरु हुनेछ...',
                'notif-title-1': 'नयाँ पुस्तकालय समय',
                'notif-excerpt-1': 'ग्राम पुस्तकालयले आफ्नो खुल्ने समय विस्तार गर्नेछ...',
                'notif-title-2': 'सामुदायिक बगैंचा उद्घाटन',
                'notif-excerpt-2': 'नयाँ सामुदायिक बगैंचा अहिले खुल्यो। प्लटहरू उपलब्ध छन्...'
            }
        };

        let currentLanguage = 'en';

        // Navigation functionality
        document.querySelectorAll('.nav-btn').forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons and sections
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Show corresponding section
                const targetId = this.getAttribute('data-target');
                document.getElementById(targetId).classList.add('active');
            });
        });
        
        // Carousel functionality
        let currentSlide = 0;
        const slides = document.querySelectorAll('.carousel-item');
        const dots = document.querySelectorAll('.carousel-dot');
        
        function showSlide(index) {
            // Hide all slides
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            // Show the selected slide
            slides[index].classList.add('active');
            dots[index].classList.add('active');
            currentSlide = index;
        }
        
        // Add click events to dots
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => showSlide(index));
        });
        
        // Auto-advance slides
        setInterval(() => {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }, 5000);
        
        // Feature click handling
        document.querySelectorAll('.feature').forEach(feature => {
            feature.addEventListener('click', function() {
                const featureType = this.getAttribute('data-feature');
                
                // Hide all sections
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                
                // Show the corresponding feature section
                document.getElementById(featureType).classList.add('active');
            });
        });
        
        // Back button handling for feature sections
        document.querySelectorAll('.back-button[data-back="home"]').forEach(button => {
            button.addEventListener('click', function() {
                // Hide all sections
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                
                // Show home section and activate home button
                document.getElementById('home').classList.add('active');
                document.querySelector('.nav-btn[data-target="home"]').classList.add('active');
            });
        });
        
        // News data
        const newsData = {
            en: [
                {
                    title: "Road Maintenance Scheduled",
                    date: "June 15, 2023",
                    content: `<p>Maintenance work on Maple Street will begin next Monday. Expect temporary disruptions to traffic flow between 9 AM and 4 PM daily.</p>
                             <p>The work is expected to be completed by Friday, and includes road resurfacing, sidewalk repairs, and new drainage installation.</p>
                             <p>Please use alternative routes during this period if possible. Local access will be maintained for residents.</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1573100094256-3e9dd5c48c36?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                },
                {
                    title: "New Library Hours",
                    date: "June 12, 2023",
                    content: `<p>The village library is pleased to announce extended opening hours starting from next month. The new hours will be:</p>
                             <p>Monday-Friday: 9 AM - 8 PM</p>
                             <p>Saturday: 10 AM - 6 PM</p>
                             <p>Sunday: 11 AM - 4 PM</p>
                             <p>These extended hours will allow more residents to access our services and resources.</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                },
                {
                    title: "Community Garden Opening",
                    date: "June 5, 2023",
                    content: `<p>The new community garden is now officially open! Located on the south side of the village park, the garden features 40 individual plots available for residents.</p>
                             <p>An opening ceremony will be held this Saturday at 10 AM. The mayor will be in attendance to cut the ribbon.</p>
                             <p>Plots are available on a first-come, first-served basis. Please visit the village office to register.</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1591862719726-49e2a5a4e6eb?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                },
                {
                    title: "Farmers Market Returns",
                    date: "May 28, 2023",
                    content: `<p>The weekly farmers market returns this Saturday with an expanded selection of local produce, baked goods, and crafts.</p>
                             <p>This year we welcome 5 new vendors, bringing the total to 25 local producers. New items include organic honey, artisan cheeses, and fresh flowers.</p>
                             <p>The market will run every Saturday from 8 AM to 1 PM through the end of October.</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1516253593875-bd7ba052fbc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1570996055360-d5c30de5c7c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1608306442591-73807bd2bb2b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                }
            ],
            ne: [
                {
                    title: "सडक मर्मत सम्झौता",
                    date: "जुन १५, २०२३",
                    content: `<p>मेपल स्ट्रिटमा मर्मत कार्य आउँदो सोमबारबाट सुरु हुनेछ। दैनिक ९ बजे देखि ४ बजे सम्म यातायातमा अस्थायी अवरोधहरूको अपेक्षा गर्नुहोस्।</p>
                             <p>शुक्रबारसम्म कार्य पूरा हुने अपेक्षा छ, र यसले सडक पुनर्निर्माण, फुटपाथ मर्मत, र नयाँ जलनिकास स्थापनाको समावेश गर्दछ।</p>
                             <p>कृपया यस अवधिमा सम्भव भएमा वैकल्पिक मार्गहरू प्रयोग गर्नुहोस्। बासिन्दाहरूका लागि स्थानीय पहुँच कायम राखिनेछ।</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1573100094256-3e9dd5c48c36?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                },
                {
                    title: "नयाँ पुस्तकालय समय",
                    date: "जुन १२, २०२३",
                    content: `<p>ग्राम पुस्तकालयले आउँदो महिनाबाट विस्तारित खुल्ने समयको घोषणा गर्न खुसी छ। नयाँ समयहरू यसप्रकार हुनेछन्:</p>
                             <p>सोमबार-शुक्रबार: ९ बजे - ८ बजे</p>
                             <p>शनिबार: १० बजे - ६ बजे</p>
                             <p>आइतबार: ११ बजे - ४ बजे</p>
                             <p>यी विस्तारित समयहरूले थप बासिन्दाहरूलाई हाम्रो सेवाहरू र स्रोतहरूमा पहुँच गर्न अनुमति दिनेछ।</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                },
                {
                    title: "सामुदायिक बगैंचा उद्घाटन",
                    date: "जुन ५, २०२३",
                    content: `<p>नयाँ सामुदायिक बगैंचा अहिले आधिकारिक रूपमा खुल्यो! गाउँ पार्कको दक्षिण तर्फ अवस्थित, बगैंचामा बासिन्दाहरूका लागि ४० व्यक्तिगत प्लटहरू छन्।</p>
                             <p>यो शनिबार बिहान १० बजे उद्घाटन समारोह आयोजना गरिनेछ। महापौर रिबन काट्न उपस्थित हुनेछन्।</p>
                             <p>पहिलो आउने, पहिलो पाउने आधारमा प्लटहरू उपलब्ध छन्। कृपया दर्ता गर्न गाउँ कार्यालयमा जानुहोस्।</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1591862719726-49e2a5a4e6eb?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                },
                {
                    title: "किसान बजार फर्किएको",
                    date: "मे २८, २०२३",
                    content: `<p>स्थानीय उत्पादनहरू, बेक्ड सामानहरू, र हस्तशिल्पहरूको विस्तारित चयनसहित यो शनिबार साप्ताहिक किसान बजार फर्किएको छ।</p>
                             <p>यस वर्ष हामी ५ नयाँ विक्रेताहरूलाई स्वागत गर्छौं, जसले कुल २५ स्थानीय उत्पादकहरूमा पुर्याएको छ। नयाँ वस्तुहरूमा जैविक मह, कारीगर चीजहरू, र ताजा फूलहरू समावेश छन्।</p>
                             <p>अक्टोबरको अन्त्यसम्म बजार हरेक शनिबार बिहान ८ बजेदेखि दिउँसो १ बजेसम्म चल्नेछ।</p>`,
                    images: [
                        "https://images.unsplash.com/photo-1516253593875-bd7ba052fbc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1570996055360-d5c30de5c7c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                        "https://images.unsplash.com/photo-1608306442591-73807bd2bb2b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"
                    ]
                }
            ]
        };
        
        // News item click handling
        document.querySelectorAll('.news-item').forEach(item => {
            item.addEventListener('click', function() {
                const newsId = this.getAttribute('data-news');
                showNewsDetail(newsId);
            });
        });
        
        // Notification item click handling
        document.querySelectorAll('.notification-item').forEach(item => {
            item.addEventListener('click', function() {
                const newsId = this.getAttribute('data-news');
                
                // Switch to news section
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                
                document.querySelector('.nav-btn[data-target="news"]').classList.add('active');
                document.getElementById('news').classList.add('active');
                
                // Hide notification popup
                document.getElementById('notification-popup').classList.remove('active');
                
                // Show the news detail
                showNewsDetail(newsId);
            });
        });
        
        // Marquee news click handling
        document.querySelectorAll('.marquee a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const newsId = this.getAttribute('data-news');
                
                // Switch to news section
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                
                document.querySelector('.nav-btn[data-target="news"]').classList.add('active');
                document.getElementById('news').classList.add('active');
                
                // Show the news detail
                showNewsDetail(newsId);
            });
        });
        
        // Back button handling
        document.getElementById('back-button').addEventListener('click', function() {
            document.getElementById('news-detail').classList.remove('active');
            document.getElementById('news-list').style.display = 'grid';
        });
        
        // Show news detail function
        function showNewsDetail(newsId) {
            const news = newsData[currentLanguage][newsId];
            
            // Update detail view
            document.getElementById('detail-title').textContent = news.title;
            document.getElementById('detail-date').innerHTML = `<i class="far fa-calendar-alt"></i> ${news.date}`;
            document.getElementById('detail-content').innerHTML = news.content;
            
            // Update images
            const gallery = document.querySelector('.news-detail-gallery');
            gallery.innerHTML = '';
            
            news.images.forEach(imageUrl => {
                gallery.innerHTML += `
                    <div class="news-detail-image">
                        <img src="${imageUrl}" alt="${news.title}">
                    </div>
                `;
            });
            
            // Show detail, hide list
            document.getElementById('news-detail').classList.add('active');
            document.getElementById('news-list').style.display = 'none';
        }
        
        // Weather API simulation
        function updateWeather() {
            const weatherConditions = [
                { temp: 24, icon: 'fa-sun' },
                { temp: 18, icon: 'fa-cloud-sun' },
                { temp: 22, icon: 'fa-sun' },
                { temp: 16, icon: 'fa-cloud-rain' },
                { temp: 28, icon: 'fa-sun' }
            ];
            
            const randomWeather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
            
            // Update mini weather
            document.getElementById('weather-mini-temp').textContent = `${randomWeather.temp}°C`;
            document.getElementById('weather-mini-icon').className = `fas ${randomWeather.icon}`;
        }
        
        // Initialize weather
        updateWeather();
        
        // Update weather every 30 minutes (simulated)
        setInterval(updateWeather, 1800000);
        
        // Notification functionality
        document.getElementById('notification-icon').addEventListener('click', function() {
            document.getElementById('notification-popup').classList.toggle('active');
        });
        
        document.getElementById('close-notifications').addEventListener('click', function() {
            document.getElementById('notification-popup').classList.remove('active');
        });
        
        // Close ad banner
        document.getElementById('ad-close').addEventListener('click', function() {
            document.getElementById('ad-banner').style.display = 'none';
        });
        
        // Language toggle functionality
        document.getElementById('language-toggle').addEventListener('click', function() {
            // Toggle language
            currentLanguage = currentLanguage === 'en' ? 'ne' : 'en';
            
            // Update all text content
            updateLanguage(currentLanguage);
        });
        
        // Update language function
        function updateLanguage(lang) {
            // Update all elements with data
            for (const key in languageData[lang]) {
                const elements = document.querySelectorAll(`[id="${key}"]`);
                elements.forEach(element => {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.value = languageData[lang][key];
                    } else {
                        element.textContent = languageData[lang][key];
                    }
                });
            }
            
            // Update language button text
            document.getElementById('language-text').textContent = languageData[lang]['language-text'];
        }

        // Add this code to the existing script section
 // 1. Interactive News Carousel with Auto-Play and Manual Controls
    function initNewsCarousel() {
        const newsItems = document.querySelectorAll('.news-item');
        let currentNewsIndex = 0;
        const newsInterval = 5000; // 5 seconds
        
        function showNewsItem(index) {
            newsItems.forEach(item => item.classList.remove('active'));
            newsItems[index].classList.add('active');
        }
        
        // Auto-rotate news items
        setInterval(() => {
            currentNewsIndex = (currentNewsIndex + 1) % newsItems.length;
            showNewsItem(currentNewsIndex);
        }, newsInterval);
        
        // Add navigation dots for news carousel
        const newsContainer = document.querySelector('.news-grid');
        const dotsContainer = document.createElement('div');
        dotsContainer.className = 'news-dots';
        dotsContainer.style.cssText = 'display: flex; justify-content: center; gap: 8px; margin: 15px 0;';
        
        newsItems.forEach((_, i) => {
            const dot = document.createElement('span');
            dot.className = 'news-dot';
            dot.style.cssText = 'width: 10px; height: 10px; border-radius: 50%; background: #ccc; cursor: pointer;';
            if (i === 0) dot.style.background = 'var(--primary)';
            
            dot.addEventListener('click', () => {
                currentNewsIndex = i;
                showNewsItem(i);
                newsItems.forEach((_, idx) => {
                    dotsContainer.children[idx].style.background = idx === i ? 'var(--primary)' : '#ccc';
                });
            });
            
            dotsContainer.appendChild(dot);
        });
        
        newsContainer.parentNode.insertBefore(dotsContainer, newsContainer.nextSibling);
    }

    // 2. Clickable News Items with Animation
    function makeNewsClickable() {
        document.querySelectorAll('.news-item').forEach(item => {
            item.style.cursor = 'pointer';
            
            item.addEventListener('click', function() {
                const newsId = this.getAttribute('data-news');
                // Add a visual feedback animation
                this.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    this.style.transform = '';
                    showNewsDetail(newsId);
                }, 150);
            });
        });
    }

    // 3. "See More" News Button
    function addSeeMoreButton() {
        const newsContainer = document.querySelector('.news-grid');
        const seeMoreBtn = document.createElement('button');
        seeMoreBtn.id = 'see-more-news';
        seeMoreBtn.textContent = currentLanguage === 'en' ? 'See More News' : 'थप समाचार हेर्नुहोस्';
        seeMoreBtn.style.cssText = `
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
        `;
        
        seeMoreBtn.addEventListener('click', () => {
            // Switch to news section
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
            
            document.querySelector('.nav-btn[data-target="news"]').classList.add('active');
            document.getElementById('news').classList.add('active');
        });
        
        // Insert after the news container
        newsContainer.parentNode.insertBefore(seeMoreBtn, newsContainer.nextSibling);
    }

    // 4. Video Advertisement Banner
    function addVideoAdBanner() {
        const videoAdContainer = document.createElement('div');
        videoAdContainer.className = 'ad-banner';
        videoAdContainer.style.background = 'linear-gradient(135deg, var(--community), var(--secondary))';
        videoAdContainer.style.marginTop = '30px';
        videoAdContainer.style.position = 'relative';
        videoAdContainer.style.overflow = 'hidden';
        
        videoAdContainer.innerHTML = `
            <div class="ad-content">
                <div class="ad-icon">
                    <i class="fas fa-play-circle"></i>
                </div>
                <div class="ad-text">
                    <h3 id="video-ad-title">${currentLanguage === 'en' ? 'Local Business Spotlight' : 'स्थानीय व्यवसाय स्पटलाइट'}</h3>
                    <p id="video-ad-desc">${currentLanguage === 'en' ? 'Watch our featured local business story' : 'हाम्रो विशेष स्थानीय व्यवसाय कथा हेर्नुहोस्'}</p>
                </div>
                <button id="play-video-btn" style="background: rgba(255,255,255,0.3); border: none; border-radius: 50%; width: 50px; height: 50px; color: white; cursor: pointer;">
                    <i class="fas fa-play"></i>
                </button>
            </div>
            <div id="video-player" style="display: none; margin-top: 15px;">
                <div style="position: relative; padding-top: 56.25%; background: #000; border-radius: 8px;">
                    <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 8px;" 
                            src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
                <button id="skip-ad-btn" style="margin-top: 10px; padding: 5px 15px; background: rgba(255,255,255,0.2); border: 1px solid white; border-radius: 20px; color: white; cursor: pointer;">
                    ${currentLanguage === 'en' ? 'Skip' : 'छोड्नुहोस्'}
                </button>
            </div>
        `;
        
        // Insert after the news section
        const newsSection = document.querySelector('.news-grid').parentNode;
        newsSection.parentNode.insertBefore(videoAdContainer, newsSection.nextSibling);
        
        // Add video play functionality
        document.getElementById('play-video-btn').addEventListener('click', function() {
            this.style.display = 'none';
            document.getElementById('video-player').style.display = 'block';
        });
        
        document.getElementById('skip-ad-btn').addEventListener('click', function() {
            document.getElementById('video-player').style.display = 'none';
            document.getElementById('play-video-btn').style.display = 'block';
        });
    }

    // 5. Interactive Weather Widget
    function enhanceWeatherWidget() {
        const weatherWidget = document.querySelector('.weather-mini');
        weatherWidget.style.cursor = 'pointer';
        
        weatherWidget.addEventListener('click', function() {
            // Show expanded weather info
            const expandedInfo = document.createElement('div');
            expandedInfo.id = 'weather-expanded';
            expandedInfo.style.cssText = `
                position: absolute;
                top: 100%;
                right: 0;
                background: white;
                padding: 15px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                width: 200px;
                color: #333;
                margin-top: 10px;
            `;
            
            const weatherData = {
                en: {
                    temp: '24°C',
                    condition: 'Partly Cloudy',
                    humidity: '65%',
                    wind: '10 km/h'
                },
                ne: {
                    temp: '२४°से',
                    condition: 'आंशिक बादल',
                    humidity: '६५%',
                    wind: '१० किमी/घण्टा'
                }
            };
            
            expandedInfo.innerHTML = `
                <h4 style="margin-bottom: 10px;">${currentLanguage === 'en' ? 'Weather Details' : 'मौसम विवरण'}</h4>
                <p><i class="fas fa-temperature-high"></i> ${currentLanguage === 'en' ? 'Temperature' : 'तापमान'}: ${weatherData[currentLanguage].temp}</p>
                <p><i class="fas fa-cloud"></i> ${currentLanguage === 'en' ? 'Condition' : 'अवस्था'}: ${weatherData[currentLanguage].condition}</p>
                <p><i class="fas fa-tint"></i> ${currentLanguage === 'en' ? 'Humidity' : 'आर्द्रता'}: ${weatherData[currentLanguage].humidity}</p>
                <p><i class="fas fa-wind"></i> ${currentLanguage === 'en' ? 'Wind' : 'हावा'}: ${weatherData[currentLanguage].wind}</p>
            `;
            
            this.appendChild(expandedInfo);
            
            // Close when clicking elsewhere
            setTimeout(() => {
                document.addEventListener('click', function closeWeather(e) {
                    if (!weatherWidget.contains(e.target)) {
                        expandedInfo.remove();
                        document.removeEventListener('click', closeWeather);
                    }
                });
            }, 100);
        });
    }

    // 6. Dynamic Emergency Contact Cards
    function createEmergencyCards() {
        const emergencySection = document.querySelector('.emergency-contacts');
        const contactList = document.querySelector('.contact-list');
        
        // Convert to cards layout
        contactList.style.display = 'grid';
        contactList.style.gridTemplateColumns = 'repeat(auto-fit, minmax(150px, 1fr))';
        contactList.style.gap = '10px';
        
        document.querySelectorAll('.contact-item').forEach(item => {
            item.style.cssText = `
                background: #fff8f8;
                padding: 15px;
                border-radius: 10px;
                display: flex;
                flex-direction: column;
                align-items: center;
                text-align: center;
                border-left: 4px solid var(--warning);
            `;
            
            // Make phone numbers clickable
            const phoneNumber = item.querySelector('span:last-child');
            phoneNumber.innerHTML = `<a href="tel:${phoneNumber.textContent}" style="color: var(--warning); text-decoration: none; font-weight: bold;">${phoneNumber.textContent}</a>`;
        });
    }

    // 7. Quick Actions with Hover Effects
    function enhanceQuickActions() {
        document.querySelectorAll('.action-button').forEach(button => {
            button.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = '0 8px 15px rgba(0,0,0,0.1)';
            });
            
            button.addEventListener('mouseleave', function() {
                this.style.transform = '';
                this.style.boxShadow = '';
            });
            
            // Add click functionality
            button.addEventListener('click', function() {
                const actionText = this.querySelector('span').textContent.toLowerCase();
                
                if (actionText.includes('event') || actionText.includes('कार्यक्रम')) {
                    document.querySelector('.nav-btn[data-target="events"]').click();
                } else if (actionText.includes('map') || actionText.includes('नक्सा')) {
                    alert(currentLanguage === 'en' ? 'Village map would open here' : 'गाउँको नक्सा यहाँ खुल्नेछ');
                } else if (actionText.includes('help') || actionText.includes('मद्दत')) {
                    // Scroll to emergency contacts
                    document.querySelector('.emergency-contacts').scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    }

    // 8. Personalized Greeting Based on Time of Day
    function addPersonalizedGreeting() {
        const hours = new Date().getHours();
        let greeting;
        
        if (currentLanguage === 'en') {
            if (hours < 12) greeting = 'Good Morning';
            else if (hours < 17) greeting = 'Good Afternoon';
            else greeting = 'Good Evening';
        } else {
            if (hours < 12) greeting = 'शुभ प्रभात';
            else if (hours < 17) greeting = 'शुभ दिउँसो';
            else greeting = 'शुभ साँझ';
        }
        
        const greetingElement = document.createElement('div');
        greetingElement.style.cssText = `
            margin: 10px 0 20px;
            font-size: 18px;
            color: var(--dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
        `;
        greetingElement.innerHTML = `<i class="fas fa-smile"></i> ${greeting}, ${currentLanguage === 'en' ? 'Neighbor' : 'छिमेकी'}!`;
        
        // Insert after the section title in the home section
        const homeSectionTitle = document.querySelector('#home .section-title');
        homeSectionTitle.parentNode.insertBefore(greetingElement, homeSectionTitle.nextSibling);
    }
// Toast notification system
function showToast(message, isError = false) {
    const toast = document.createElement('div');
    toast.style.cssText = `
        position: fixed;
        bottom: 80px;
        left: 50%;
        transform: translateX(-50%);
        background: ${isError ? '#ff5252' : '#4caf50'};
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 10000;
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
        animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s forwards;
    `;
    
    toast.innerHTML = `
        <i class="fas ${isError ? 'fa-exclamation-circle' : 'fa-check-circle'}"></i>
        <span>${message}</span>
    `;
    
    document.body.appendChild(toast);
    
    // Remove toast after animation completes
    setTimeout(() => {
        if (toast.parentNode) {
            toast.parentNode.removeChild(toast);
        }
    }, 3000);
}

// Add CSS for toast animations
const toastStyles = document.createElement('style');
toastStyles.textContent = `
    @keyframes toastIn {
        from { opacity: 0; transform: translate(-50%, 20px); }
        to { opacity: 1; transform: translate(-50%, 0); }
    }
    
    @keyframes toastOut {
        from { opacity: 1; transform: translate(-50%, 0); }
        to { opacity: 0; transform: translate(-50%, 20px); }
    }
`;
document.head.appendChild(toastStyles);

// 1. Show Name Modal after 3 seconds with auto-suggestions
function showNameModal() {
    setTimeout(() => {
        // Check if user already exists
        if (localStorage.getItem('userName')) return;
        
        // Create modal overlay
        const modalOverlay = document.createElement('div');
        modalOverlay.id = 'name-modal-overlay';
        modalOverlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        `;
        
        // Create modal content
        const modalContent = document.createElement('div');
        modalContent.id = 'name-modal';
        modalContent.style.cssText = `
            background: linear-gradient(135deg, #4caf50, #2196f3);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
        `;
        
        modalContent.innerHTML = `
            <h2 style="margin-bottom: 20px; font-size: 24px;">
                <i class="fas fa-user-circle" style="margin-right: 10px;"></i>
                ${currentLanguage === 'en' ? 'Welcome to Our Village!' : 'हाम्रो गाउँमा स्वागत छ!'}
            </h2>
            <p style="margin-bottom: 20px; font-size: 16px;">
                ${currentLanguage === 'en' ? 'Please enter your name to join our community' : 'कृपया हाम्रो समुदायमा सामेल हुन आफ्नो नाम प्रविष्ट गर्नुहोस्'}
            </p>
            <div style="position: relative;">
                <input type="text" id="user-name-input" placeholder="${currentLanguage === 'en' ? 'Your Name (max 16 chars)' : 'तपाईंको नाम (अधिकतम १६ अक्षर)'}" 
                    maxlength="16"
                    style="padding: 12px; width: 100%; border: none; border-radius: 8px; margin-bottom: 5px; font-size: 16px;">
                <div id="name-suggestions" style="display: none; position: absolute; top: 100%; left: 0; right: 0; 
                    background: white; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); z-index: 10001; max-height: 200px; overflow-y: auto;">
                </div>
            </div>
            <button id="save-name-btn" 
                style="padding: 12px 25px; background: white; color: #4caf50; border: none; border-radius: 8px; 
                font-weight: bold; cursor: pointer; font-size: 16px; transition: all 0.3s; margin-top: 15px;">
                ${currentLanguage === 'en' ? 'OK' : 'ठिक छ'}
            </button>
        `;
        
        modalOverlay.appendChild(modalContent);
        document.body.appendChild(modalOverlay);
        
        // Focus on input field
        const nameInput = document.getElementById('user-name-input');
        nameInput.focus();
        
        // Add event listeners
        document.getElementById('save-name-btn').addEventListener('click', saveUserName);
        
        // Allow saving with Enter key
        nameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                saveUserName();
            }
        });
        
        // Add input event for auto-suggestions
        nameInput.addEventListener('input', showNameSuggestions);
        
        // Close suggestions when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                document.getElementById('name-suggestions').style.display = 'none';
            }
        });
    }, 3000); // Show after 3 seconds
}

// 2. Show name suggestions based on input
function showNameSuggestions() {
    const input = document.getElementById('user-name-input');
    const suggestionsContainer = document.getElementById('name-suggestions');
    const value = input.value.toLowerCase().trim();
    
    // Clear previous suggestions
    suggestionsContainer.innerHTML = '';
    
    if (value.length < 2) {
        suggestionsContainer.style.display = 'none';
        return;
    }
    
    // Sample common names (in a real app, this could come from an API)
    const commonNames = [
        { name: 'Ram Sharma', avatar: 'https://randomuser.me/api/portraits/men/32.jpg' },
        { name: 'Sita Devi', avatar: 'https://randomuser.me/api/portraits/women/44.jpg' },
        { name: 'Hari Prasad', avatar: 'https://randomuser.me/api/portraits/men/67.jpg' },
        { name: 'Gita Kumari', avatar: 'https://randomuser.me/api/portraits/women/68.jpg' },
        { name: 'Krishna Bahadur', avatar: 'https://randomuser.me/api/portraits/men/22.jpg' },
        { name: 'Anita Shrestha', avatar: 'https://randomuser.me/api/portraits/women/33.jpg' },
        { name: 'Bikash Chaudhary', avatar: 'https://randomuser.me/api/portraits/men/45.jpg' },
        { name: 'Sunita Gurung', avatar: 'https://randomuser.me/api/portraits/women/55.jpg' }
    ];
    
    // Filter names that match input
    const matchedNames = commonNames.filter(person => 
        person.name.toLowerCase().includes(value)
    );
    
    if (matchedNames.length === 0) {
        suggestionsContainer.style.display = 'none';
        return;
    }
    
    // Display suggestions
    matchedNames.forEach(person => {
        const suggestion = document.createElement('div');
        suggestion.style.cssText = `
            padding: 10px 15px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background 0.2s;
        `;
        suggestion.innerHTML = `
            <img src="${person.avatar}" style="width: 30px; height: 30px; border-radius: 50%; object-fit: cover; margin-right: 10px;">
            <span style="color: #333;">${person.name}</span>
        `;
        
        suggestion.addEventListener('mouseenter', () => {
            suggestion.style.background = '#f0f0f0';
        });
        
        suggestion.addEventListener('mouseleave', () => {
            suggestion.style.background = 'transparent';
        });
        
        suggestion.addEventListener('click', () => {
            input.value = person.name;
            suggestionsContainer.style.display = 'none';
        });
        
        suggestionsContainer.appendChild(suggestion);
    });
    
    suggestionsContainer.style.display = 'block';
}

// 3. Save user name and update UI
function saveUserName() {
    const userName = document.getElementById('user-name-input').value.trim();
    
    if (userName) {
        // Check name length
        if (userName.length > 16) {
            showToast(currentLanguage === 'en' 
                ? 'Name must be 16 characters or less' 
                : 'नाम १६ अक्षर वा कम हुनुपर्छ', true);
            return;
        }
        
        // Save to localStorage
        localStorage.setItem('userName', userName);
        localStorage.setItem('joinDate', new Date().toISOString());
        
        // Remove modal
        document.getElementById('name-modal-overlay').remove();
        
        // Update greeting in home section
        updateGreeting(userName);
        
        // Update profile in clubs section
        updateProfileSection(userName);
        
        // Show success message
        showToast(currentLanguage === 'en' 
            ? `Welcome, ${userName}!` 
            : `${userName}, स्वागत छ!`);
            
        // Prompt to upload profile photo
        setTimeout(() => {
            showToast(currentLanguage === 'en' 
                ? 'Upload a profile photo in your profile section' 
                : 'आफ्नो प्रोफाइल सेक्सनमा प्रोफाइल फोटो अपलोड गर्नुहोस्', false);
        }, 2000);
    } else {
        // Show error if name is empty
        showToast(currentLanguage === 'en' 
            ? 'Please enter your name' 
            : 'कृपया आफ्नो नाम प्रविष्ट गर्नुहोस्', true);
    }
}

// 4. Update greeting in home section with profile picture
function updateGreeting(userName) {
    // Remove existing greeting if any
    const existingGreeting = document.getElementById('user-greeting');
    if (existingGreeting) {
        existingGreeting.remove();
    }
    
    const greetingElement = document.createElement('div');
    greetingElement.id = 'user-greeting';
    greetingElement.style.cssText = `
        background: linear-gradient(135deg, #ff9800, #ff5722);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
    `;
    
    greetingElement.addEventListener('mouseenter', () => {
        greetingElement.style.transform = 'translateY(-2px)';
        greetingElement.style.boxShadow = '0 6px 20px rgba(0, 0, 0, 0.15)';
    });
    
    greetingElement.addEventListener('mouseleave', () => {
        greetingElement.style.transform = 'translateY(0)';
        greetingElement.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.1)';
    });
    
    // Get profile picture or use default
    const profilePic = localStorage.getItem('profilePic') || '';
    
    greetingElement.innerHTML = `
        <img src="${profilePic || 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80'}" 
            alt="${userName}" 
            style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid white; margin-right: 10px;">
        <h3 style="margin: 0; font-size: 18px;">
            <i class="fas fa-hand-wave" style="margin-right: 5px;"></i>
            ${currentLanguage === 'en' ? `Hello, ${userName}!` : `नमस्ते, ${userName}!`}
        </h3>
    `;
    
    // Add click event to show profile
    greetingElement.addEventListener('click', showProfileModal);
    
    // Insert greeting after carousel or at the top of home section
    const homeSection = document.getElementById('home');
    const carousel = document.querySelector('.carousel');
    
    if (carousel) {
        homeSection.insertBefore(greetingElement, carousel.nextSibling);
    } else {
        homeSection.insertBefore(greetingElement, homeSection.firstChild);
    }
    
    // Update notification header with profile picture
    updateNotificationHeader(profilePic, userName);
}

// 5. Update notification header with profile picture
function updateNotificationHeader(profilePic, userName) {
    const notificationHeader = document.querySelector('.notification-header');
    if (!notificationHeader) return;
    
    // Check if profile element already exists
    let profileElement = document.getElementById('notification-profile');
    
    if (!profileElement) {
        profileElement = document.createElement('div');
        profileElement.id = 'notification-profile';
        profileElement.style.cssText = `
            display: flex;
            align-items: center;
            gap: 10px;
            margin-right: 15px;
        `;
        
        // Insert at the beginning of the header
        notificationHeader.insertBefore(profileElement, notificationHeader.firstChild);
    }
    
    profileElement.innerHTML = `
        <img src="${profilePic || 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80'}" 
            alt="${userName}" 
            style="width: 35px; height: 35px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255,255,255,0.3);">
    `;
}

// 6. Show profile modal when greeting is clicked
function showProfileModal() {
    const userName = localStorage.getItem('userName');
    const joinDate = localStorage.getItem('joinDate');
    const profilePic = localStorage.getItem('profilePic') || '';
    
    // Create modal overlay
    const modalOverlay = document.createElement('div');
    modalOverlay.id = 'profile-modal-overlay';
    modalOverlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
    `;
    
    // Create modal content
    const modalContent = document.createElement('div');
    modalContent.id = 'profile-modal';
    modalContent.style.cssText = `
        background: white;
        color: #333;
        padding: 30px;
        border-radius: 15px;
        width: 90%;
        max-width: 450px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        text-align: center;
    `;
    
    // Format join date
    const joinDateFormatted = joinDate ? new Date(joinDate).toLocaleDateString() : new Date().toLocaleDateString();
    
    modalContent.innerHTML = `
        <div style="display: flex; align-items: center; margin-bottom: 20px;">
            <img src="https://images.unsplash.com/photo-1599813789635-3605c57b4cf3?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" 
                alt="Village Logo" style="width: 40px; height: 40px; margin-right: 10px;">
            <h2 style="margin: 0; color: #4caf50; font-size: 22px;">GreenVillage</h2>
        </div>
        
        <div style="margin-bottom: 25px;">
            <div id="profile-pic-container" style="position: relative; display: inline-block; margin-bottom: 15px;">
                <img id="profile-pic-large" src="${profilePic || 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80'}" 
                    alt="${userName}" 
                    style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid #4caf50;">
                <label for="profile-pic-upload-large" style="position: absolute; bottom: 5px; right: 5px; 
                    background: #4caf50; color: white; border-radius: 50%; width: 30px; height: 30px; 
                    display: flex; align-items: center; justify-content: center; cursor: pointer;">
                    <i class="fas fa-camera"></i>
                </label>
                <input type="file" id="profile-pic-upload-large" accept="image/*" style="display: none;">
            </div>
            
            <h3 style="margin: 10px 0; color: #333;">${userName}</h3>
            <p style="color: #666; margin: 0;">
                <i class="fas fa-calendar-plus" style="margin-right: 5px;"></i>
                ${currentLanguage === 'en' 
                    ? `Joined on ${joinDateFormatted}` 
                    : `${joinDateFormatted} मा सामेल भयो`}
            </p>
        </div>
        
        <div style="margin-bottom: 20px;">
            <label for="update-name-input" style="display: block; text-align: left; margin-bottom: 5px; font-weight: 500;">
                ${currentLanguage === 'en' ? 'Update Name' : 'नाम अपडेट गर्नुहोस्'}
            </label>
            <input type="text" id="update-name-input" value="${userName}" maxlength="16"
                style="padding: 10px; width: 100%; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 15px;">
            <button id="update-name-btn" 
                style="padding: 10px 20px; background: #4caf50; color: white; border: none; border-radius: 8px; 
                font-weight: bold; cursor: pointer; width: 100%;">
                ${currentLanguage === 'en' ? 'Save Changes' : 'परिवर्तनहरू सेभ गर्नुहोस्'}
            </button>
        </div>
        
        <div style="border-top: 1px solid #eee; padding-top: 20px;">
            <button id="logout-btn" 
                style="padding: 10px 20px; background: #ff5722; color: white; border: none; border-radius: 8px; 
                font-weight: bold; cursor: pointer; width: 100%;">
                <i class="fas fa-sign-out-alt" style="margin-right: 5px;"></i>
                ${currentLanguage === 'en' ? 'Logout' : 'लगआउट'}
            </button>
        </div>
        
        <button id="close-profile-modal" style="position: absolute; top: 15px; right: 15px; 
            background: none; border: none; color: #999; font-size: 20px; cursor: pointer;">
            &times;
        </button>
    `;
    
    modalOverlay.appendChild(modalContent);
    document.body.appendChild(modalOverlay);
    
    // Add event listeners
    document.getElementById('close-profile-modal').addEventListener('click', () => {
        modalOverlay.remove();
    });
    
    document.getElementById('update-name-btn').addEventListener('click', updateUserName);
    
    document.getElementById('logout-btn').addEventListener('click', confirmLogout);
    
    document.getElementById('profile-pic-upload-large').addEventListener('change', handleProfilePicUpload);
    
    // Close modal when clicking outside
    modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) {
            modalOverlay.remove();
        }
    });
}

// 7. Update user name
function updateUserName() {
    const newName = document.getElementById('update-name-input').value.trim();
    
    if (newName) {
        // Check name length
        if (newName.length > 16) {
            showToast(currentLanguage === 'en' 
                ? 'Name must be 16 characters or less' 
                : 'नाम १६ अक्षर वा कम हुनुपर्छ', true);
            return;
        }
        
        // Save to localStorage
        localStorage.setItem('userName', newName);
        
        // Update greeting
        const greetingElement = document.getElementById('user-greeting');
        if (greetingElement) {
            greetingElement.querySelector('h3').innerHTML = `
                <i class="fas fa-hand-wave" style="margin-right: 5px;"></i>
                ${currentLanguage === 'en' ? `Hello, ${newName}!` : `नमस्ते, ${newName}!`}
            `;
        }
        
        // Update profile section
        const profileSection = document.getElementById('user-profile-section');
        if (profileSection) {
            profileSection.querySelector('h4').textContent = newName;
        }
        
        // Show success message
        showToast(currentLanguage === 'en' 
            ? 'Name updated successfully!' 
            : 'नाम सफलतापूर्वक अपडेट गरियो!');
    } else {
        // Show error if name is empty
        showToast(currentLanguage === 'en' 
            ? 'Please enter a valid name' 
            : 'कृपया एउटा मान्य नाम प्रविष्ट गर्नुहोस्', true);
    }
}

// 8. Confirm logout
function confirmLogout() {
    // Create confirmation modal
    const confirmModal = document.createElement('div');
    confirmModal.id = 'logout-confirm-modal';
    confirmModal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10001;
    `;
    
    const confirmContent = document.createElement('div');
    confirmContent.style.cssText = `
        background: white;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        width: 90%;
        max-width: 350px;
    `;
    
    confirmContent.innerHTML = `
        <h3 style="margin-bottom: 15px; color: #333;">
            <i class="fas fa-sign-out-alt" style="color: #ff5722; margin-right: 8px;"></i>
            ${currentLanguage === 'en' ? 'Confirm Logout' : 'लगआउट पुष्टि गर्नुहोस्'}
        </h3>
        <p style="margin-bottom: 20px; color: #666;">
            ${currentLanguage === 'en' 
                ? 'Are you sure you want to logout?' 
                : 'के तपाइँ लगआउट गर्न निश्चित हुनुहुन्छ?'}
        </p>
        <div style="display: flex; gap: 10px;">
            <button id="confirm-logout" 
                style="padding: 10px 20px; background: #ff5722; color: white; border: none; border-radius: 8px; 
                font-weight: bold; cursor: pointer; flex: 1;">
                ${currentLanguage === 'en' ? 'Yes' : 'हो'}
            </button>
            <button id="cancel-logout" 
                style="padding: 10px 20px; background: #9e9e9e; color: white; border: none; border-radius: 8px; 
                font-weight: bold; cursor: pointer; flex: 1;">
                ${currentLanguage === 'en' ? 'No' : 'होइन'}
            </button>
        </div>
    `;
    
    confirmModal.appendChild(confirmContent);
    document.body.appendChild(confirmModal);
    
    // Add event listeners
    document.getElementById('confirm-logout').addEventListener('click', performLogout);
    
    document.getElementById('cancel-logout').addEventListener('click', () => {
        confirmModal.remove();
    });
    
    // Close modal when clicking outside
    confirmModal.addEventListener('click', (e) => {
        if (e.target === confirmModal) {
            confirmModal.remove();
        }
    });
}

// 9. Perform logout
function performLogout() {
    // Remove user data from localStorage
    localStorage.removeItem('userName');
    localStorage.removeItem('joinDate');
    localStorage.removeItem('profilePic');
    
    // Remove greeting
    const greetingElement = document.getElementById('user-greeting');
    if (greetingElement) {
        greetingElement.remove();
    }
    
    // Remove profile section
    const profileSection = document.getElementById('user-profile-section');
    if (profileSection) {
        profileSection.remove();
    }
    
    // Remove profile from notification header
    const notificationProfile = document.getElementById('notification-profile');
    if (notificationProfile) {
        notificationProfile.remove();
    }
    
    // Close all modals
    document.querySelectorAll('#profile-modal-overlay, #logout-confirm-modal').forEach(modal => {
        modal.remove();
    });
    
    // Show success message
    showToast(currentLanguage === 'en' 
        ? 'You have been logged out' 
        : 'तपाइँ लगआउट गर्नुभयो');
    
    // Show name modal again after 10 seconds
    setTimeout(showNameModal, 10000);
}

// 10. Update profile section in clubs area
function updateProfileSection(userName) {
    // Create or update profile section
    let profileSection = document.getElementById('user-profile-section');
    
    if (!profileSection) {
        profileSection = document.createElement('div');
        profileSection.id = 'user-profile-section';
        profileSection.style.cssText = `
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            text-align: center;
        `;
        
        // Add to clubs section
        const clubsSection = document.getElementById('clubs');
        if (clubsSection) {
            clubsSection.appendChild(profileSection);
        }
    }
    
    // Get join date
    const joinDate = localStorage.getItem('joinDate');
    const joinDateFormatted = joinDate ? new Date(joinDate).toLocaleDateString() : new Date().toLocaleDateString();
    
    // Get profile pic from localStorage or use default
    const profilePic = localStorage.getItem('profilePic') || '';
    
    profileSection.innerHTML = `
        <h3 class="section-title" style="justify-content: center;">
            <i class="fas fa-user-check" style="color: #4caf50;"></i>
            ${currentLanguage === 'en' ? 'Your Village Profile' : 'तपाईंको गाउँ प्रोफाइल'}
        </h3>
        
        <div style="display: flex; flex-direction: column; align-items: center;">
            <div id="profile-pic-container" style="position: relative; margin-bottom: 15px;">
                <img id="profile-pic" src="${profilePic || 'https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80'}" 
                    alt="${userName}" 
                    style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid #4caf50;">
                <label for="profile-pic-upload" style="position: absolute; bottom: 5px; right: 5px; 
                    background: #4caf50; color: white; border-radius: 50%; width: 30px; height: 30px; 
                    display: flex; align-items: center; justify-content: center; cursor: pointer;">
                    <i class="fas fa-camera"></i>
                </label>
                <input type="file" id="profile-pic-upload" accept="image/*" style="display: none;">
            </div>
            
            <h4 style="margin: 10px 0; color: #333;">${userName}</h4>
            <p style="color: #4caf50; margin: 0; font-weight: 500;">
                <i class="fas fa-map-marker-alt" style="margin-right: 5px;"></i>
                ${currentLanguage === 'en' ? 'GreenVillage Member' : 'हरियाली गाउँ सदस्य'}
            </p>
            
            <div style="margin-top: 15px; padding: 15px; background: #f9f9f9; border-radius: 8px; width: 100%;">
                <p style="margin: 0; color: #666;">
                    <i class="fas fa-calendar-plus" style="margin-right: 5px; color: #4caf50;"></i>
                    ${currentLanguage === 'en' 
                        ? `Joined on ${joinDateFormatted}` 
                        : `${joinDateFormatted} मा सामेल भयो`}
                </p>
            </div>
            
            <button id="view-profile-btn" style="margin-top: 15px; padding: 8px 15px; 
                background: #4caf50; color: white; border: none; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-eye" style="margin-right: 5px;"></i>
                ${currentLanguage === 'en' ? 'View Profile' : 'प्रोफाइल हेर्नुहोस्'}
            </button>
        </div>
    `;
    
    // Add event listeners
    document.getElementById('profile-pic-upload').addEventListener('change', handleProfilePicUpload);
    document.getElementById('view-profile-btn').addEventListener('click', showProfileModal);
}

// 11. Handle profile picture upload
function handleProfilePicUpload(event) {
    const file = event.target.files[0];
    if (!file) return;
    
    if (!file.type.match('image.*')) {
        showToast(currentLanguage === 'en' 
            ? 'Please select an image file' 
            : 'कृपया एउटा छवि फाइल चयन गर्नुहोस्', true);
        return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
        // Crop and resize image to square
        const img = new Image();
        img.onload = function() {
            const canvas = document.createElement('canvas');
            const size = Math.min(img.width, img.height);
            canvas.width = 200;
            canvas.height = 200;
            
            const ctx = canvas.getContext('2d');
            
            // Calculate cropping coordinates to center the image
            const sx = (img.width - size) / 2;
            const sy = (img.height - size) / 2;
            
            // Draw cropped and resized image
            ctx.drawImage(img, sx, sy, size, size, 0, 0, 200, 200);
            
            // Get data URL and save to localStorage
            const croppedImageUrl = canvas.toDataURL('image/jpeg', 0.9);
            localStorage.setItem('profilePic', croppedImageUrl);
            
            // Update profile pictures everywhere
            const profilePics = document.querySelectorAll('#profile-pic, #profile-pic-large');
            profilePics.forEach(pic => {
                pic.src = croppedImageUrl;
            });
            
            // Update greeting picture
            const greetingPic = document.querySelector('#user-greeting img');
            if (greetingPic) {
                greetingPic.src = croppedImageUrl;
            }
            
            // Update notification header
            const userName = localStorage.getItem('userName');
            updateNotificationHeader(croppedImageUrl, userName);
            
            showToast(currentLanguage === 'en' 
                ? 'Profile picture updated!' 
                : 'प्रोफाइल तस्वीर अपडेट गरियो!');
        };
        img.src = e.target.result;
    };
    reader.readAsDataURL(file);
}

// 12. Initialize all features
function initUserFeatures() {
    // Check for existing user
    const userName = localStorage.getItem('userName');
    const profilePic = localStorage.getItem('profilePic');
    
    if (userName) {
        // User already exists, update UI
        updateGreeting(userName);
        updateProfileSection(userName);
        
        if (profilePic) {
            // Update profile picture if exists
            const profileImg = document.getElementById('profile-pic');
            if (profileImg) {
                profileImg.src = profilePic;
            }
            
            // Update greeting picture
            const greetingImg = document.querySelector('#user-greeting img');
            if (greetingImg) {
                greetingImg.src = profilePic;
            }
            
            // Update notification header
            updateNotificationHeader(profilePic, userName);
        }
    } else {
        // New user, show modal after 3 seconds
        showNameModal();
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    initUserFeatures();
});
    // 9. Social Proof Notifications
    
    // 10. Daily Village Tip
    function showDailyTip() {
        const tips = {
            en: [
                'Tip: The farmers market has the freshest produce on Saturday mornings',
                'Remember to separate your recycling - collection is every Tuesday',
                'The community center offers free Wi-Fi from 8 AM to 8 PM',
                'Report street light issues through the village app for faster response'
            ],
            ne: [
                'सुझाव: शनिबार बिहान किसान बजारमा ताजा उत्पादनहरू हुन्छन्',
                'मंगलबार हरेक हप्ता रिसाइक्लिंग संकलन गरिन्छ - आफ्नो रिसाइक्लिंग अलग गर्न नभुल्नुहोस्',
                'सामुदायिक केन्द्रले बिहान ८ बजेदेखि रात ८ बजेसम्म निःशुल्क वाइफाइ प्रदान गर्दछ',
                'छिटो प्रतिक्रियाका लागि गाउँ एप मार्फत सडक बत्ती समस्याहरू रिपोर्ट गर्नुहोस्'
            ]
        };
        
        const tipBanner = document.createElement('div');
        tipBanner.className = 'ad-banner';
        tipBanner.style.background = 'linear-gradient(135deg, var(--secondary), var(--primary))';
        tipBanner.style.marginTop = '20px';
        
        tipBanner.innerHTML = `
            <div class="ad-content">
                <div class="ad-icon">
                    <i class="fas fa-lightbulb"></i>
                </div>
                <div class="ad-text">
                    <h3>${currentLanguage === 'en' ? 'Village Tip of the Day' : 'आजको गाउँ सुझाव'}</h3>
                    <p>${tips[currentLanguage][Math.floor(Math.random() * tips[currentLanguage].length)]}</p>
                </div>
            </div>
        `;
        
        // Insert after the about section
        const aboutSection = document.querySelector('.about-content');
        aboutSection.parentNode.insertBefore(tipBanner, aboutSection.nextSibling);
    }

    // Add CSS animations for new features
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideInRight {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        .news-item {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .news-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .news-item.active {
            border: 2px solid var(--primary);
        }
    `;
    document.head.appendChild(style);

    // Initialize all features when the DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        // Wait a bit for the initial rendering
        setTimeout(() => {
            initNewsCarousel();
            makeNewsClickable();
            addSeeMoreButton();
            addVideoAdBanner();
            enhanceWeatherWidget();
            createEmergencyCards();
            enhanceQuickActions();
            addPersonalizedGreeting();
            showSocialProof();
            showDailyTip();
        }, 500);
    });

    // Update language for new elements when language changes
    // Modify the existing updateLanguage function to include new elements
    const originalUpdateLanguage = updateLanguage;
    updateLanguage = function(lang) {
        originalUpdateLanguage(lang);
        
        // Update new elements
        if (document.getElementById('see-more-news')) {
            document.getElementById('see-more-news').textContent = 
                lang === 'en' ? 'See More News' : 'थप समाचार हेर्नुहोस्';
        }
        
        if (document.getElementById('video-ad-title')) {
            document.getElementById('video-ad-title').textContent = 
                lang === 'en' ? 'Local Business Spotlight' : 'स्थानीय व्यवसाय स्पटलाइट';
        }
        
        if (document.getElementById('video-ad-desc')) {
            document.getElementById('video-ad-desc').textContent = 
                lang === 'en' ? 'Watch our featured local business story' : 'हाम्रो विशेष स्थानीय व्यवसाय कथा हेर्नुहोस्';
        }
        
        if (document.getElementById('skip-ad-btn')) {
            document.getElementById('skip-ad-btn').innerHTML = 
                lang === 'en' ? 'Skip' : 'छोड्नुहोस्';
        }
        
        // Update any other dynamic content you've added
    };

// Club data with members
const clubData = {
    en: {
        clubs: [
            {
                id: 'yuwa-club',
                name: 'Yuwa Club',
                icon: 'fa-users',
                members: [
                    {
                        name: 'Rajesh Thapa',
                        photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Active member since 2021. Passionate about community development and youth empowerment. Organizes monthly clean-up drives.'
                    },
                    {
                        name: 'Sita Sharma',
                        photo: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Event coordinator with excellent organizational skills. Loves painting and has won several local art competitions.'
                    },
                    {
                        name: 'Amit Gurung',
                        photo: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Tech enthusiast who helps with digital literacy programs. Studying computer engineering at the local college.'
                    },
                    {
                        name: 'Priya Shrestha',
                        photo: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Environmental activist who leads tree plantation drives. Studying environmental science at university.'
                    },
                    {
                        name: 'Nabin Rai',
                        photo: 'https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Sports coordinator who organizes football tournaments. Works as a physical education teacher at local school.'
                    },
                    {
                        name: 'Anjali Magar',
                        photo: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Cultural event manager who preserves traditional dances. Performs at local festivals and events.'
                    }
                ]
            },
            {
                id: 'mahila-club',
                name: 'Mahila Club',
                icon: 'fa-female',
                members: [
                    {
                        name: 'Laxmi Devi',
                        photo: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'President of Mahila Club. Advocate for women\'s education and economic independence. Runs a small handicraft business.'
                    },
                    {
                        name: 'Rina Magar',
                        photo: 'https://images.unsplash.com/photo-1554151228-14d9def656e4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Skilled in traditional weaving techniques. Teaches free classes every Saturday at the community center.'
                    },
                    {
                        name: 'Saraswati Koirala',
                        photo: 'https://images.unsplash.com/photo-1567532939604-b6b5b0db2604?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Former teacher who now focuses on adult literacy programs. Believes education has no age limit.'
                    },
                    {
                        name: 'Bimala Tamang',
                        photo: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Expert in organic farming methods. Runs a community garden project that supplies fresh produce to local families.'
                    },
                    {
                        name: 'Gita Thapa',
                        photo: 'https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Health worker who organizes medical camps and awareness programs. Specializes in maternal and child health.'
                    },
                    {
                        name: 'Sujata Limbu',
                        photo: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Legal advisor who provides free counseling to women. Advocate for women\'s rights and gender equality.'
                    }
                ]
            },
            {
                id: 'yuwa-shakti',
                name: 'Yuwa Shakti Club',
                icon: 'fa-fire',
                members: [
                    {
                        name: 'Niraj Basnet',
                        photo: 'https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Fitness instructor who organizes free yoga and meditation sessions in the village park every morning.'
                    },
                    {
                        name: 'Pooja Rai',
                        photo: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Environmental activist leading the "Plastic-Free Village" campaign. Studies environmental science at university.'
                    },
                    {
                        name: 'Kiran Thapa',
                        photo: 'https://images.unsplash.com/photo-1519345182560-3f2917c472ef?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Photographer who documents village life and events. His work has been featured in regional exhibitions.'
                    },
                    {
                        name: 'Anita Limbu',
                        photo: 'https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Dance instructor who teaches traditional and contemporary dance forms to youth every weekend.'
                    },
                    {
                        name: 'Rohan Singh',
                        photo: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Music teacher who runs a community music school. Specializes in traditional Nepali instruments.'
                    },
                    {
                        name: 'Sunil Gurung',
                        photo: 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Adventure guide who organizes trekking and hiking trips. Promotes eco-tourism in the region.'
                    }
                ]
            },
            {
                id: 'siddhartha-yuwa',
                name: 'Siddhartha Yuwa Club',
                icon: 'fa-lightbulb',
                members: [
                    {
                        name: 'Bikash Chhetri',
                        photo: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Entrepreneur who started a small IT training center in the village. Believes in the power of technology to transform communities.'
                    },
                    {
                        name: 'Sunita Ghale',
                        photo: 'https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Social work student who coordinates volunteer activities and connects the club with regional NGOs.'
                    },
                    {
                        name: 'Ramesh Bhandari',
                        photo: 'https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Musician who organizes cultural events and teaches traditional instruments to interested youth.'
                    },
                    {
                        name: 'Alina Karki',
                        photo: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Journalism student who runs the village newsletter. Documents community events and success stories.'
                    },
                    {
                        name: 'Sandeep Thakuri',
                        photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'App developer creating solutions for local businesses. Conducts coding workshops for teenagers.'
                    }
                ]
            },
            {
                id: 'miya-club',
                name: 'Miya Club',
                icon: 'fa-utensils',
                members: [
                    {
                        name: 'Abdul Rahman',
                        photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Restaurant owner who specializes in traditional cuisine. Hosts cooking workshops on the first Sunday of every month.'
                    },
                    {
                        name: 'Fatima Begum',
                        photo: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Expert in embroidery and textile arts. Her work preserves traditional patterns and techniques.'
                    },
                    {
                        name: 'Mohammed Ali',
                        photo: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Local historian who documents the cultural heritage of the community. Leads heritage walks twice a month.'
                    },
                    {
                        name: 'Ayesha Khan',
                        photo: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Teacher who runs after-school tutoring programs for children needing additional academic support.'
                    },
                    {
                        name: 'Rahim Ahmed',
                        photo: 'https://images.unsplash.com/photo-1568602471122-7832951cc4c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Calligraphy artist who teaches Arabic script. Organizes intercultural dialogue sessions.'
                    }
                ]
            },
            {
                id: 'khel-club',
                name: 'Khel Club',
                icon: 'fa-futbol',
                members: [
                    {
                        name: 'Bikram Singh',
                        photo: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Former regional football player who now coaches the village youth team. Believes sports build character and discipline.'
                    },
                    {
                        name: 'Sarita Tharu',
                        photo: 'https://images.unsplash.com/photo-1554151228-14d9def656e4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Volleyball enthusiast who organizes inter-village tournaments. Works to promote sports among girls in the community.'
                    },
                    {
                        name: 'Rajendra Thapa',
                        photo: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Cricket coach with professional playing experience. Runs summer cricket camps for children.'
                    },
                    {
                        name: 'Pratima Gurung',
                        photo: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80',
                        bio: 'Martial arts instructor teaching self-defense classes. Empowers women through physical training.'
                    }
                ]
            }
        ]
    }
};

// Initialize clubs section
function initClubsSection() {
    const clubsSection = document.getElementById('clubs');
    if (!clubsSection) return;
    
    // Clear existing content
    clubsSection.innerHTML = '';
    
    // Add title
    const title = document.createElement('h2');
    title.className = 'section-title';
    title.innerHTML = '<i class="fas fa-users"></i> <span id="village-clubs-text">Village Clubs</span>';
    clubsSection.appendChild(title);
    
    // Create clubs carousel
    const carouselContainer = document.createElement('div');
    carouselContainer.className = 'clubs-carousel-container';
    carouselContainer.style.cssText = `
        margin: 20px 0;
        position: relative;
    `;
    
    carouselContainer.innerHTML = `
        <div class="clubs-carousel" style="display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 15px; padding: 10px 0; scrollbar-width: none;">
            ${clubData.en.clubs.map((club, index) => `
                <div class="club-carousel-item" data-club-id="${club.id}" style="
                    scroll-snap-align: start; 
                    flex: 0 0 calc(50% - 10px); 
                    background: linear-gradient(135deg, var(--secondary), var(--primary));
                    border-radius: 12px; 
                    padding: 20px; 
                    color: white;
                    text-align: center;
                    cursor: pointer;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
                ">
                    <i class="fas ${club.icon}" style="font-size: 32px; margin-bottom: 10px;"></i>
                    <h3 style="margin: 0; font-size: 16px;">${club.name}</h3>
                    <p style="margin: 5px 0 0; font-size: 14px; opacity: 0.9;">${club.members.length} members</p>
                </div>
            `).join('')}
        </div>
        <div class="carousel-dots" style="display: flex; justify-content: center; gap: 8px; margin-top: 15px;">
            ${clubData.en.clubs.map((_, i) => `
                <div class="carousel-dot" data-index="${i}" style="
                    width: 10px; 
                    height: 10px; 
                    border-radius: 50%; 
                    background: ${i === 0 ? 'var(--primary)' : '#ccc'}; 
                    cursor: pointer;
                "></div>
            `).join('')}
        </div>
        <button class="carousel-prev" style="
            position: absolute; 
            left: -10px; 
            top: 50%; 
            transform: translateY(-50%); 
            background: white; 
            border: none; 
            width: 40px; 
            height: 40px; 
            border-radius: 50%; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
            cursor: pointer;
            display: flex; 
            align-items: center; 
            justify-content: center;
            z-index: 2;
        ">
            <i class="fas fa-chevron-left" style="color: var(--primary);"></i>
        </button>
        <button class="carousel-next" style="
            position: absolute; 
            right: -10px; 
            top: 50%; 
            transform: translateY(-50%); 
            background: white; 
            border: none; 
            width: 40px; 
            height: 40px; 
            border-radius: 50%; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
            cursor: pointer;
            display: flex; 
            align-items: center; 
            justify-content: center;
            z-index: 2;
        ">
            <i class="fas fa-chevron-right" style="color: var(--primary);"></i>
        </button>
    `;
    
    clubsSection.appendChild(carouselContainer);
    
    // Create search bar
    const searchBar = document.createElement('div');
    searchBar.className = 'clubs-search-container';
    searchBar.style.cssText = `
        margin: 25px 0 20px;
        position: relative;
    `;
    
    searchBar.innerHTML = `
        <input type="text" id="clubs-search" placeholder="Search club members..." 
            style="padding: 12px 15px; width: 100%; border: 2px solid #e0e0e0; border-radius: 25px; font-size: 16px;">
        <i class="fas fa-search" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #6c757d;"></i>
    `;
    
    clubsSection.appendChild(searchBar);
    
    // Create clubs grid (2x2 layout)
    const clubsGrid = document.createElement('div');
    clubsGrid.className = 'clubs-grid';
    clubsGrid.style.cssText = `
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-top: 20px;
    `;
    
    clubsSection.appendChild(clubsGrid);
    
    // Render clubs
    renderClubs();
    
    // Add carousel functionality
    initCarousel();
    
    // Add search functionality
    document.getElementById('clubs-search').addEventListener('input', handleClubSearch);
    
    // Add advertisement
    const adBanner = document.createElement('div');
    adBanner.className = 'ad-banner';
    adBanner.style.cssText = `
        background: linear-gradient(135deg, #ff9800, #ff5722);
        border-radius: 12px;
        padding: 15px;
        margin: 30px 0 20px;
        color: white;
        position: relative;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    `;
    
    adBanner.innerHTML = `
        <button class="ad-close" style="
            position: absolute; 
            top: 10px; 
            right: 10px; 
            background: rgba(255, 255, 255, 0.3); 
            border: none; 
            color: white; 
            width: 25px; 
            height: 25px; 
            border-radius: 50%; 
            cursor: pointer; 
            font-weight: bold;
        ">&times;</button>
        <div class="ad-content" style="display: flex; align-items: center; gap: 15px;">
            <div class="ad-icon" style="font-size: 40px; flex-shrink: 0;">
                <i class="fas fa-store"></i>
            </div>
            <div class="ad-text">
                <h3 style="margin-bottom: 5px; font-size: 18px;">Support Local Businesses!</h3>
                <p style="font-size: 14px; opacity: 0.9;">Visit our village market this weekend for fresh produce and handmade crafts.</p>
            </div>
        </div>
    `;
    
    clubsSection.appendChild(adBanner);
    
    // Add close functionality to ad
    adBanner.querySelector('.ad-close').addEventListener('click', function() {
        adBanner.style.display = 'none';
    });
}

// Initialize carousel functionality
function initCarousel() {
    const carousel = document.querySelector('.clubs-carousel');
    const items = document.querySelectorAll('.club-carousel-item');
    const dots = document.querySelectorAll('.carousel-dot');
    const prevBtn = document.querySelector('.carousel-prev');
    const nextBtn = document.querySelector('.carousel-next');
    
    let currentIndex = 0;
    
    // Update carousel position
    function updateCarousel() {
        const itemWidth = items[0].offsetWidth + 15; // width + gap
        carousel.scrollTo({
            left: currentIndex * itemWidth,
            behavior: 'smooth'
        });
        
        // Update dots
        dots.forEach((dot, i) => {
            dot.style.background = i === currentIndex ? 'var(--primary)' : '#ccc';
        });
    }
    
    // Next button click
    nextBtn.addEventListener('click', function() {
        if (currentIndex < items.length - 2) { // Show 2 items at a time
            currentIndex++;
            updateCarousel();
        }
    });
    
    // Previous button click
    prevBtn.addEventListener('click', function() {
        if (currentIndex > 0) {
            currentIndex--;
            updateCarousel();
        }
    });
    
    // Dot click
    dots.forEach((dot, i) => {
        dot.addEventListener('click', function() {
            currentIndex = i;
            updateCarousel();
        });
    });
    
    // Club item click
    items.forEach(item => {
        item.addEventListener('click', function() {
            const clubId = this.dataset.clubId;
            showClubDetails(clubId);
        });
    });
}

// Render clubs in 2x2 grid
function renderClubs() {
    const clubsGrid = document.querySelector('.clubs-grid');
    if (!clubsGrid) return;
    
    clubsGrid.innerHTML = '';
    
    const clubs = clubData.en.clubs;
    
    clubs.forEach(club => {
        const clubCard = document.createElement('div');
        clubCard.className = 'club-card';
        clubCard.dataset.clubId = club.id;
        clubCard.style.cssText = `
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        `;
        
        clubCard.innerHTML = `
            <div class="club-icon" style="background: linear-gradient(135deg, var(--secondary), var(--primary)); 
                height: 80px; display: flex; align-items: center; justify-content: center; font-size: 28px; color: white;">
                <i class="fas ${club.icon}"></i>
            </div>
            <div class="club-content" style="padding: 15px;">
                <h4 class="club-name" style="font-weight: 600; margin-bottom: 8px; color: var(--dark); font-size: 14px;">${club.name}</h4>
                <div class="club-members" style="font-size: 12px; color: var(--gray);">
                    ${club.members.length} members
                </div>
                <div class="club-members-preview" style="display: flex; margin-top: 10px;">
                    ${club.members.slice(0, 3).map(member => `
                        <img src="${member.photo}" alt="${member.name}" 
                            style="width: 30px; height: 30px; border-radius: 50%; object-fit: cover; border: 2px solid white; margin-left: -8px;">
                    `).join('')}
                    ${club.members.length > 3 ? `
                        <div style="width: 30px; height: 30px; border-radius: 50%; background: var(--primary); 
                            color: white; display: flex; align-items: center; justify-content: center; 
                            font-size: 10px; margin-left: -8px; border: 2px solid white;">
                            +${club.members.length - 3}
                        </div>
                    ` : ''}
                </div>
            </div>
        `;
        
        clubCard.addEventListener('click', () => {
            showClubDetails(club.id);
        });
        
        // Hover effects
        clubCard.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.boxShadow = '0 8px 20px rgba(0, 0, 0, 0.12)';
        });
        
        clubCard.addEventListener('mouseleave', function() {
            this.style.transform = '';
            this.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.08)';
        });
        
        clubsGrid.appendChild(clubCard);
    });
}

// Show club details with sliding member list
function showClubDetails(clubId) {
    const club = clubData.en.clubs.find(c => c.id === clubId);
    if (!club) return;
    
    // Create modal overlay
    const modalOverlay = document.createElement('div');
    modalOverlay.id = 'club-modal-overlay';
    modalOverlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        padding: 20px;
    `;
    
    // Create modal content
    const modalContent = document.createElement('div');
    modalContent.id = 'club-modal';
    modalContent.style.cssText = `
        background: white;
        border-radius: 15px;
        width: 100%;
        max-width: 500px;
        max-height: 80vh;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        display: flex;
        flex-direction: column;
    `;
    
    modalContent.innerHTML = `
        <div style="position: sticky; top: 0; background: white; z-index: 10; padding: 20px; border-bottom: 1px solid #eee; 
            display: flex; justify-content: space-between; align-items: center;">
            <h2 style="margin: 0; color: var(--dark); display: flex; align-items: center; gap: 10px;">
                <i class="fas ${club.icon}" style="color: var(--primary);"></i>
                ${club.name}
            </h2>
            <button id="close-club-modal" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">
                &times;
            </button>
        </div>
        
        <div class="club-members-list" style="flex: 1; overflow-y: auto; padding: 20px;">
            <h3 style="margin-bottom: 20px; color: var(--dark); display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-users" style="color: var(--secondary);"></i>
                ${club.members.length} Members
            </h3>
            
            <div class="members-container" style="display: grid; gap: 15px;">
                ${club.members.map(member => `
                    <div class="member-card" data-member-name="${member.name.toLowerCase()}" 
                        style="background: #f9f9f9; border-radius: 10px; padding: 15px; cursor: pointer; transition: transform 0.2s;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <img src="${member.photo}" alt="${member.name}" 
                                style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                            <div style="flex: 1;">
                                <h4 style="margin: 0 0 5px; color: var(--dark); font-size: 16px;">${member.name}</h4>
                                <p style="margin: 0; color: var(--gray); font-size: 14px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                                    ${member.bio}
                                </p>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--gray);"></i>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
    
    modalOverlay.appendChild(modalContent);
    document.body.appendChild(modalOverlay);
    
    // Add event listeners
    document.getElementById('close-club-modal').addEventListener('click', () => {
        modalOverlay.remove();
    });
    
    modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) {
            modalOverlay.remove();
        }
    });
    
    // Add click events to member cards
    document.querySelectorAll('.member-card').forEach(card => {
        card.addEventListener('click', function() {
            const memberName = this.dataset.memberName;
            const member = club.members.find(m => m.name.toLowerCase() === memberName);
            if (member) {
                showMemberDetails(member, club.name);
            }
        });
        
        // Hover effects
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateX(5px)';
            this.style.background = '#f0f0f0';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = '';
            this.style.background = '#f9f9f9';
        });
    });
}

// Show member details
function showMemberDetails(member, clubName) {
    // Create modal overlay
    const modalOverlay = document.createElement('div');
    modalOverlay.id = 'member-modal-overlay';
    modalOverlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10001;
        padding: 20px;
    `;
    
    // Create modal content
    const modalContent = document.createElement('div');
    modalContent.id = 'member-modal';
    modalContent.style.cssText = `
        background: white;
        border-radius: 15px;
        width: 100%;
        max-width: 400px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    `;
    
    modalContent.innerHTML = `
        <div style="position: relative;">
            <div style="height: 100px; background: linear-gradient(135deg, var(--secondary), var(--primary));"></div>
            <img src="${member.photo}" alt="${member.name}" 
                style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 4px solid white;
                position: absolute; top: 60px; left: 50%; transform: translateX(-50%);">
        </div>
        
        <div style="padding: 50px 20px 20px; text-align: center;">
            <h2 style="margin: 0 0 5px; color: var(--dark);">${member.name}</h2>
            <p style="margin: 0 0 20px; color: var(--secondary); font-weight: 500;">
                <i class="fas fa-users" style="margin-right: 5px;"></i>
                ${clubName}
            </p>
            
            <div style="background: #f9f9f9; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <h4 style="margin: 0 0 10px; color: var(--dark); display: flex; align-items: center; justify-content: center; gap: 8px;">
                    <i class="fas fa-info-circle" style="color: var(--primary);"></i>
                    About
                </h4>
                <p style="margin: 0; color: #555; line-height: 1.6; text-align: left;">${member.bio}</p>
            </div>
            
            <button id="close-member-modal" 
                style="padding: 10px 20px; background: var(--primary); color: white; border: none; 
                border-radius: 25px; font-weight: 500; cursor: pointer;">
                Close
            </button>
        </div>
        
        <button id="close-member-detail-modal" style="
            position: absolute; 
            top: 15px; 
            right: 15px; 
            background: rgba(255,255,255,0.8); 
            border: none; 
            width: 30px; 
            height: 30px; 
            border-radius: 50%; 
            cursor: pointer; 
            font-size: 18px;
            display: flex; 
            align-items: center; 
            justify-content: center;
        ">&times;</button>
    `;
    
    modalOverlay.appendChild(modalContent);
    document.body.appendChild(modalOverlay);
    
    // Add event listeners
    document.getElementById('close-member-modal').addEventListener('click', () => {
        modalOverlay.remove();
    });
    
    document.getElementById('close-member-detail-modal').addEventListener('click', () => {
        modalOverlay.remove();
    });
    
    modalOverlay.addEventListener('click', (e) => {
        if (e.target === modalOverlay) {
            modalOverlay.remove();
        }
    });
}

// Handle club search
function handleClubSearch() {
    const searchTerm = document.getElementById('clubs-search').value.toLowerCase().trim();
    
    if (!searchTerm) {
        renderClubs();
        return;
    }
    
    const clubsGrid = document.querySelector('.clubs-grid');
    if (!clubsGrid) return;
    
    clubsGrid.innerHTML = '';
    
    const allMembers = [];
    clubData.en.clubs.forEach(club => {
        club.members.forEach(member => {
            allMembers.push({
                ...member,
                clubName: club.name,
                clubIcon: club.icon,
                clubId: club.id
            });
        });
    });
    
    const matchedMembers = allMembers.filter(member => 
        member.name.toLowerCase().includes(searchTerm)
    );
    
    if (matchedMembers.length === 0) {
        clubsGrid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--gray);">
                <i class="fas fa-search" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                <h3>No members found</h3>
                <p>Try a different search term</p>
            </div>
        `;
        return;
    }
    
    // Group by club for better organization
    const membersByClub = {};
    matchedMembers.forEach(member => {
        if (!membersByClub[member.clubId]) {
            membersByClub[member.clubId] = {
                club: clubData.en.clubs.find(c => c.id === member.clubId),
                members: []
            };
        }
        membersByClub[member.clubId].members.push(member);
    });
    
    // Create section for each club with matching members
    Object.values(membersByClub).forEach(({club, members}) => {
        const clubSection = document.createElement('div');
        clubSection.style.cssText = `
            grid-column: 1 / -1;
            margin-bottom: 30px;
        `;
        
        clubSection.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
                <div style="background: linear-gradient(135deg, var(--secondary), var(--primary)); 
                    width: 40px; height: 40px; border-radius: 10px; display: flex; 
                    align-items: center; justify-content: center; color: white;">
                    <i class="fas ${club.icon}"></i>
                </div>
                <h3 style="margin: 0; color: var(--dark);">${club.name}</h3>
                <span style="color: var(--gray); font-size: 14px;">${members.length} members found</span>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px;">
                ${members.map(member => `
                    <div class="member-card" data-member-name="${member.name.toLowerCase()}" data-club-id="${club.id}"
                        style="background: white; border-radius: 10px; padding: 15px; cursor: pointer; 
                        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08); transition: transform 0.2s;">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <img src="${member.photo}" alt="${member.name}" 
                                style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                            <div>
                                <h4 style="margin: 0 0 5px; color: var(--dark); font-size: 16px;">${member.name}</h4>
                                <p style="margin: 0; color: var(--gray); font-size: 14px;">${club.name}</p>
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        `;
        
        clubsGrid.appendChild(clubSection);
    });
    
    // Add click events to member cards
    document.querySelectorAll('.member-card').forEach(card => {
        card.addEventListener('click', function() {
            const memberName = this.dataset.memberName;
            const clubId = this.dataset.clubId;
            
            const club = clubData.en.clubs.find(c => c.id === clubId);
            if (!club) return;
            
            const member = club.members.find(m => m.name.toLowerCase() === memberName);
            if (member) {
                showMemberDetails(member, club.name);
            }
        });
        
        // Hover effects
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
            this.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.1)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = '';
            this.style.boxShadow = '0 3px 10px rgba(0, 0, 0, 0.08)';
        });
    });
}

// Initialize clubs section when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Initialize clubs section when clubs tab is clicked
    document.querySelector('[data-target="clubs"]').addEventListener('click', function() {
        // Small delay to ensure section is visible
        setTimeout(initClubsSection, 50);
    });
    
    // Also initialize if clubs section is already active
    if (document.getElementById('clubs').classList.contains('active')) {
        initClubsSection();
    }
});


// Enhanced Photos Section with Language Consistency and UI Improvements
function enhancePhotosSection() {
    const photosSection = document.getElementById('photos');
    if (!photosSection) return;

    // 1. Create Mini Banners at Top (English only)
    const topBanners = document.createElement('div');
    topBanners.className = 'top-banners';
    topBanners.style.cssText = `
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        overflow-x: auto;
        padding: 5px 0;
        scrollbar-width: none;
    `;
    
    topBanners.innerHTML = `
        <div class="mini-banner" style="flex: 0 0 auto; width: 120px; height: 60px; 
            background: linear-gradient(135deg, #ff9800, #ff5722); border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; color: white; 
            font-weight: bold; font-size: 12px; text-align: center; padding: 5px;">
            Photo Contest
        </div>
        <div class="mini-banner" style="flex: 0 0 auto; width: 120px; height: 60px; 
            background: linear-gradient(135deg, #2196f3, #1976d2); border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; color: white; 
            font-weight: bold; font-size: 12px; text-align: center; padding: 5px;">
            Village Memories
        </div>
        <div class="mini-banner" style="flex: 0 0 auto; width: 120px; height: 60px; 
            background: linear-gradient(135deg, #4caf50, #2e7d32); border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; color: white; 
            font-weight: bold; font-size: 12px; text-align: center; padding: 5px;">
            Share Your Photos
        </div>
    `;
    
    // Hide scrollbar
    topBanners.style.cssText += `
        scrollbar-width: none;
        -ms-overflow-style: none;
    `;
    topBanners.addEventListener('wheel', (e) => {
        e.preventDefault();
        topBanners.scrollLeft += e.deltaY;
    });

    // Insert top banners
    const sectionTitle = photosSection.querySelector('.section-title');
    photosSection.insertBefore(topBanners, sectionTitle.nextSibling);

    // 2. Create Categories Filter (English only - fixed width to prevent resizing)
    const categories = [
        { id: 'all', name: 'All Media', icon: 'fas fa-images', width: '110px' },
        { id: 'events', name: 'Events', icon: 'fas fa-calendar', width: '100px' },
        { id: 'nature', name: 'Nature', icon: 'fas fa-tree', width: '100px' },
        { id: 'community', name: 'Community', icon: 'fas fa-users', width: '120px' },
        { id: 'videos', name: 'Videos', icon: 'fas fa-video', width: '100px' },
        { id: 'latest', name: 'Latest', icon: 'fas fa-star', width: '90px' }
    ];

    // Create categories navigation
    const categoriesNav = document.createElement('div');
    categoriesNav.className = 'categories-nav';
    categoriesNav.style.cssText = `
        display: flex;
        overflow-x: auto;
        gap: 10px;
        padding: 15px 0;
        margin-bottom: 20px;
        scrollbar-width: none;
    `;
    categoriesNav.innerHTML = `
        ${categories.map(cat => `
            <button class="category-btn" data-category="${cat.id}" 
                style="flex: 0 0 auto; width: ${cat.width}; padding: 10px 15px; border-radius: 25px; 
                border: 2px solid #e0e0e0; background: white; color: #555; 
                display: flex; align-items: center; gap: 8px; font-weight: 500;
                transition: all 0.3s; cursor: pointer; white-space: nowrap;">
                <i class="${cat.icon}"></i>
                <span>${cat.name}</span>
            </button>
        `).join('')}
    `;
    
    // Hide scrollbar
    categoriesNav.style.cssText += `
        scrollbar-width: none;
        -ms-overflow-style: none;
    `;
    categoriesNav.addEventListener('wheel', (e) => {
        e.preventDefault();
        categoriesNav.scrollLeft += e.deltaY;
    });

    // Insert categories navigation
    photosSection.insertBefore(categoriesNav, topBanners.nextSibling);

    // 3. Create Photo/Video Data with various aspect ratios
    const mediaData = [
        // Square (1:1)
        { id: 1, type: 'photo', category: 'events', aspect: '1:1',
          url: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Festival Food' },
        
        { id: 2, type: 'photo', category: 'nature', aspect: '1:1',
          url: 'https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Garden Flowers' },
        
        // 3:4
        { id: 3, type: 'photo', category: 'community', aspect: '3:4',
          url: 'https://images.unsplash.com/photo-1519139112-67d27c46e0e0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Community Work' },
        
        { id: 4, type: 'photo', category: 'events', aspect: '3:4',
          url: 'https://images.unsplash.com/photo-1599813789635-3605c57b4cf3?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Village Celebration' },
        
        // 5:9
        { id: 5, type: 'photo', category: 'nature', aspect: '5:9',
          url: 'https://images.unsplash.com/photo-1572244440112-826931b5dfc2?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Sunset View' },
        
        { id: 6, type: 'photo', category: 'latest', aspect: '5:9',
          url: 'https://images.unsplash.com/photo-1591862719726-49e2a5a4e6eb?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'New Plants' },
        
        // 9:16
        { id: 7, type: 'photo', category: 'community', aspect: '9:16',
          url: 'https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Library Event' },
        
        { id: 8, type: 'photo', category: 'latest', aspect: '9:16',
          url: 'https://images.unsplash.com/photo-1570996055360-d5c30de5c7c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Fresh Produce' },
        
        // 16:9
        { id: 9, type: 'photo', category: 'events', aspect: '16:9',
          url: 'https://images.unsplash.com/photo-1516253593875-bd7ba052fbc5?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Market Day' },
        
        { id: 10, type: 'photo', category: 'nature', aspect: '16:9',
          url: 'https://images.unsplash.com/photo-1608306442597-73807bd2bb2b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Village Landscape' },
        
        // Videos with various aspect ratios
        { id: 11, type: 'video', category: 'videos', aspect: '1:1',
          url: 'https://images.unsplash.com/photo-1573100094256-3e9dd5c48c36?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Village Tour', 
          videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ' },
        
        { id: 12, type: 'video', category: 'videos', aspect: '3:4',
          url: 'https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Festival Highlights', 
          videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ' },
        
        { id: 13, type: 'video', category: 'videos', aspect: '5:9',
          url: 'https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Gardening Tips', 
          videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ' },
        
        { id: 14, type: 'video', category: 'videos', aspect: '9:16',
          url: 'https://images.unsplash.com/photo-1492684223066-81342ee5ff30?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Community Meeting', 
          videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ' },
        
        { id: 15, type: 'video', category: 'videos', aspect: '16:9',
          url: 'https://images.unsplash.com/photo-1516339901601-2e1b62dc0c45?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Annual Festival', 
          videoUrl: 'https://www.youtube.com/embed/dQw4w9WgXcQ' },
        
        // Hidden ad (disguised as content)
        { id: 16, type: 'ad', category: 'events', aspect: '1:1',
          url: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Local Restaurant',
          adText: 'Special Offer: 20% off this week!' },
        
        { id: 17, type: 'ad', category: 'community', aspect: '16:9',
          url: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80', 
          title: 'Food Delivery',
          adText: 'Free delivery in village area' }
    ];

    // 4. Replace existing photos grid with enhanced version
    const existingGrid = photosSection.querySelector('.photos-grid');
    if (existingGrid) existingGrid.remove();
    
    const mediaGrid = document.createElement('div');
    mediaGrid.className = 'enhanced-media-grid';
    mediaGrid.style.cssText = `
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
    `;
    
    // Function to render media items (show only first 10 items initially)
    let showingAllMedia = false;
    
    function renderMediaItems(filter = 'all') {
        mediaGrid.innerHTML = '';
        
        let filteredMedia = filter === 'all' 
            ? mediaData 
            : mediaData.filter(item => item.category === filter);
        
        // Show only first 10 items if not showing all
        if (!showingAllMedia && filteredMedia.length > 10) {
            filteredMedia = filteredMedia.slice(0, 10);
        }
        
        filteredMedia.forEach(item => {
            const mediaItem = document.createElement('div');
            mediaItem.className = 'media-item';
            mediaItem.dataset.id = item.id;
            mediaItem.dataset.type = item.type;
            
            // Different styling based on aspect ratio
            let heightStyle = '150px;'; // Default
            
            if (item.aspect === '1:1') heightStyle = '150px;';
            else if (item.aspect === '3:4') heightStyle = '200px;';
            else if (item.aspect === '5:9') heightStyle = '270px;';
            else if (item.aspect === '9:16') heightStyle = '267px;';
            else if (item.aspect === '16:9') heightStyle = '84px;';
            
            mediaItem.style.cssText = `
                position: relative;
                border-radius: 12px;
                overflow: hidden;
                cursor: pointer;
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                transition: transform 0.3s, box-shadow 0.3s;
                height: ${heightStyle}
            `;
            
            // Different content for ads
            if (item.type === 'ad') {
                mediaItem.innerHTML = `
                    <img src="${item.url}" alt="${item.title}" 
                        style="width: 100%; height: 100%; object-fit: cover;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; 
                        background: rgba(0,0,0,0.6); display: flex; flex-direction: column; 
                        align-items: center; justify-content: center; color: white; padding: 10px; text-align: center;">
                        <h4 style="margin: 0 0 5px; font-size: 14px;">${item.title}</h4>
                        <p style="margin: 0; font-size: 12px; color: #ffcc00;">${item.adText}</p>
                        <button style="margin-top: 8px; padding: 5px 10px; background: #ff9800; 
                            border: none; border-radius: 15px; color: white; font-size: 11px;">
                            Learn More
                        </button>
                    </div>
                `;
                
                // Make ads less obvious on hover
                mediaItem.addEventListener('click', (e) => {
                    e.preventDefault();
                    showToast('Discovering local businesses...');
                });
            } else {
                mediaItem.innerHTML = `
                    <img src="${item.url}" alt="${item.title}" 
                        style="width: 100%; height: 100%; object-fit: cover;">
                    ${item.type === 'video' ? `
                        <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; 
                            background: rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-play-circle" style="font-size: 40px; color: white;"></i>
                        </div>
                    ` : ''}
                    <div style="position: absolute; bottom: 0; left: 0; right: 0; 
                        background: linear-gradient(transparent, rgba(0,0,0,0.7)); 
                        padding: 10px; color: white; font-size: 12px;">
                        ${item.title}
                    </div>
                `;
                
                // Click event to show modal for regular content
                mediaItem.addEventListener('click', () => {
                    if (item.type === 'video') {
                        showVideoModal(item);
                    } else {
                        showImageModal(item);
                    }
                });
            }
            
            mediaItem.addEventListener('mouseenter', () => {
                mediaItem.style.transform = 'scale(1.05)';
                mediaItem.style.boxShadow = '0 8px 20px rgba(0, 0, 0, 0.2)';
            });
            
            mediaItem.addEventListener('mouseleave', () => {
                mediaItem.style.transform = '';
                mediaItem.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.1)';
            });
            
            mediaGrid.appendChild(mediaItem);
        });
        
        // Add "View All" button if there are more than 10 items
        const allMedia = filter === 'all' 
            ? mediaData 
            : mediaData.filter(item => item.category === filter);
            
        if (allMedia.length > 10 && !showingAllMedia) {
            const viewAllBtn = document.createElement('button');
            viewAllBtn.className = 'view-all-btn';
            viewAllBtn.style.cssText = `
                grid-column: 1 / -1;
                padding: 15px;
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                color: white;
                border: none;
                border-radius: 10px;
                font-weight: bold;
                font-size: 16px;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                margin-top: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            `;
            viewAllBtn.innerHTML = `
                <i class="fas fa-eye"></i>
                View All ${allMedia.length} Items
            `;
            
            viewAllBtn.addEventListener('mouseenter', () => {
                viewAllBtn.style.transform = 'translateY(-2px)';
                viewAllBtn.style.boxShadow = '0 6px 15px rgba(0, 0, 0, 0.2)';
            });
            
            viewAllBtn.addEventListener('mouseleave', () => {
                viewAllBtn.style.transform = '';
                viewAllBtn.style.boxShadow = 'none';
            });
            
            viewAllBtn.addEventListener('click', () => {
                showingAllMedia = true;
                renderMediaItems(filter);
            });
            
            mediaGrid.appendChild(viewAllBtn);
        } else if (allMedia.length > 10 && showingAllMedia) {
            const showLessBtn = document.createElement('button');
            showLessBtn.className = 'show-less-btn';
            showLessBtn.style.cssText = `
                grid-column: 1 / -1;
                padding: 15px;
                background: #f0f0f0;
                color: #555;
                border: none;
                border-radius: 10px;
                font-weight: bold;
                font-size: 16px;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                margin-top: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            `;
            showLessBtn.innerHTML = `
                <i class="fas fa-chevron-up"></i>
                Show Less
            `;
            
            showLessBtn.addEventListener('mouseenter', () => {
                showLessBtn.style.transform = 'translateY(-2px)';
                showLessBtn.style.boxShadow = '0 6px 15px rgba(0, 0, 0, 0.1)';
            });
            
            showLessBtn.addEventListener('mouseleave', () => {
                showLessBtn.style.transform = '';
                showLessBtn.style.boxShadow = 'none';
            });
            
            showLessBtn.addEventListener('click', () => {
                showingAllMedia = false;
                renderMediaItems(filter);
            });
            
            mediaGrid.appendChild(showLessBtn);
        }
    }
    
    // Initial render
    renderMediaItems();
    photosSection.appendChild(mediaGrid);
    
    // 5. Add category button functionality
    const categoryButtons = categoriesNav.querySelectorAll('.category-btn');
    categoryButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            // Reset showing all when changing categories
            showingAllMedia = false;
            
            // Update active state
            categoryButtons.forEach(b => {
                b.style.background = 'white';
                b.style.color = '#555';
                b.style.borderColor = '#e0e0e0';
            });
            
            this.style.background = 'linear-gradient(135deg, var(--primary), var(--secondary))';
            this.style.color = 'white';
            this.style.borderColor = 'var(--primary)';
            
            // Filter media
            const category = this.dataset.category;
            renderMediaItems(category);
        });
    });
    
    // Set first category as active
    categoryButtons[0].style.background = 'linear-gradient(135deg, var(--primary), var(--secondary))';
    categoryButtons[0].style.color = 'white';
    categoryButtons[0].style.borderColor = 'var(--primary)';
    
    // 6. Add Social Media Follow Section (English only)
    const socialMediaSection = document.createElement('div');
    socialMediaSection.className = 'social-media-section';
    socialMediaSection.style.cssText = `
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin: 30px 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        text-align: center;
    `;
    
    socialMediaSection.innerHTML = `
        <h3 style="margin-bottom: 20px; color: var(--dark); display: flex; align-items: center; justify-content: center; gap: 10px;">
            <i class="fas fa-share-alt" style="color: var(--primary);"></i>
            Follow Us On Social Media
        </h3>
        <div class="social-icons" style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
            <a href="#" class="social-icon" style="display: flex; flex-direction: column; align-items: center; text-decoration: none;">
                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #3b5998, #2d4373); 
                    display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                    <i class="fab fa-facebook-f"></i>
                </div>
                <span style="margin-top: 8px; color: #333; font-size: 14px;">Facebook</span>
            </a>
          
            <a href="#" class="social-icon" style="display: flex; flex-direction: column; align-items: center; text-decoration: none;">
                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #e1306c, #c13584); 
                    display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                    <i class="fab fa-instagram"></i>
                </div>
                <span style="margin-top: 8px; color: #333; font-size: 14px;">Instagram</span>
            </a>
            <a href="#" class="social-icon" style="display: flex; flex-direction: column; align-items: center; text-decoration: none;">
                <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #25d366, #128c7e); 
                    display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
                    <i class="fab fa-whatsapp"></i>
                </div>
                <span style="margin-top: 8px; color: #333; font-size: 14px;">WhatsApp</span>
            </a>
        </div>
    `;
    
    // Insert social media section
    photosSection.appendChild(socialMediaSection);
    
    // 7. Add Join Clubs Section (English only)
    const clubsData = [
        { name: 'Photography Club', members: '45', whatsapp: '+977-9841XXXXXX' },
        { name: 'Nature Lovers', members: '32', whatsapp: '+977-9841XXXXXX' },
        { name: 'Art & Culture', members: '28', whatsapp: '+977-9841XXXXXX' },
        { name: 'Youth Group', members: '56', whatsapp: '+977-9841XXXXXX' }
    ];
    
    const clubsSection = document.createElement('div');
    clubsSection.className = 'clubs-section';
    clubsSection.style.cssText = `
        background: white;
        border-radius: 15px;
        padding: 20px;
        margin: 30px 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    `;
    
    clubsSection.innerHTML = `
        <h3 style="margin-bottom: 20px; color: var(--dark); display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-users" style="color: var(--primary);"></i>
            Join Our Community Clubs
        </h3>
        <div class="clubs-table" style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #eee;">
                            Club Name
                        </th>
                        <th style="padding: 12px; text-align: center; border-bottom: 2px solid #eee;">
                            Members
                        </th>
                        <th style="padding: 12px; text-align: center; border-bottom: 2px solid #eee;">
                            Join
                        </th>
                    </tr>
                </thead>
                <tbody>
                    ${clubsData.map(club => `
                        <tr style="border-bottom: 1px solid #eee;">
                            <td style="padding: 12px; font-weight: 500;">${club.name}</td>
                            <td style="padding: 12px; text-align: center;">
                                <span style="background: #e8f5e9; color: #2e7d32; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                                    ${club.members} members
                                </span>
                            </td>
                            <td style="padding: 12px; text-align: center;">
                                <a href="https://wa.me/${club.whatsapp}" target="_blank" 
                                    style="display: inline-flex; align-items: center; gap: 5px; 
                                    background: #25d366; color: white; padding: 8px 15px; 
                                    border-radius: 20px; text-decoration: none; font-size: 14px;">
                                    <i class="fab fa-whatsapp"></i>
                                    Join
                                </a>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
    
    // Insert clubs section
    photosSection.appendChild(clubsSection);
    
    // 8. Add 6 Additional Features (Icons and names only, clickable)
    const featuresData = [
        { 
            icon: 'fas fa-camera', 
            title: 'Photo Contests'
        },
        { 
            icon: 'fas fa-calendar', 
            title: 'Event Calendar'
        },
        { 
            icon: 'fas fa-download', 
            title: 'Download Photos'
        },
        { 
            icon: 'fas fa-upload', 
            title: 'Share Your Photos'
        },
        { 
            icon: 'fas fa-heart', 
            title: 'Like & Comment'
        },
        { 
            icon: 'fas fa-trophy', 
            title: 'Achievements'
        }
    ];
    
    const featuresSection = document.createElement('div');
    featuresSection.className = 'features-section';
    featuresSection.style.cssText = `
        margin: 30px 0;
    `;
    
    featuresSection.innerHTML = `
        <h3 style="margin-bottom: 20px; color: var(--dark); display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-star" style="color: var(--accent);"></i>
            Gallery Features
        </h3>
        <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;">
            ${featuresData.map(feature => `
                <div class="feature-card" style="background: white; border-radius: 12px; padding: 20px; 
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); text-align: center; transition: transform 0.3s; cursor: pointer;">
                    <div style="width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); 
                        display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; margin: 0 auto 15px;">
                        <i class="${feature.icon}"></i>
                    </div>
                    <h4 style="margin: 0; color: var(--dark);">${feature.title}</h4>
                </div>
            `).join('')}
        </div>
    `;
    
    // Add click event to feature cards
    featuresSection.querySelectorAll('.feature-card').forEach(card => {
        card.addEventListener('click', () => {
            // Show SweetAlert
            Swal.fire({
                title: 'Coming Soon!',
                text: 'This feature will be available in the next update.',
                icon: 'info',
                confirmButtonText: 'OK',
                confirmButtonColor: '#4caf50'
            });
        });
        
        card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-5px)';
        });
        
        card.addEventListener('mouseleave', () => {
            card.style.transform = '';
        });
    });
    
    // Insert features section
    photosSection.appendChild(featuresSection);
    
    // 9. Modal Functions with Attractive Close Buttons
    function showImageModal(item) {
        const modalOverlay = document.createElement('div');
        modalOverlay.id = 'image-modal-overlay';
        modalOverlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s;
        `;
        
        modalOverlay.innerHTML = `
            <div class="image-modal-content" style="max-width: 90%; max-height: 90%; position: relative;">
                <img src="${item.url}" alt="${item.title}" 
                    style="max-width: 100%; max-height: 90vh; border-radius: 8px;">
                <div style="position: absolute; bottom: 0; left: 0; right: 0; 
                    background: rgba(0,0,0,0.7); color: white; padding: 15px; text-align: center;">
                    <h3>${item.title}</h3>
                </div>
                <button id="close-image-modal" 
                    style="position: absolute; top: 15px; right: 15px; 
                    background: rgba(255,255,255,0.9); border: none; 
                    width: 40px; height: 40px; border-radius: 50%; 
                    color: #333; font-size: 20px; cursor: pointer; 
                    display: flex; align-items: center; justify-content: center;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.2); transition: all 0.3s;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        
        document.body.appendChild(modalOverlay);
        
        // Fade in
        setTimeout(() => {
            modalOverlay.style.opacity = 1;
        }, 10);
        
        // Close button event with hover effect
        const closeBtn = document.getElementById('close-image-modal');
        closeBtn.addEventListener('mouseenter', () => {
            closeBtn.style.background = '#ff5252';
            closeBtn.style.color = 'white';
            closeBtn.style.transform = 'scale(1.1)';
        });
        
        closeBtn.addEventListener('mouseleave', () => {
            closeBtn.style.background = 'rgba(255,255,255,0.9)';
            closeBtn.style.color = '#333';
            closeBtn.style.transform = 'scale(1)';
        });
        
        closeBtn.addEventListener('click', () => {
            modalOverlay.style.opacity = 0;
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.style.opacity = 0;
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
    }
    
    function showVideoModal(item) {
        const modalOverlay = document.createElement('div');
        modalOverlay.id = 'video-modal-overlay';
        modalOverlay.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s;
        `;
        
        modalOverlay.innerHTML = `
            <div class="video-modal-content" style="width: 90%; max-width: 800px; position: relative;">
                <div style="position: relative; padding-top: ${item.aspect === '1:1' ? '100%' : item.aspect === '3:4' ? '133%' : item.aspect === '5:9' ? '180%' : item.aspect === '9:16' ? '177%' : '56.25%'};">
                    <iframe src="${item.videoUrl}" 
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 8px;"
                        allowfullscreen>
                    </iframe>
                </div>
                <div style="background: rgba(0,0,0,0.7); color: white; padding: 15px; text-align: center; border-radius: 0 0 8px 8px;">
                    <h3>${item.title}</h3>
                </div>
                <button id="close-video-modal" 
                    style="position: absolute; top: -50px; right: 0; 
                    background: rgba(255,255,255,0.9); border: none; 
                    width: 40px; height: 40px; border-radius: 50%; 
                    color: #333; font-size: 20px; cursor: pointer; 
                    display: flex; align-items: center; justify-content: center;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.2); transition: all 0.3s;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        `;
        
        document.body.appendChild(modalOverlay);
        
        // Fade in
        setTimeout(() => {
            modalOverlay.style.opacity = 1;
        }, 10);
        
        // Close button event with hover effect
        const closeBtn = document.getElementById('close-video-modal');
        closeBtn.addEventListener('mouseenter', () => {
            closeBtn.style.background = '#ff5252';
            closeBtn.style.color = 'white';
            closeBtn.style.transform = 'scale(1.1)';
        });
        
        closeBtn.addEventListener('mouseleave', () => {
            closeBtn.style.background = 'rgba(255,255,255,0.9)';
            closeBtn.style.color = '#333';
            closeBtn.style.transform = 'scale(1)';
        });
        
        closeBtn.addEventListener('click', () => {
            modalOverlay.style.opacity = 0;
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.style.opacity = 0;
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
    }
    
    // 10. Add CSS for the new elements
    const photosStyles = document.createElement('style');
    photosStyles.textContent = `
        .top-banners::-webkit-scrollbar,
        .categories-nav::-webkit-scrollbar {
            display: none;
        }
        
        .category-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .media-item:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }
        
        .social-icon:hover {
            transform: translateY(-3px);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        #image-modal-overlay, #video-modal-overlay {
            transition: opacity 0.3s;
        }
        
        @media (max-width: 768px) {
            .enhanced-media-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .clubs-table {
                font-size: 14px;
            }
        }
    `;
    document.head.appendChild(photosStyles);
}

// Initialize the enhanced photos section when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Wait a bit for the initial rendering
    setTimeout(enhancePhotosSection, 500);
});

// Override the language update function to prevent changes in the photos section
const originalUpdateLanguageq = updateLanguage;
updateLanguage = function(lang) {
    originalUpdateLanguageq(lang);
    
    // Don't re-render the photos section to maintain English content
    // The photos section will remain in English regardless of language selection
};





// Weather Modal Functionality
const WEATHER_API_KEY = '0c645dbda21949e1adb43014250709';
let userLocation = null;

// Initialize weather functionality
function initWeatherModal() {
    // Create weather modal
    createWeatherModal();
    
    // Add event listener to weather widget
    const weatherWidget = document.querySelector('.weather-mini');
    if (weatherWidget) {
        weatherWidget.addEventListener('click', showWeatherModal);
    }
}

// Create weather modal
function createWeatherModal() {
    const modalHTML = `
        <div class="weather-modal-overlay" id="weather-modal-overlay">
            <div class="weather-modal" id="weather-modal">
                <div class="weather-modal-header">
                    <h2><i class="fas fa-cloud-sun"></i> Weather Details</h2>
                    <button class="close-weather-modal" id="close-weather-modal">&times;</button>
                </div>
                <div class="weather-modal-content">
                    <div class="location-section">
                        <div class="location-info">
                            <i class="fas fa-map-marker-alt"></i>
                            <span id="weather-location">Detecting location...</span>
                        </div>
                        <button class="location-btn" id="detect-location-btn">
                            <i class="fas fa-location-arrow"></i> Detect My Location
                        </button>
                    </div>
                    
                    <div class="location-details-table">
                        <table>
                            <tr>
                                <td><i class="fas fa-globe-asia"></i> Place Name</td>
                                <td id="location-name">--</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-map"></i> Pradesh/State</td>
                                <td id="location-region">--</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-flag"></i> Country</td>
                                <td id="location-country">--</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-location-circle"></i> Latitude</td>
                                <td id="location-lat">--</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-location-circle"></i> Longitude</td>
                                <td id="location-lon">--</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="current-weather">
                        <div class="temperature">
                            <span id="weather-temp">--</span>
                            <span class="unit">°C</span>
                        </div>
                        <div class="condition" id="weather-condition">--</div>
                        <div class="feels-like">Feels like <span id="weather-feels-like">--</span>°C</div>
                    </div>
                    
                    <div class="weather-details-table">
                        <table>
                            <tr>
                                <td><i class="fas fa-tint"></i> Humidity</td>
                                <td id="weather-humidity">--%</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-wind"></i> Wind</td>
                                <td id="weather-wind">-- km/h</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-tachometer-alt"></i> Pressure</td>
                                <td id="weather-pressure">-- hPa</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-eye"></i> Visibility</td>
                                <td id="weather-visibility">-- km</td>
                            </tr>
                            <tr>
                                <td><i class="fas fa-sun"></i> UV Index</td>
                                <td id="weather-uv">--</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="weather-footer">
                        <div class="last-updated">Last updated: <span id="weather-updated-time">--</span></div>
                        <div class="weather-provider">Weather data provided by WeatherAPI.com</div>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Add modal to body
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    
    // Add event listeners
    document.getElementById('close-weather-modal').addEventListener('click', hideWeatherModal);
    document.getElementById('detect-location-btn').addEventListener('click', detectLocation);
    
    // Close modal when clicking outside
    document.getElementById('weather-modal-overlay').addEventListener('click', function(e) {
        if (e.target === this) {
            hideWeatherModal();
        }
    });
    
    // Add CSS for weather modal
    const weatherModalCSS = `
        <style>
            .weather-modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .weather-modal-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            .weather-modal {
                background: white;
                border-radius: 15px;
                width: 90%;
                max-width: 450px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                overflow: hidden;
                transform: translateY(20px);
                transition: transform 0.3s ease;
                max-height: 90vh;
                overflow-y: auto;
            }
            
            .weather-modal-overlay.active .weather-modal {
                transform: translateY(0);
            }
            
            .weather-modal-header {
                background: linear-gradient(135deg, #4caf50, #2196f3);
                color: white;
                padding: 20px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: sticky;
                top: 0;
                z-index: 10;
            }
            
            .weather-modal-header h2 {
                margin: 0;
                font-size: 20px;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .close-weather-modal {
                background: none;
                border: none;
                color: white;
                font-size: 24px;
                cursor: pointer;
                padding: 0;
                width: 30px;
                height: 30px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .weather-modal-content {
                padding: 20px;
            }
            
            .location-section {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
                padding-bottom: 15px;
                border-bottom: 1px solid #eee;
            }
            
            .location-info {
                display: flex;
                align-items: center;
                gap: 8px;
                color: #555;
                font-weight: 500;
            }
            
            .location-btn {
                background: #e3f2fd;
                color: #1976d2;
                border: none;
                padding: 8px 12px;
                border-radius: 20px;
                font-size: 12px;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 5px;
                transition: all 0.3s;
            }
            
            .location-btn:hover {
                background: #bbdefb;
            }
            
            .location-details-table {
                margin-bottom: 20px;
                background: #f9f9f9;
                border-radius: 10px;
                padding: 15px;
            }
            
            .location-details-table table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .location-details-table tr {
                border-bottom: 1px solid #eee;
            }
            
            .location-details-table tr:last-child {
                border-bottom: none;
            }
            
            .location-details-table td {
                padding: 10px 5px;
                color: #555;
            }
            
            .location-details-table td:first-child {
                width: 40%;
                display: flex;
                align-items: center;
                gap: 10px;
                font-weight: 500;
            }
            
            .location-details-table td:last-child {
                text-align: right;
                font-weight: 500;
                color: #333;
            }
            
            .current-weather {
                text-align: center;
                margin-bottom: 20px;
                padding: 15px;
                background: linear-gradient(135deg, #e3f2fd, #bbdefb);
                border-radius: 10px;
            }
            
            .temperature {
                font-size: 48px;
                font-weight: 300;
                color: #1976d2;
                display: flex;
                align-items: flex-start;
                justify-content: center;
                gap: 5px;
            }
            
            .unit {
                font-size: 20px;
                margin-top: 10px;
            }
            
            .condition {
                font-size: 18px;
                color: #0d47a1;
                margin-bottom: 5px;
                font-weight: 500;
            }
            
            .feels-like {
                color: #1565c0;
                font-size: 14px;
            }
            
            .weather-details-table {
                margin-bottom: 20px;
            }
            
            .weather-details-table table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .weather-details-table tr {
                border-bottom: 1px solid #f0f0f0;
            }
            
            .weather-details-table tr:last-child {
                border-bottom: none;
            }
            
            .weather-details-table td {
                padding: 12px 5px;
                color: #555;
            }
            
            .weather-details-table td:first-child {
                width: 40%;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .weather-details-table td:last-child {
                text-align: right;
                font-weight: 500;
                color: #333;
            }
            
            .weather-footer {
                border-top: 1px solid #eee;
                padding-top: 15px;
                text-align: center;
            }
            
            .last-updated {
                font-size: 12px;
                color: #777;
                margin-bottom: 5px;
            }
            
            .weather-provider {
                font-size: 11px;
                color: #999;
            }
            
            @media (max-width: 480px) {
                .weather-modal {
                    width: 95%;
                }
                
                .location-section {
                    flex-direction: column;
                    gap: 10px;
                    align-items: flex-start;
                }
                
                .temperature {
                    font-size: 40px;
                }
            }
        </style>
    `;
    
    document.head.insertAdjacentHTML('beforeend', weatherModalCSS);
}

// Show weather modal
function showWeatherModal() {
    const modal = document.getElementById('weather-modal-overlay');
    modal.classList.add('active');
    
    // Update weather data
    if (userLocation) {
        updateWeatherData();
    }
}

// Hide weather modal
function hideWeatherModal() {
    const modal = document.getElementById('weather-modal-overlay');
    modal.classList.remove('active');
}

// Update weather data in modal
function updateWeatherData() {
    if (!userLocation) return;
    
    // Show loading state
    document.getElementById('weather-location').textContent = 'Fetching weather data...';
    
    // Fetch weather data from API
    fetchWeatherData(userLocation.lat, userLocation.lon)
        .then(weatherData => {
            // Update location details
            document.getElementById('weather-location').textContent = weatherData.location.name;
            document.getElementById('location-name').textContent = weatherData.location.name;
            document.getElementById('location-region').textContent = weatherData.location.region || 'N/A';
            document.getElementById('location-country').textContent = weatherData.location.country;
            document.getElementById('location-lat').textContent = weatherData.location.lat;
            document.getElementById('location-lon').textContent = weatherData.location.lon;
            
            // Update weather details
            document.getElementById('weather-temp').textContent = weatherData.current.temp_c;
            document.getElementById('weather-condition').textContent = weatherData.current.condition.text;
            document.getElementById('weather-feels-like').textContent = weatherData.current.feelslike_c;
            document.getElementById('weather-humidity').textContent = weatherData.current.humidity;
            document.getElementById('weather-wind').textContent = weatherData.current.wind_kph;
            document.getElementById('weather-pressure').textContent = weatherData.current.pressure_mb;
            document.getElementById('weather-visibility').textContent = weatherData.current.vis_km;
            document.getElementById('weather-uv').textContent = weatherData.current.uv;
            
            // Update last updated time
            const now = new Date();
            document.getElementById('weather-updated-time').textContent = now.toLocaleTimeString();
            
            // Update mini weather widget
            updateMiniWeather(weatherData);
        })
        .catch(error => {
            console.error('Error fetching weather data:', error);
            document.getElementById('weather-location').textContent = 'Error fetching weather data';
        });
}

// Fetch weather data from WeatherAPI
async function fetchWeatherData(lat, lon) {
    const url = `https://api.weatherapi.com/v1/current.json?key=${WEATHER_API_KEY}&q=${lat},${lon}&aqi=no`;
    
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`Weather API error: ${response.status}`);
        }
        return await response.json();
    } catch (error) {
        console.error('Error fetching weather data:', error);
        throw error;
    }
}

// Detect user's location
function detectLocation() {
    const locationBtn = document.getElementById('detect-location-btn');
    const locationText = document.getElementById('weather-location');
    
    // Show loading state
    locationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Detecting...';
    locationText.textContent = 'Detecting your location...';
    
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            function(position) {
                // Success callback
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                
                // Get location details using reverse geocoding
                getLocationDetails(lat, lon);
                
                // Update button state
                locationBtn.innerHTML = '<i class="fas fa-check-circle"></i> Location Detected';
                locationBtn.style.background = '#e8f5e9';
                locationBtn.style.color = '#2e7d32';
            },
            function(error) {
                // Error callback
                console.error('Error getting location:', error);
                
                // Show error state
                locationBtn.innerHTML = '<i class="fas fa-exclamation-circle"></i> Try Again';
                locationText.textContent = 'Unable to detect location.';
                
                // Reset button after delay
                setTimeout(() => {
                    locationBtn.innerHTML = '<i class="fas fa-location-arrow"></i> Detect My Location';
                    locationBtn.style.background = '';
                    locationBtn.style.color = '';
                }, 3000);
            },
            {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 60000
            }
        );
    } else {
        // Geolocation not supported
        locationText.textContent = 'Geolocation not supported by your browser';
        locationBtn.style.display = 'none';
    }
}

// Get location details using reverse geocoding
async function getLocationDetails(lat, lon) {
    try {
        // Use WeatherAPI for reverse geocoding
        const weatherData = await fetchWeatherData(lat, lon);
        
        userLocation = {
            name: weatherData.location.name,
            region: weatherData.location.region,
            country: weatherData.location.country,
            lat: weatherData.location.lat,
            lon: weatherData.location.lon
        };
        
        // Update weather data for this location
        updateWeatherData();
    } catch (error) {
        console.error('Error getting location details:', error);
        document.getElementById('weather-location').textContent = 'Error getting location details';
    }
}

// Update mini weather widget
function updateMiniWeather(weatherData) {
    if (!weatherData) return;
    
    // Update mini weather display
    document.getElementById('weather-mini-temp').textContent = `${weatherData.current.temp_c}°C`;
    
    // Update icon based on condition
    const weatherIcon = document.getElementById('weather-mini-icon');
    let iconClass = 'fas fa-cloud-sun'; // default
    
    const condition = weatherData.current.condition.text.toLowerCase();
    if (condition.includes('sunny') || condition.includes('clear')) {
        iconClass = 'fas fa-sun';
    } else if (condition.includes('cloud')) {
        iconClass = 'fas fa-cloud';
    } else if (condition.includes('rain')) {
        iconClass = 'fas fa-cloud-rain';
    } else if (condition.includes('snow')) {
        iconClass = 'fas fa-snowflake';
    } else if (condition.includes('thunder') || condition.includes('storm')) {
        iconClass = 'fas fa-bolt';
    } else if (condition.includes('fog') || condition.includes('mist')) {
        iconClass = 'fas fa-smog';
    }
    
    weatherIcon.className = iconClass;
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    initWeatherModal();
    
    // Try to get cached location if available
    const cachedLocation = localStorage.getItem('userLocation');
    if (cachedLocation) {
        userLocation = JSON.parse(cachedLocation);
        updateWeatherData();
    }
});

// Save location to localStorage when detected
function saveLocationToStorage(location) {
    localStorage.setItem('userLocation', JSON.stringify(location));
}

// Enhanced Events Section
function enhanceEventsSection() {
    const eventsSection = document.getElementById('events');
    if (!eventsSection) return;

    // Clear existing content
    eventsSection.innerHTML = '';

    // Create enhanced events structure
    eventsSection.innerHTML = `
        <h2 class="section-title"><i class="fas fa-calendar-alt"></i> <span id="upcoming-events-text">Upcoming Events</span></h2>
        
        <!-- Events Filter -->
        <div class="events-filter">
            <button class="filter-btn active" data-filter="upcoming">Upcoming Events</button>
            <button class="filter-btn" data-filter="past">Past Events</button>
            <button class="filter-btn" data-filter="all">All Events</button>
        </div>
        
        <!-- Events Container -->
        <div class="events-container" id="events-container"></div>
        
        <!-- View More Button -->
        <div class="view-more-container">
            <button id="view-more-events" class="view-more-btn">
                <i class="fas fa-eye"></i> View More Events
            </button>
        </div>
        
        <!-- Calendar Section -->
        <div class="calendar-section">
            <h3><i class="fas fa-calendar-days"></i> Event Calendar</h3>
            <div class="calendar" id="calendar"></div>
        </div>
        
        <!-- Donation Section -->
        <div class="donation-section">
            <h3><i class="fas fa-hand-holding-heart"></i> Support Our Community</h3>
            <div class="donation-content">
                <div class="donation-info">
                    <p>Your donation helps support community members in need and funds local events.</p>
                    <div class="qr-code">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=DonateToGreenVillageCommunity" alt="Donation QR Code">
                        <p>Scan to donate</p>
                    </div>
                </div>
                <div class="donation-table-container">
                    <h4>Recent Donations</h4>
                    <div class="donation-table-scroll">
                        <table class="donation-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="donation-table-body">
                                <!-- Will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                    <button id="donate-btn" class="donate-btn">
                        <i class="fas fa-donate"></i> Make a Donation
                    </button>
                </div>
            </div>
        </div>
    `;

    // Event data with more details
    const eventsData = [
        {
            id: 1,
            title: "Summer Festival",
            date: new Date(new Date().setDate(new Date().getDate() + 2)), // 2 days from now
            time: "2:00 PM - 10:00 PM",
            location: "Village Square",
            description: "Join us for our annual summer festival featuring local food, music, and crafts. There will be activities for all ages, including games for children, live performances, and a fireworks display to end the evening.",
            images: [
                "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1506157786151-b8491531f063?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "festival",
            organizer: "Village Council",
            contact: "events@greenvillage.com",
            price: "Free",
            attendees: 150
        },
        {
            id: 2,
            title: "Yoga in the Park",
            date: new Date(new Date().setDate(new Date().getDate() + 5)), // 5 days from now
            time: "8:00 AM - 9:00 AM",
            location: "Central Park",
            description: "Start your weekend with a relaxing yoga session in the beautiful Central Park. All skill levels welcome. Please bring your own mat and water bottle.",
            images: [
                "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1518611012118-696072aa579a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "wellness",
            organizer: "GreenVillage Wellness Group",
            contact: "yoga@greenvillage.com",
            price: "$5 donation",
            attendees: 25
        },
        {
            id: 3,
            title: "Book Club Meeting",
            date: new Date(new Date().setDate(new Date().getDate() + 8)), // 8 days from now
            time: "6:00 PM - 7:30 PM",
            location: "Village Library",
            description: "This month we're discussing 'The Night Circus' by Erin Morgenstern. New members always welcome! Light refreshments will be served.",
            images: [
                "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "education",
            organizer: "GreenVillage Book Club",
            contact: "bookclub@greenvillage.com",
            price: "Free",
            attendees: 18
        },
        {
            id: 4,
            title: "Independence Day Parade",
            date: new Date(new Date().setDate(new Date().getDate() + 12)), // 12 days from now
            time: "10:00 AM - 12:00 PM",
            location: "Main Street",
            description: "Celebrate Independence Day with our annual parade featuring local organizations, marching bands, and decorated floats. The parade will be followed by a picnic in the park.",
            images: [
                "https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1475721027785-f74eccf877e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "celebration",
            organizer: "Village Council",
            contact: "events@greenvillage.com",
            price: "Free",
            attendees: 300
        },
        {
            id: 5,
            title: "Farmers Market",
            date: new Date(new Date().setDate(new Date().getDate() - 3)), // 3 days ago (past event)
            time: "9:00 AM - 1:00 PM",
            location: "Market Square",
            description: "Weekly farmers market featuring fresh produce, baked goods, and handmade crafts from local vendors.",
            images: [
                "https://images.unsplash.com/photo-1570996055360-d5c30de5c7c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1608306442597-73807bd2bb2b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "market",
            organizer: "GreenVillage Farmers Association",
            contact: "farmers@greenvillage.com",
            price: "Free entry",
            attendees: 120
        },
        {
            id: 6,
            title: "Community Clean-Up Day",
            date: new Date(new Date().setDate(new Date().getDate() + 15)), // 15 days from now
            time: "9:00 AM - 12:00 PM",
            location: "Meet at Community Center",
            description: "Help keep our village beautiful! We'll be cleaning up parks and public spaces. Gloves and bags provided. Refreshments will be served after the clean-up.",
            images: [
                "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1573100094256-3e9dd5c48c36?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "community",
            organizer: "GreenVillage Environmental Group",
            contact: "cleanup@greenvillage.com",
            price: "Free",
            attendees: 45
        },
        {
            id: 7,
            title: "Live Music Night",
            date: new Date(new Date().setDate(new Date().getDate() + 18)), // 18 days from now
            time: "7:00 PM - 10:00 PM",
            location: "Village Pub",
            description: "Enjoy an evening of live music featuring local bands and musicians. Food and drinks available for purchase.",
            images: [
                "https://images.unsplash.com/photo-1506157786151-b8491531f063?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "entertainment",
            organizer: "GreenVillage Arts Council",
            contact: "music@greenvillage.com",
            price: "$10",
            attendees: 80
        },
        {
            id: 8,
            title: "Cooking Workshop",
            date: new Date(new Date().setDate(new Date().getDate() - 10)), // 10 days ago (past event)
            time: "3:00 PM - 5:00 PM",
            location: "Community Kitchen",
            description: "Learn to make traditional dishes with local chefs. All ingredients provided. Take home recipes and your creations!",
            images: [
                "https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "workshop",
            organizer: "GreenVillage Culinary Arts",
            contact: "cooking@greenvillage.com",
            price: "$25",
            attendees: 15
        }
    ];

    // Donation data
    const donationData = [
        { name: "Rajesh Kumar", amount: "₹500", date: "2023-06-15" },
        { name: "Sunita Devi", amount: "₹1000", date: "2023-06-14" },
        { name: "Amit Singh", amount: "₹750", date: "2023-06-13" },
        { name: "Priya Sharma", amount: "₹1500", date: "2023-06-12" },
        { name: "Vikram Patel", amount: "₹2000", date: "2023-06-10" },
        { name: "Anjali Gupta", amount: "₹500", date: "2023-06-08" },
        { name: "Sanjay Mishra", amount: "₹1000", date: "2023-06-05" },
        { name: "Neha Reddy", amount: "₹1250", date: "2023-06-03" }
    ];

    // Initialize events
    renderEvents('upcoming');
    renderCalendar();
    renderDonationTable();

    // Add event listeners
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            renderEvents(this.dataset.filter);
        });
    });

    document.getElementById('view-more-events').addEventListener('click', function() {
        // In a real app, this would load more events
        showToast('Loading more events...');
        setTimeout(() => {
            showToast('More events loaded successfully!');
        }, 1000);
    });

    document.getElementById('donate-btn').addEventListener('click', function() {
        showDonationModal();
    });

    // Add CSS for enhanced events section
    const eventsCSS = `
        <style>
            /* Events Filter */
            .events-filter {
                display: flex;
                gap: 10px;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }
            
            .filter-btn {
                padding: 10px 15px;
                border: 2px solid var(--primary);
                background: white;
                color: var(--primary);
                border-radius: 25px;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.3s;
            }
            
            .filter-btn.active, .filter-btn:hover {
                background: var(--primary);
                color: white;
            }
            
            /* Events Container */
            .events-container {
                display: grid;
                grid-template-columns: 1fr;
                gap: 15px;
                margin-bottom: 20px;
            }
            
            @media (min-width: 768px) {
                .events-container {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
            
            .event-card {
                background: white;
                border-radius: 12px;
                padding: 15px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
                display: flex;
                align-items: center;
                gap: 15px;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                position: relative;
            }
            
            .event-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            }
            
            .event-card.highlight {
                border-left: 4px solid var(--accent);
            }
            
            .event-date {
                background: var(--primary);
                color: white;
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }
            
            .event-day {
                font-size: 22px;
                font-weight: 700;
                line-height: 1;
            }
            
            .event-month {
                font-size: 14px;
                text-transform: uppercase;
            }
            
            .event-details {
                flex: 1;
            }
            
            .event-title {
                font-weight: 600;
                margin-bottom: 5px;
                color: var(--dark);
            }
            
            .event-time, .event-location {
                font-size: 14px;
                color: var(--gray);
                display: flex;
                align-items: center;
                gap: 5px;
                margin-bottom: 3px;
            }
            
            .event-badge {
                position: absolute;
                top: 10px;
                right: 10px;
                background: var(--accent);
                color: white;
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: 500;
            }
            
            /* View More Button */
            .view-more-container {
                text-align: center;
                margin: 25px 0;
            }
            
            .view-more-btn {
                padding: 12px 25px;
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                color: white;
                border: none;
                border-radius: 25px;
                font-weight: 500;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }
            
            .view-more-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            }
            
            /* Calendar Section */
            .calendar-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .calendar-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .calendar {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            .calendar-header {
                grid-column: 1 / -1;
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
            }
            
            .calendar-nav {
                display: flex;
                gap: 10px;
            }
            
            .calendar-nav-btn {
                background: #f0f0f0;
                border: none;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
            }
            
            .calendar-weekdays {
                grid-column: 1 / -1;
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                text-align: center;
                font-weight: 500;
                color: var(--gray);
                margin-bottom: 10px;
            }
            
            .calendar-days {
                grid-column: 1 / -1;
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            .calendar-day {
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 8px;
                cursor: pointer;
                transition: background 0.2s;
            }
            
            .calendar-day:hover {
                background: #f0f0f0;
            }
            
            .calendar-day.event {
                background: rgba(76, 175, 80, 0.1);
                color: var(--primary);
                font-weight: 500;
            }
            
            .calendar-day.today {
                background: var(--primary);
                color: white;
            }
            
            .calendar-day.other-month {
                color: #ccc;
            }
            
            /* Donation Section */
            .donation-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .donation-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .donation-content {
                display: grid;
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            @media (min-width: 992px) {
                .donation-content {
                    grid-template-columns: 1fr 2fr;
                }
            }
            
            .donation-info {
                text-align: center;
            }
            
            .qr-code {
                margin: 15px 0;
            }
            
            .qr-code img {
                width: 150px;
                height: 150px;
                border: 1px solid #eee;
                padding: 10px;
                border-radius: 8px;
            }
            
            .donation-table-container {
                overflow: hidden;
            }
            
            .donation-table-scroll {
                max-height: 250px;
                overflow-y: auto;
                margin-bottom: 15px;
                border: 1px solid #eee;
                border-radius: 8px;
            }
            
            .donation-table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .donation-table th {
                background: #f8f9fa;
                padding: 12px;
                text-align: left;
                font-weight: 600;
                color: var(--dark);
                position: sticky;
                top: 0;
            }
            
            .donation-table td {
                padding: 12px;
                border-bottom: 1px solid #eee;
            }
            
            .donation-table tr:last-child td {
                border-bottom: none;
            }
            
            .donate-btn {
                width: 100%;
                padding: 12px;
                background: linear-gradient(135deg, var(--accent), #ff5722);
                color: white;
                border: none;
                border-radius: 8px;
                font-weight: 500;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            }
            
            .donate-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 15px rgba(255, 152, 0, 0.3);
            }
            
            /* Event Modal */
            .event-modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .event-modal-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            .event-modal {
                background: white;
                border-radius: 15px;
                width: 90%;
                max-width: 800px;
                max-height: 90vh;
                overflow: hidden;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                transform: translateY(20px);
                transition: transform 0.3s ease;
            }
            
            .event-modal-overlay.active .event-modal {
                transform: translateY(0);
            }
            
            .event-modal-header {
                position: relative;
                height: 200px;
                overflow: hidden;
            }
            
            .event-modal-carousel {
                height: 100%;
                position: relative;
            }
            
            .event-modal-slide {
                height: 100%;
                width: 100%;
                position: absolute;
                opacity: 0;
                transition: opacity 0.8s ease;
                background-size: cover;
                background-position: center;
            }
            
            .event-modal-slide.active {
                opacity: 1;
            }
            
            .event-modal-carousel-dots {
                position: absolute;
                bottom: 15px;
                left: 0;
                right: 0;
                display: flex;
                justify-content: center;
                gap: 8px;
            }
            
            .event-modal-carousel-dot {
                width: 10px;
                height: 10px;
                border-radius: 50%;
                background-color: rgba(255, 255, 255, 0.5);
                cursor: pointer;
                transition: background-color 0.3s;
            }
            
            .event-modal-carousel-dot.active {
                background-color: white;
            }
            
            .event-modal-close {
                position: absolute;
                top: 15px;
                right: 15px;
                background: rgba(255, 255, 255, 0.9);
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                color: #333;
                font-size: 20px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10;
            }
            
            .event-modal-content {
                padding: 20px;
                overflow-y: auto;
                max-height: calc(90vh - 200px);
            }
            
            .event-modal-title {
                font-size: 24px;
                color: var(--dark);
                margin-bottom: 10px;
            }
            
            .event-modal-meta {
                display: flex;
                flex-wrap: wrap;
                gap: 15px;
                margin-bottom: 20px;
                padding-bottom: 15px;
                border-bottom: 1px solid #eee;
            }
            
            .event-modal-meta-item {
                display: flex;
                align-items: center;
                gap: 8px;
                color: var(--gray);
            }
            
            .event-modal-description {
                margin-bottom: 20px;
                line-height: 1.6;
            }
            
            .event-modal-details {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
            }
            
            .event-modal-detail-card {
                background: #f8f9fa;
                padding: 15px;
                border-radius: 8px;
            }
            
            .event-modal-detail-label {
                font-size: 12px;
                color: var(--gray);
                margin-bottom: 5px;
            }
            
            .event-modal-detail-value {
                font-weight: 500;
                color: var(--dark);
            }
            
            .event-modal-actions {
                display: flex;
                gap: 10px;
                margin-top: 20px;
            }
            
            .event-modal-btn {
                padding: 10px 15px;
                border-radius: 8px;
                border: none;
                font-weight: 500;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 8px;
                transition: all 0.3s;
            }
            
            .event-modal-btn.primary {
                background: var(--primary);
                color: white;
            }
            
            .event-modal-btn.secondary {
                background: #f0f0f0;
                color: var(--dark);
            }
            
            .event-modal-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            }
            
            /* Donation Modal */
            .donation-modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .donation-modal-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            .donation-modal {
                background: white;
                border-radius: 15px;
                width: 90%;
                max-width: 500px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                transform: translateY(20px);
                transition: transform 0.3s ease;
                overflow: hidden;
            }
            
            .donation-modal-overlay.active .donation-modal {
                transform: translateY(0);
            }
            
            .donation-modal-header {
                background: linear-gradient(135deg, var(--accent), #ff5722);
                color: white;
                padding: 20px;
                text-align: center;
                position: relative;
            }
            
            .donation-modal-close {
                position: absolute;
                top: 15px;
                right: 15px;
                background: rgba(255, 255, 255, 0.2);
                border: none;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                color: white;
                font-size: 18px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .donation-modal-content {
                padding: 20px;
            }
            
            .donation-form {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }
            
            .form-group {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }
            
            .form-group label {
                font-weight: 500;
                color: var(--dark);
            }
            
            .form-group input, .form-group select {
                padding: 12px;
                border: 1px solid #ddd;
                border-radius: 8px;
                font-size: 16px;
            }
            
            .donation-amounts {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
                margin: 10px 0;
            }
            
            .donation-amount {
                padding: 10px;
                border: 2px solid #eee;
                border-radius: 8px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s;
            }
            
            .donation-amount.selected {
                border-color: var(--accent);
                background: rgba(255, 152, 0, 0.1);
            }
            
            .donation-submit {
                padding: 15px;
                background: linear-gradient(135deg, var(--accent), #ff5722);
                color: white;
                border: none;
                border-radius: 8px;
                font-weight: 500;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                margin-top: 10px;
            }
            
            .donation-submit:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 15px rgba(255, 152, 0, 0.3);
            }
        </style>
    `;

    document.head.insertAdjacentHTML('beforeend', eventsCSS);

    // Function to render events based on filter
    function renderEvents(filter) {
        const container = document.getElementById('events-container');
        container.innerHTML = '';
        
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        let filteredEvents = eventsData;
        
        if (filter === 'upcoming') {
            filteredEvents = eventsData.filter(event => event.date >= today);
        } else if (filter === 'past') {
            filteredEvents = eventsData.filter(event => event.date < today);
        }
        
        // Sort events by date
        filteredEvents.sort((a, b) => a.date - b.date);
        
        // Show only first 4 events initially
        const eventsToShow = filter === 'all' ? filteredEvents.slice(0, 4) : filteredEvents;
        
        if (eventsToShow.length === 0) {
            container.innerHTML = `
                <div class="no-events" style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--gray);">
                    <i class="fas fa-calendar-times" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                    <h3>No events found</h3>
                    <p>There are no ${filter} events at this time.</p>
                </div>
            `;
            return;
        }
        
        eventsToShow.forEach(event => {
            const eventDate = new Date(event.date);
            const daysDiff = Math.floor((eventDate - today) / (1000 * 60 * 60 * 24));
            
            const isHighlight = daysDiff >= 0 && daysDiff <= 5;
            const isPast = daysDiff < 0;
            
            const eventCard = document.createElement('div');
            eventCard.className = `event-card ${isHighlight ? 'highlight' : ''}`;
            eventCard.dataset.id = event.id;
            
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            
            eventCard.innerHTML = `
                <div class="event-date">
                    <div class="event-day">${eventDate.getDate()}</div>
                    <div class="event-month">${monthNames[eventDate.getMonth()]}</div>
                </div>
                <div class="event-details">
                    <h3 class="event-title">${event.title}</h3>
                    <div class="event-time"><i class="far fa-clock"></i> ${event.time}</div>
                    <div class="event-location"><i class="fas fa-map-marker-alt"></i> ${event.location}</div>
                </div>
                ${isHighlight ? `<div class="event-badge">Coming Soon</div>` : ''}
                ${isPast ? `<div class="event-badge" style="background: var(--gray);">Past Event</div>` : ''}
            `;
            
            eventCard.addEventListener('click', () => {
                showEventModal(event);
            });
            
            container.appendChild(eventCard);
        });
    }
    
    // Function to render calendar
    function renderCalendar() {
        const calendarEl = document.getElementById('calendar');
        calendarEl.innerHTML = '';
        
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentYear = today.getFullYear();
        
        // Get first day of month and number of days in month
        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        
        // Create calendar header
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        
        const calendarHeader = document.createElement('div');
        calendarHeader.className = 'calendar-header';
        calendarHeader.innerHTML = `
            <h4>${monthNames[currentMonth]} ${currentYear}</h4>
            <div class="calendar-nav">
                <button class="calendar-nav-btn"><i class="fas fa-chevron-left"></i></button>
                <button class="calendar-nav-btn"><i class="fas fa-chevron-right"></i></button>
            </div>
        `;
        calendarEl.appendChild(calendarHeader);
        
        // Create weekdays header
        const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
        const weekdaysEl = document.createElement('div');
        weekdaysEl.className = 'calendar-weekdays';
        
        weekdays.forEach(day => {
            const dayEl = document.createElement('div');
            dayEl.textContent = day;
            weekdaysEl.appendChild(dayEl);
        });
        
        calendarEl.appendChild(weekdaysEl);
        
        // Create days grid
        const daysEl = document.createElement('div');
        daysEl.className = 'calendar-days';
        
        // Add empty cells for days before the first day of the month
        for (let i = 0; i < firstDay; i++) {
            const emptyDay = document.createElement('div');
            emptyDay.className = 'calendar-day other-month';
            daysEl.appendChild(emptyDay);
        }
        
        // Add days of the month
        for (let i = 1; i <= daysInMonth; i++) {
            const dayEl = document.createElement('div');
            dayEl.className = 'calendar-day';
            dayEl.textContent = i;
            
            // Check if this day has events
            const hasEvent = eventsData.some(event => {
                const eventDate = new Date(event.date);
                return eventDate.getDate() === i && 
                       eventDate.getMonth() === currentMonth && 
                       eventDate.getFullYear() === currentYear;
            });
            
            // Check if this is today
            const isToday = i === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear();
            
            if (hasEvent) dayEl.classList.add('event');
            if (isToday) dayEl.classList.add('today');
            
            daysEl.appendChild(dayEl);
        }
        
        calendarEl.appendChild(daysEl);
    }
    
    // Function to render donation table
    function renderDonationTable() {
        const tableBody = document.getElementById('donation-table-body');
        tableBody.innerHTML = '';
        
        donationData.forEach(donation => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${donation.name}</td>
                <td>${donation.amount}</td>
                <td>${donation.date}</td>
            `;
            tableBody.appendChild(row);
        });
    }
    
    // Function to show event modal
    function showEventModal(event) {
        const modalHTML = `
            <div class="event-modal-overlay" id="event-modal-overlay">
                <div class="event-modal">
                    <div class="event-modal-header">
                        <div class="event-modal-carousel" id="event-modal-carousel">
                            ${event.images.map((img, index) => `
                                <div class="event-modal-slide ${index === 0 ? 'active' : ''}" 
                                    style="background-image: url('${img}')"></div>
                            `).join('')}
                        </div>
                        <div class="event-modal-carousel-dots">
                            ${event.images.map((_, index) => `
                                <div class="event-modal-carousel-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></div>
                            `).join('')}
                        </div>
                        <button class="event-modal-close" id="event-modal-close">&times;</button>
                    </div>
                    <div class="event-modal-content">
                        <h2 class="event-modal-title">${event.title}</h2>
                        <div class="event-modal-meta">
                            <div class="event-modal-meta-item">
                                <i class="far fa-calendar-alt"></i>
                                <span>${event.date.toLocaleDateString()}</span>
                            </div>
                            <div class="event-modal-meta-item">
                                <i class="far fa-clock"></i>
                                <span>${event.time}</span>
                            </div>
                            <div class="event-modal-meta-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${event.location}</span>
                            </div>
                            <div class="event-modal-meta-item">
                                <i class="fas fa-users"></i>
                                <span>${event.attendees} attendees</span>
                            </div>
                        </div>
                        <div class="event-modal-description">
                            <p>${event.description}</p>
                        </div>
                        <div class="event-modal-details">
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Category</div>
                                <div class="event-modal-detail-value">${event.category}</div>
                            </div>
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Organizer</div>
                                <div class="event-modal-detail-value">${event.organizer}</div>
                            </div>
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Contact</div>
                                <div class="event-modal-detail-value">${event.contact}</div>
                            </div>
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Price</div>
                                <div class="event-modal-detail-value">${event.price}</div>
                            </div>
                        </div>
                        <div class="event-modal-actions">
                            <button class="event-modal-btn primary">
                                <i class="fas fa-calendar-plus"></i> Add to Calendar
                            </button>
                            <button class="event-modal-btn secondary">
                                <i class="fas fa-share-alt"></i> Share Event
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        const modalOverlay = document.getElementById('event-modal-overlay');
        const modalClose = document.getElementById('event-modal-close');
        const carousel = document.getElementById('event-modal-carousel');
        const dots = document.querySelectorAll('.event-modal-carousel-dot');
        
        // Show modal
        setTimeout(() => {
            modalOverlay.classList.add('active');
        }, 10);
        
        // Close modal
        modalClose.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
        
        // Carousel functionality
        let currentSlide = 0;
        
        function showSlide(index) {
            const slides = document.querySelectorAll('.event-modal-slide');
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            slides[index].classList.add('active');
            dots[index].classList.add('active');
            currentSlide = index;
        }
        
        // Add click events to dots
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => showSlide(index));
        });
        
        // Auto-advance slides
        const slideInterval = setInterval(() => {
            currentSlide = (currentSlide + 1) % event.images.length;
            showSlide(currentSlide);
        }, 5000);
        
        // Clear interval when modal is closed
        modalOverlay.addEventListener('click', () => {
            clearInterval(slideInterval);
        });
    }
    
    // Function to show donation modal
    function showDonationModal() {
        const modalHTML = `
            <div class="donation-modal-overlay" id="donation-modal-overlay">
                <div class="donation-modal">
                    <div class="donation-modal-header">
                        <h2>Support Our Community</h2>
                        <button class="donation-modal-close" id="donation-modal-close">&times;</button>
                    </div>
                    <div class="donation-modal-content">
                        <form class="donation-form" id="donation-form">
                            <div class="form-group">
                                <label for="donor-name">Your Name</label>
                                <input type="text" id="donor-name" placeholder="Enter your name" required>
                            </div>
                            <div class="form-group">
                                <label for="donor-email">Email</label>
                                <input type="email" id="donor-email" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label>Donation Amount</label>
                                <div class="donation-amounts">
                                    <div class="donation-amount" data-amount="100">₹100</div>
                                    <div class="donation-amount" data-amount="500">₹500</div>
                                    <div class="donation-amount" data-amount="1000">₹1000</div>
                                    <div class="donation-amount" data-amount="2000">₹2000</div>
                                    <div class="donation-amount" data-amount="5000">₹5000</div>
                                    <div class="donation-amount" data-amount="other">Other</div>
                                </div>
                                <input type="number" id="custom-amount" placeholder="Enter custom amount" style="display: none;">
                            </div>
                            <div class="form-group">
                                <label for="payment-method">Payment Method</label>
                                <select id="payment-method" required>
                                    <option value="">Select payment method</option>
                                    <option value="upi">UPI</option>
                                    <option value="card">Credit/Debit Card</option>
                                    <option value="netbanking">Net Banking</option>
                                    <option value="wallet">Wallet</option>
                                </select>
                            </div>
                            <button type="submit" class="donation-submit">Donate Now</button>
                        </form>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        const modalOverlay = document.getElementById('donation-modal-overlay');
        const modalClose = document.getElementById('donation-modal-close');
        const donationForm = document.getElementById('donation-form');
        const donationAmounts = document.querySelectorAll('.donation-amount');
        const customAmount = document.getElementById('custom-amount');
        
        // Show modal
        setTimeout(() => {
            modalOverlay.classList.add('active');
        }, 10);
        
        // Close modal
        modalClose.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
        
        // Donation amount selection
        donationAmounts.forEach(amount => {
            amount.addEventListener('click', function() {
                donationAmounts.forEach(a => a.classList.remove('selected'));
                this.classList.add('selected');
                
                if (this.dataset.amount === 'other') {
                    customAmount.style.display = 'block';
                    customAmount.focus();
                } else {
                    customAmount.style.display = 'none';
                }
            });
        });
        
        // Form submission
        donationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // In a real app, this would process the payment
            showToast('Thank you for your donation!');
            
            // Close modal
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
    }
}

// Initialize enhanced events section when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Initialize when events tab is clicked
    document.querySelector('[data-target="events"]').addEventListener('click', function() {
        // Small delay to ensure section is visible
        setTimeout(enhanceEventsSection, 50);
    });
    
    // Also initialize if events section is already active
    if (document.getElementById('events').classList.contains('active')) {
        enhanceEventsSection();
    }
});
// Enhanced Events Section with Payment, Sharing, and Calendar Features
function enhanceEventsSection() {
    const eventsSection = document.getElementById('events');
    if (!eventsSection) return;

    // Clear existing content
    eventsSection.innerHTML = '';

    // Create enhanced events structure
    eventsSection.innerHTML = `
        <h2 class="section-title"><i class="fas fa-calendar-alt"></i> <span id="upcoming-events-text">Upcoming Events</span></h2>
        
        <!-- Events Filter -->
        <div class="events-filter">
            <button class="filter-btn active" data-filter="upcoming">Upcoming Events</button>
            <button class="filter-btn" data-filter="past">Past Events</button>
            <button class="filter-btn" data-filter="all">All Events</button>
        </div>
        
        <!-- Events Container -->
        <div class="events-container" id="events-container"></div>
        
        <!-- View More Button -->
        <div class="view-more-container">
            <button id="view-more-events" class="view-more-btn">
                <i class="fas fa-eye"></i> View More Events
            </button>
        </div>
        
        <!-- Calendar Section -->
        <div class="calendar-section">
            <h3><i class="fas fa-calendar-days"></i> Event Calendar</h3>
            <div class="calendar" id="calendar"></div>
        </div>
        
        <!-- Donation Section -->
        <div class="donation-section">
            <h3><i class="fas fa-hand-holding-heart"></i> Support Our Community</h3>
            <div class="donation-content">
                <div class="donation-info">
                    <p>Your donation helps support community members in need and funds local events.</p>
                    <div class="qr-code">
                        <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=DonateToGreenVillageCommunity" alt="Donation QR Code">
                        <p>Scan to donate</p>
                    </div>
                </div>
                <div class="donation-table-container">
                    <h4>Recent Donations</h4>
                    <div class="donation-table-scroll">
                        <table class="donation-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                    <th>Payment Method</th>
                                </tr>
                            </thead>
                            <tbody id="donation-table-body">
                                <!-- Will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                    <button id="donate-btn" class="donate-btn">
                        <i class="fas fa-donate"></i> Make a Donation
                    </button>
                </div>
            </div>
        </div>

        <!-- Featured Events Section -->
        <div class="featured-events-section">
            <h3><i class="fas fa-star"></i> Featured Events</h3>
            <div class="featured-events-container" id="featured-events-container">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Event Statistics Section -->
        <div class="event-stats-section">
            <h3><i class="fas fa-chart-bar"></i> Event Statistics</h3>
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="total-attendees">0</div>
                        <div class="stat-label">Total Attendees</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="total-events">0</div>
                        <div class="stat-label">Total Events</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="total-donations">₹0</div>
                        <div class="stat-label">Total Donations</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Event Reminders Section -->
        <div class="event-reminders-section">
            <h3><i class="fas fa-bell"></i> Event Reminders</h3>
            <div class="reminders-container" id="reminders-container">
                <!-- Will be populated by JS -->
            </div>
        </div>

        <!-- Event Categories Section -->
        <div class="event-categories-section">
            <h3><i class="fas fa-tags"></i> Event Categories</h3>
            <div class="categories-container" id="categories-container">
                <!-- Will be populated by JS -->
            </div>
        </div>
    `;

    // Event data with more details
    const eventsData = [
        {
            id: 1,
            title: "Summer Festival",
            date: new Date(new Date().setDate(new Date().getDate() + 2)), // 2 days from now
            time: "2:00 PM - 10:00 PM",
            location: "Village Square",
            description: "Join us for our annual summer festival featuring local food, music, and crafts. There will be activities for all ages, including games for children, live performances, and a fireworks display to end the evening.",
            images: [
                "https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1506157786151-b8491531f063?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "festival",
            organizer: "Village Council",
            contact: "events@greenvillage.com",
            price: "Free",
            attendees: 150,
            featured: true
        },
        {
            id: 2,
            title: "Yoga in the Park",
            date: new Date(new Date().setDate(new Date().getDate() + 5)), // 5 days from now
            time: "8:00 AM - 9:00 AM",
            location: "Central Park",
            description: "Start your weekend with a relaxing yoga session in the beautiful Central Park. All skill levels welcome. Please bring your own mat and water bottle.",
            images: [
                "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1518611012118-696072aa579a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "wellness",
            organizer: "GreenVillage Wellness Group",
            contact: "yoga@greenvillage.com",
            price: "$5 donation",
            attendees: 25,
            featured: true
        },
        {
            id: 3,
            title: "Book Club Meeting",
            date: new Date(new Date().setDate(new Date().getDate() + 8)), // 8 days from now
            time: "6:00 PM - 7:30 PM",
            location: "Village Library",
            description: "This month we're discussing 'The Night Circus' by Erin Morgenstern. New members always welcome! Light refreshments will be served.",
            images: [
                "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "education",
            organizer: "GreenVillage Book Club",
            contact: "bookclub@greenvillage.com",
            price: "Free",
            attendees: 18,
            featured: false
        },
        {
            id: 4,
            title: "Independence Day Parade",
            date: new Date(new Date().setDate(new Date().getDate() + 12)), // 12 days from now
            time: "10:00 AM - 12:00 PM",
            location: "Main Street",
            description: "Celebrate Independence Day with our annual parade featuring local organizations, marching bands, and decorated floats. The parade will be followed by a picnic in the park.",
            images: [
                "https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1475721027785-f74eccf877e2?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "celebration",
            organizer: "Village Council",
            contact: "events@greenvillage.com",
            price: "Free",
            attendees: 300,
            featured: true
        },
        {
            id: 5,
            title: "Farmers Market",
            date: new Date(new Date().setDate(new Date().getDate() - 3)), // 3 days ago (past event)
            time: "9:00 AM - 1:00 PM",
            location: "Market Square",
            description: "Weekly farmers market featuring fresh produce, baked goods, and handmade crafts from local vendors.",
            images: [
                "https://images.unsplash.com/photo-1570996055360-d5c30de5c7c0?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1608306442597-73807bd2bb2b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "market",
            organizer: "GreenVillage Farmers Association",
            contact: "farmers@greenvillage.com",
            price: "Free entry",
            attendees: 120,
            featured: false
        },
        {
            id: 6,
            title: "Community Clean-Up Day",
            date: new Date(new Date().setDate(new Date().getDate() + 15)), // 15 days from now
            time: "9:00 AM - 12:00 PM",
            location: "Meet at Community Center",
            description: "Help keep our village beautiful! We'll be cleaning up parks and public spaces. Gloves and bags provided. Refreshments will be served after the clean-up.",
            images: [
                "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1573100094256-3e9dd5c48c36?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "community",
            organizer: "GreenVillage Environmental Group",
            contact: "cleanup@greenvillage.com",
            price: "Free",
            attendees: 45,
            featured: false
        },
        {
            id: 7,
            title: "Live Music Night",
            date: new Date(new Date().setDate(new Date().getDate() + 18)), // 18 days from now
            time: "7:00 PM - 10:00 PM",
            location: "Village Pub",
            description: "Enjoy an evening of live music featuring local bands and musicians. Food and drinks available for purchase.",
            images: [
                "https://images.unsplash.com/photo-1506157786151-b8491531f063?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "entertainment",
            organizer: "GreenVillage Arts Council",
            contact: "music@greenvillage.com",
            price: "$10",
            attendees: 80,
            featured: true
        },
        {
            id: 8,
            title: "Cooking Workshop",
            date: new Date(new Date().setDate(new Date().getDate() - 10)), // 10 days ago (past event)
            time: "3:00 PM - 5:00 PM",
            location: "Community Kitchen",
            description: "Learn to make traditional dishes with local chefs. All ingredients provided. Take home recipes and your creations!",
            images: [
                "https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80"
            ],
            category: "workshop",
            organizer: "GreenVillage Culinary Arts",
            contact: "cooking@greenvillage.com",
            price: "$25",
            attendees: 15,
            featured: false
        }
    ];

    // Initialize donation data from localStorage or empty array
    let donationData = JSON.parse(localStorage.getItem('donationData')) || [];

    // Initialize events
    renderEvents('upcoming');
    renderCalendar();
    renderDonationTable();
    renderFeaturedEvents();
    renderEventStats();
    renderEventReminders();
    renderEventCategories();

    // Add event listeners
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            renderEvents(this.dataset.filter);
        });
    });

    document.getElementById('view-more-events').addEventListener('click', function() {
        // In a real app, this would load more events
        showToast('Loading more events...');
        setTimeout(() => {
            showToast('More events loaded successfully!');
            // Add more events to the container
            const container = document.getElementById('events-container');
            const additionalEvents = eventsData.slice(3, 6); // Get next 3 events
            
            additionalEvents.forEach(event => {
                if (!container.querySelector(`[data-id="${event.id}"]`)) {
                    const eventCard = createEventCard(event);
                    container.appendChild(eventCard);
                }
            });
            
            // Hide the button if all events are shown
            if (container.children.length >= eventsData.length) {
                this.style.display = 'none';
            }
        }, 1000);
    });

    document.getElementById('donate-btn').addEventListener('click', function() {
        showDonationModal();
    });

    // Add CSS for enhanced events section
    const eventsCSS = `
        <style>
            /* Events Filter */
            .events-filter {
                display: flex;
                gap: 10px;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }
            
            .filter-btn {
                padding: 10px 15px;
                border: 2px solid var(--primary);
                background: white;
                color: var(--primary);
                border-radius: 25px;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.3s;
            }
            
            .filter-btn.active, .filter-btn:hover {
                background: var(--primary);
                color: white;
            }
            
            /* Events Container */
            .events-container {
                display: grid;
                grid-template-columns: 1fr;
                gap: 15px;
                margin-bottom: 20px;
            }
            
            @media (min-width: 768px) {
                .events-container {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
            
            .event-card {
                background: white;
                border-radius: 12px;
                padding: 15px;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
                display: flex;
                align-items: center;
                gap: 15px;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                position: relative;
            }
            
            .event-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
            }
            
            .event-card.highlight {
                border-left: 4px solid var(--accent);
            }
            
            .event-date {
                background: var(--primary);
                color: white;
                width: 60px;
                height: 60px;
                border-radius: 10px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }
            
            .event-day {
                font-size: 22px;
                font-weight: 700;
                line-height: 1;
            }
            
            .event-month {
                font-size: 14px;
                text-transform: uppercase;
            }
            
            .event-details {
                flex: 1;
            }
            
            .event-title {
                font-weight: 600;
                margin-bottom: 5px;
                color: var(--dark);
            }
            
            .event-time, .event-location {
                font-size: 14px;
                color: var(--gray);
                display: flex;
                align-items: center;
                gap: 5px;
                margin-bottom: 3px;
            }
            
            .event-badge {
                position: absolute;
                top: 10px;
                right: 10px;
                background: var(--accent);
                color: white;
                padding: 4px 8px;
                border-radius: 12px;
                font-size: 12px;
                font-weight: 500;
            }
            
            /* View More Button */
            .view-more-container {
                text-align: center;
                margin: 25px 0;
            }
            
            .view-more-btn {
                padding: 12px 25px;
                background: linear-gradient(135deg, var(--primary), var(--secondary));
                color: white;
                border: none;
                border-radius: 25px;
                font-weight: 500;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                display: inline-flex;
                align-items: center;
                gap: 8px;
            }
            
            .view-more-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            }
            
            /* Calendar Section */
            .calendar-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .calendar-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .calendar {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            .calendar-header {
                grid-column: 1 / -1;
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
            }
            
            .calendar-nav {
                display: flex;
                gap: 10px;
            }
            
            .calendar-nav-btn {
                background: #f0f0f0;
                border: none;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
            }
            
            .calendar-weekdays {
                grid-column: 1 / -1;
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                text-align: center;
                font-weight: 500;
                color: var(--gray);
                margin-bottom: 10px;
            }
            
            .calendar-days {
                grid-column: 1 / -1;
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 5px;
            }
            
            .calendar-day {
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 8px;
                cursor: pointer;
                transition: background 0.2s;
            }
            
            .calendar-day:hover {
                background: #f0f0f0;
            }
            
            .calendar-day.event {
                background: rgba(76, 175, 80, 0.1);
                color: var(--primary);
                font-weight: 500;
            }
            
            .calendar-day.today {
                background: var(--primary);
                color: white;
            }
            
            .calendar-day.other-month {
                color: #ccc;
            }
            
            /* Donation Section */
            .donation-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .donation-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .donation-content {
                display: grid;
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            @media (min-width: 992px) {
                .donation-content {
                    grid-template-columns: 1fr 2fr;
                }
            }
            
            .donation-info {
                text-align: center;
            }
            
            .qr-code {
                margin: 15px 0;
            }
            
            .qr-code img {
                width: 150px;
                height: 150px;
                border: 1px solid #eee;
                padding: 10px;
                border-radius: 8px;
            }
            
            .donation-table-container {
                overflow: hidden;
            }
            
            .donation-table-scroll {
                max-height: 250px;
                overflow-y: auto;
                margin-bottom: 15px;
                border: 1px solid #eee;
                border-radius: 8px;
            }
            
            .donation-table {
                width: 100%;
                border-collapse: collapse;
            }
            
            .donation-table th {
                background: #f8f9fa;
                padding: 12px;
                text-align: left;
                font-weight: 600;
                color: var(--dark);
                position: sticky;
                top: 0;
            }
            
            .donation-table td {
                padding: 12px;
                border-bottom: 1px solid #eee;
            }
            
            .donation-table tr:last-child td {
                border-bottom: none;
            }
            
            .donate-btn {
                width: 100%;
                padding: 12px;
                background: linear-gradient(135deg, var(--accent), #ff5722);
                color: white;
                border: none;
                border-radius: 8px;
                font-weight: 500;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
            }
            
            .donate-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 15px rgba(255, 152, 0, 0.3);
            }
            
            /* Featured Events Section */
            .featured-events-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .featured-events-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .featured-events-container {
                display: grid;
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            @media (min-width: 768px) {
                .featured-events-container {
                    grid-template-columns: repeat(2, 1fr);
                }
            }
            
            .featured-event-card {
                background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(33, 150, 243, 0.1));
                border-radius: 12px;
                padding: 20px;
                border-left: 4px solid var(--primary);
                cursor: pointer;
                transition: transform 0.3s;
            }
            
            .featured-event-card:hover {
                transform: translateY(-3px);
            }
            
            .featured-event-title {
                font-weight: 600;
                margin-bottom: 10px;
                color: var(--dark);
            }
            
            .featured-event-date {
                color: var(--primary);
                font-weight: 500;
                margin-bottom: 5px;
            }
            
            .featured-event-location {
                color: var(--gray);
                font-size: 14px;
                display: flex;
                align-items: center;
                gap: 5px;
            }
            
            /* Event Statistics Section */
            .event-stats-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .event-stats-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .stats-container {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }
            
            .stat-card {
                background: #f8f9fa;
                border-radius: 12px;
                padding: 20px;
                display: flex;
                align-items: center;
                gap: 15px;
            }
            
            .stat-icon {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                background: var(--primary);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
            }
            
            .stat-number {
                font-size: 24px;
                font-weight: 700;
                color: var(--dark);
            }
            
            .stat-label {
                color: var(--gray);
                font-size: 14px;
            }
            
            /* Event Reminders Section */
            .event-reminders-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .event-reminders-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .reminders-container {
                display: grid;
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .reminder-item {
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 10px;
                background: #f8f9fa;
                border-radius: 8px;
            }
            
            .reminder-icon {
                color: var(--accent);
            }
            
            .reminder-text {
                flex: 1;
            }
            
            .reminder-title {
                font-weight: 500;
                margin-bottom: 3px;
            }
            
            .reminder-date {
                font-size: 12px;
                color: var(--gray);
            }
            
            /* Event Categories Section */
            .event-categories-section {
                background: white;
                border-radius: 12px;
                padding: 20px;
                margin: 30px 0;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            }
            
            .event-categories-section h3 {
                margin-bottom: 20px;
                color: var(--dark);
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .categories-container {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .category-badge {
                padding: 8px 15px;
                background: #f0f9ff;
                border-radius: 20px;
                font-size: 14px;
                color: var(--secondary);
                cursor: pointer;
                transition: all 0.3s;
            }
            
            .category-badge:hover {
                background: var(--secondary);
                color: white;
            }
            
            /* Event Modal */
            .event-modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .event-modal-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            .event-modal {
                background: white;
                border-radius: 15px;
                width: 90%;
                max-width: 800px;
                max-height: 90vh;
                overflow: hidden;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                transform: translateY(20px);
                transition: transform 0.3s ease;
            }
            
            .event-modal-overlay.active .event-modal {
                transform: translateY(0);
            }
            
            .event-modal-header {
                position: relative;
                height: 200px;
                overflow: hidden;
            }
            
            .event-modal-carousel {
                height: 100%;
                position: relative;
            }
            
            .event-modal-slide {
                height: 100%;
                width: 100%;
                position: absolute;
                opacity: 0;
                transition: opacity 0.8s ease;
                background-size: cover;
                background-position: center;
            }
            
            .event-modal-slide.active {
                opacity: 1;
            }
            
            .event-modal-carousel-dots {
                position: absolute;
                bottom: 15px;
                left: 0;
                right: 0;
                display: flex;
                justify-content: center;
                gap: 8px;
            }
            
            .event-modal-carousel-dot {
                width: 10px;
                height: 10px;
                border-radius: 50%;
                background-color: rgba(255, 255, 255, 0.5);
                cursor: pointer;
                transition: background-color 0.3s;
            }
            
            .event-modal-carousel-dot.active {
                background-color: white;
            }
            
            .event-modal-close {
                position: absolute;
                top: 15px;
                right: 15px;
                background: rgba(255, 255, 255, 0.9);
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                color: #333;
                font-size: 20px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10;
            }
            
            .event-modal-content {
                padding: 20px;
                overflow-y: auto;
                max-height: calc(90vh - 200px);
            }
            
            .event-modal-title {
                font-size: 24px;
                color: var(--dark);
                margin-bottom: 10px;
            }
            
            .event-modal-meta {
                display: flex;
                flex-wrap: wrap;
                gap: 15px;
                margin-bottom: 20px;
                padding-bottom: 15px;
                border-bottom: 1px solid #eee;
            }
            
            .event-modal-meta-item {
                display: flex;
                align-items: center;
                gap: 8px;
                color: var(--gray);
            }
            
            .event-modal-description {
                margin-bottom: 20px;
                line-height: 1.6;
            }
            
            .event-modal-details {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
            }
            
            .event-modal-detail-card {
                background: #f8f9fa;
                padding: 15px;
                border-radius: 8px;
            }
            
            .event-modal-detail-label {
                font-size: 12px;
                color: var(--gray);
                margin-bottom: 5px;
            }
            
            .event-modal-detail-value {
                font-weight: 500;
                color: var(--dark);
            }
            
            .event-modal-actions {
                display: flex;
                gap: 10px;
                margin-top: 20px;
            }
            
            .event-modal-btn {
                padding: 10px 15px;
                border-radius: 8px;
                border: none;
                font-weight: 500;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 8px;
                transition: all 0.3s;
            }
            
            .event-modal-btn.primary {
                background: var(--primary);
                color: white;
            }
            
            .event-modal-btn.secondary {
                background: #f0f0f0;
                color: var(--dark);
            }
            
            .event-modal-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            }
            
            /* Donation Modal */
            .donation-modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .donation-modal-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            .donation-modal {
                background: white;
                border-radius: 15px;
                width: 90%;
                max-width: 500px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                transform: translateY(20px);
                transition: transform 0.3s ease;
                overflow: hidden;
            }
            
            .donation-modal-overlay.active .donation-modal {
                transform: translateY(0);
            }
            
            .donation-modal-header {
                background: linear-gradient(135deg, var(--accent), #ff5722);
                color: white;
                padding: 20px;
                text-align: center;
                position: relative;
            }
            
            .donation-modal-close {
                position: absolute;
                top: 15px;
                right: 15px;
                background: rgba(255, 255, 255, 0.2);
                border: none;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                color: white;
                font-size: 18px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .donation-modal-content {
                padding: 20px;
            }
            
            .donation-form {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }
            
            .form-group {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }
            
            .form-group label {
                font-weight: 500;
                color: var(--dark);
            }
            
            .form-group input, .form-group select {
                padding: 12px;
                border: 1px solid #ddd;
                border-radius: 8px;
                font-size: 16px;
            }
            
            .donation-amounts {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
                margin: 10px 0;
            }
            
            .donation-amount {
                padding: 10px;
                border: 2px solid #eee;
                border-radius: 8px;
                text-align: center;
                cursor: pointer;
                transition: all 0.3s;
            }
            
            .donation-amount.selected {
                border-color: var(--accent);
                background: rgba(255, 152, 0, 0.1);
            }
            
            .donation-submit {
                padding: 15px;
                background: linear-gradient(135deg, var(--accent), #ff5722);
                color: white;
                border: none;
                border-radius: 8px;
                font-weight: 500;
                cursor: pointer;
                transition: transform 0.3s, box-shadow 0.3s;
                margin-top: 10px;
            }
            
            .donation-submit:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 15px rgba(255, 152, 0, 0.3);
            }
        </style>
    `;

    document.head.insertAdjacentHTML('beforeend', eventsCSS);

    // Function to create an event card
    function createEventCard(event) {
        const eventDate = new Date(event.date);
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        const daysDiff = Math.floor((eventDate - today) / (1000 * 60 * 60 * 24));
        const isHighlight = daysDiff >= 0 && daysDiff <= 5;
        const isPast = daysDiff < 0;
        
        const eventCard = document.createElement('div');
        eventCard.className = `event-card ${isHighlight ? 'highlight' : ''}`;
        eventCard.dataset.id = event.id;
        
        const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
        
        eventCard.innerHTML = `
            <div class="event-date">
                <div class="event-day">${eventDate.getDate()}</div>
                <div class="event-month">${monthNames[eventDate.getMonth()]}</div>
            </div>
            <div class="event-details">
                <h3 class="event-title">${event.title}</h3>
                <div class="event-time"><i class="far fa-clock"></i> ${event.time}</div>
                <div class="event-location"><i class="fas fa-map-marker-alt"></i> ${event.location}</div>
            </div>
            ${isHighlight ? `<div class="event-badge">Coming Soon</div>` : ''}
            ${isPast ? `<div class="event-badge" style="background: var(--gray);">Past Event</div>` : ''}
        `;
        
        eventCard.addEventListener('click', () => {
            showEventModal(event);
        });
        
        return eventCard;
    }

    // Function to render events based on filter
    function renderEvents(filter) {
        const container = document.getElementById('events-container');
        container.innerHTML = '';
        
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        let filteredEvents = eventsData;
        
        if (filter === 'upcoming') {
            filteredEvents = eventsData.filter(event => new Date(event.date) >= today);
        } else if (filter === 'past') {
            filteredEvents = eventsData.filter(event => new Date(event.date) < today);
        }
        
        // Sort events by date
        filteredEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
        
        // Show only first 3 events initially
        const eventsToShow = filteredEvents.slice(0, 3);
        
        if (eventsToShow.length === 0) {
            container.innerHTML = `
                <div class="no-events" style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--gray);">
                    <i class="fas fa-calendar-times" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                    <h3>No events found</h3>
                    <p>There are no ${filter} events at this time.</p>
                </div>
            `;
            document.getElementById('view-more-events').style.display = 'none';
            return;
        }
        
        eventsToShow.forEach(event => {
            const eventCard = createEventCard(event);
            container.appendChild(eventCard);
        });
        
        // Show view more button if there are more events
        if (filteredEvents.length > 3) {
            document.getElementById('view-more-events').style.display = 'block';
        } else {
            document.getElementById('view-more-events').style.display = 'none';
        }
    }
    
    // Function to render calendar
    function renderCalendar() {
        const calendarEl = document.getElementById('calendar');
        calendarEl.innerHTML = '';
        
        const today = new Date();
        const currentMonth = today.getMonth();
        const currentYear = today.getFullYear();
        
        // Get first day of month and number of days in month
        const firstDay = new Date(currentYear, currentMonth, 1).getDay();
        const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
        
        // Create calendar header
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        
        const calendarHeader = document.createElement('div');
        calendarHeader.className = 'calendar-header';
        calendarHeader.innerHTML = `
            <h4>${monthNames[currentMonth]} ${currentYear}</h4>
            <div class="calendar-nav">
                <button class="calendar-nav-btn"><i class="fas fa-chevron-left"></i></button>
                <button class="calendar-nav-btn"><i class="fas fa-chevron-right"></i></button>
            </div>
        `;
        calendarEl.appendChild(calendarHeader);
        
        // Create weekdays header
        const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
        const weekdaysEl = document.createElement('div');
        weekdaysEl.className = 'calendar-weekdays';
        
        weekdays.forEach(day => {
            const dayEl = document.createElement('div');
            dayEl.textContent = day;
            weekdaysEl.appendChild(dayEl);
        });
        
        calendarEl.appendChild(weekdaysEl);
        
        // Create days grid
        const daysEl = document.createElement('div');
        daysEl.className = 'calendar-days';
        
        // Add empty cells for days before the first day of the month
        for (let i = 0; i < firstDay; i++) {
            const emptyDay = document.createElement('div');
            emptyDay.className = 'calendar-day other-month';
            daysEl.appendChild(emptyDay);
        }
        
        // Add days of the month
        for (let i = 1; i <= daysInMonth; i++) {
            const dayEl = document.createElement('div');
            dayEl.className = 'calendar-day';
            dayEl.textContent = i;
            
            // Check if this day has events
            const hasEvent = eventsData.some(event => {
                const eventDate = new Date(event.date);
                return eventDate.getDate() === i && 
                       eventDate.getMonth() === currentMonth && 
                       eventDate.getFullYear() === currentYear;
            });
            
            // Check if this is today
            const isToday = i === today.getDate() && currentMonth === today.getMonth() && currentYear === today.getFullYear();
            
            if (hasEvent) dayEl.classList.add('event');
            if (isToday) dayEl.classList.add('today');
            
            // Add click event to show events on this day
            if (hasEvent) {
                dayEl.addEventListener('click', () => {
                    const dayEvents = eventsData.filter(event => {
                        const eventDate = new Date(event.date);
                        return eventDate.getDate() === i && 
                               eventDate.getMonth() === currentMonth && 
                               eventDate.getFullYear() === currentYear;
                    });
                    
                    if (dayEvents.length > 0) {
                        showDayEventsModal(dayEvents, `${i} ${monthNames[currentMonth]} ${currentYear}`);
                    }
                });
            }
            
            daysEl.appendChild(dayEl);
        }
        
        calendarEl.appendChild(daysEl);
    }
    
    // Function to render donation table
    function renderDonationTable() {
        const tableBody = document.getElementById('donation-table-body');
        tableBody.innerHTML = '';
        
        if (donationData.length === 0) {
            tableBody.innerHTML = `
                <tr>
                    <td colspan="4" style="text-align: center; padding: 20px; color: var(--gray);">
                        No donations yet. Be the first to donate!
                    </td>
                </tr>
            `;
            return;
        }
        
        donationData.forEach(donation => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${donation.name}</td>
                <td>${donation.amount}</td>
                <td>${donation.date}</td>
                <td>${donation.method}</td>
            `;
            tableBody.appendChild(row);
        });
    }
    
    // Function to render featured events
    function renderFeaturedEvents() {
        const container = document.getElementById('featured-events-container');
        container.innerHTML = '';
        
        const featuredEvents = eventsData.filter(event => event.featured && new Date(event.date) >= new Date());
        
        if (featuredEvents.length === 0) {
            container.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 20px; color: var(--gray);">
                    <i class="fas fa-star" style="opacity: 0.3; font-size: 24px; margin-bottom: 10px;"></i>
                    <p>No featured events at this time.</p>
                </div>
            `;
            return;
        }
        
        featuredEvents.forEach(event => {
            const eventDate = new Date(event.date);
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            
            const eventCard = document.createElement('div');
            eventCard.className = 'featured-event-card';
            eventCard.innerHTML = `
                <h4 class="featured-event-title">${event.title}</h4>
                <div class="featured-event-date">${eventDate.getDate()} ${monthNames[eventDate.getMonth()]}, ${eventDate.getFullYear()}</div>
                <div class="featured-event-location">
                    <i class="fas fa-map-marker-alt"></i> ${event.location}
                </div>
            `;
            
            eventCard.addEventListener('click', () => {
                showEventModal(event);
            });
            
            container.appendChild(eventCard);
        });
    }
    
    // Function to render event statistics
    function renderEventStats() {
        const totalAttendees = eventsData.reduce((sum, event) => sum + event.attendees, 0);
        const totalEvents = eventsData.length;
        const totalDonations = donationData.reduce((sum, donation) => {
            const amount = parseInt(donation.amount.replace(/[^0-9]/g, ''));
            return sum + (isNaN(amount) ? 0 : amount);
        }, 0);
        
        document.getElementById('total-attendees').textContent = totalAttendees.toLocaleString();
        document.getElementById('total-events').textContent = totalEvents;
        document.getElementById('total-donations').textContent = `₹${totalDonations.toLocaleString()}`;
    }
    
    // Function to render event reminders
    function renderEventReminders() {
        const container = document.getElementById('reminders-container');
        container.innerHTML = '';
        
        const today = new Date();
        const upcomingEvents = eventsData
            .filter(event => new Date(event.date) >= today)
            .sort((a, b) => new Date(a.date) - new Date(b.date))
            .slice(0, 3);
        
        if (upcomingEvents.length === 0) {
            container.innerHTML = `
                <div style="text-align: center; padding: 10px; color: var(--gray);">
                    <p>No upcoming events to remind you about.</p>
                </div>
            `;
            return;
        }
        
        upcomingEvents.forEach(event => {
            const eventDate = new Date(event.date);
            const daysDiff = Math.floor((eventDate - today) / (1000 * 60 * 60 * 24));
            
            const reminderItem = document.createElement('div');
            reminderItem.className = 'reminder-item';
            reminderItem.innerHTML = `
                <div class="reminder-icon">
                    <i class="fas fa-bell"></i>
                </div>
                <div class="reminder-text">
                    <div class="reminder-title">${event.title}</div>
                    <div class="reminder-date">${daysDiff === 0 ? 'Today' : `In ${daysDiff} days`} • ${event.time}</div>
                </div>
                <button class="reminder-action" data-id="${event.id}">
                    <i class="fas fa-plus"></i>
                </button>
            `;
            
            container.appendChild(reminderItem);
        });
    }
    
    // Function to render event categories
    function renderEventCategories() {
        const container = document.getElementById('categories-container');
        container.innerHTML = '';
        
        // Get unique categories
        const categories = [...new Set(eventsData.map(event => event.category))];
        
        if (categories.length === 0) {
            container.innerHTML = `
                <div style="text-align: center; padding: 10px; color: var(--gray);">
                    <p>No event categories available.</p>
                </div>
            `;
            return;
        }
        
        categories.forEach(category => {
            const categoryBadge = document.createElement('div');
            categoryBadge.className = 'category-badge';
            categoryBadge.textContent = category;
            
            categoryBadge.addEventListener('click', () => {
                const filteredEvents = eventsData.filter(event => event.category === category);
                showCategoryEventsModal(filteredEvents, category);
            });
            
            container.appendChild(categoryBadge);
        });
    }
    
    // Function to show event modal
    function showEventModal(event) {
        const modalHTML = `
            <div class="event-modal-overlay" id="event-modal-overlay">
                <div class="event-modal">
                    <div class="event-modal-header">
                        <div class="event-modal-carousel" id="event-modal-carousel">
                            ${event.images.map((img, index) => `
                                <div class="event-modal-slide ${index === 0 ? 'active' : ''}" 
                                    style="background-image: url('${img}')"></div>
                            `).join('')}
                        </div>
                        <div class="event-modal-carousel-dots">
                            ${event.images.map((_, index) => `
                                <div class="event-modal-carousel-dot ${index === 0 ? 'active' : ''}" data-index="${index}"></div>
                            `).join('')}
                        </div>
                        <button class="event-modal-close" id="event-modal-close">&times;</button>
                    </div>
                    <div class="event-modal-content">
                        <h2 class="event-modal-title">${event.title}</h2>
                        <div class="event-modal-meta">
                            <div class="event-modal-meta-item">
                                <i class="far fa-calendar-alt"></i>
                                <span>${event.date.toLocaleDateString()}</span>
                            </div>
                            <div class="event-modal-meta-item">
                                <i class="far fa-clock"></i>
                                <span>${event.time}</span>
                            </div>
                            <div class="event-modal-meta-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${event.location}</span>
                            </div>
                            <div class="event-modal-meta-item">
                                <i class="fas fa-users"></i>
                                <span>${event.attendees} attendees</span>
                            </div>
                        </div>
                        <div class="event-modal-description">
                            <p>${event.description}</p>
                        </div>
                        <div class="event-modal-details">
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Category</div>
                                <div class="event-modal-detail-value">${event.category}</div>
                            </div>
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Organizer</div>
                                <div class="event-modal-detail-value">${event.organizer}</div>
                            </div>
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Contact</div>
                                <div class="event-modal-detail-value">${event.contact}</div>
                            </div>
                            <div class="event-modal-detail-card">
                                <div class="event-modal-detail-label">Price</div>
                                <div class="event-modal-detail-value">${event.price}</div>
                            </div>
                        </div>
                        <div class="event-modal-actions">
                            <button class="event-modal-btn primary" id="add-to-calendar-btn">
                                <i class="fas fa-calendar-plus"></i> Add to Calendar
                            </button>
                            <button class="event-modal-btn secondary" id="share-event-btn">
                                <i class="fas fa-share-alt"></i> Share Event
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        const modalOverlay = document.getElementById('event-modal-overlay');
        const modalClose = document.getElementById('event-modal-close');
        const carousel = document.getElementById('event-modal-carousel');
        const dots = document.querySelectorAll('.event-modal-carousel-dot');
        const addToCalendarBtn = document.getElementById('add-to-calendar-btn');
        const shareEventBtn = document.getElementById('share-event-btn');
        
        // Show modal
        setTimeout(() => {
            modalOverlay.classList.add('active');
        }, 10);
        
        // Close modal
        modalClose.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
        
        // Carousel functionality
        let currentSlide = 0;
        
        function showSlide(index) {
            const slides = document.querySelectorAll('.event-modal-slide');
            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));
            
            slides[index].classList.add('active');
            dots[index].classList.add('active');
            currentSlide = index;
        }
        
        // Add click events to dots
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => showSlide(index));
        });
        
        // Auto-advance slides
        const slideInterval = setInterval(() => {
            currentSlide = (currentSlide + 1) % event.images.length;
            showSlide(currentSlide);
        }, 5000);
        
        // Clear interval when modal is closed
        modalOverlay.addEventListener('click', () => {
            clearInterval(slideInterval);
        });
        
        // Add to calendar functionality
        addToCalendarBtn.addEventListener('click', () => {
            // Create calendar event data
            const startDate = new Date(event.date);
            const [time, modifier] = event.time.split(' ');
            let [hours, minutes] = time.split(':');
            
            if (modifier === 'PM' && hours !== '12') {
                hours = parseInt(hours) + 12;
            }
            
            startDate.setHours(parseInt(hours), parseInt(minutes));
            
            const endDate = new Date(startDate);
            endDate.setHours(endDate.getHours() + 2); // Assume 2 hour duration
            
            const calendarEvent = {
                title: event.title,
                start: startDate,
                end: endDate,
                location: event.location,
                description: event.description
            };
            
            // In a real app, this would add to the user's calendar
            showToast('Event added to your calendar!');
        });
        
        // Share event functionality
        shareEventBtn.addEventListener('click', () => {
            const eventUrl = `${window.location.origin}${window.location.pathname}?event=${event.id}`;
            
            // Copy to clipboard
            navigator.clipboard.writeText(eventUrl).then(() => {
                showToast('Event link copied to clipboard!');
                
                // Share via WhatsApp if available
                if (navigator.share) {
                    navigator.share({
                        title: event.title,
                        text: event.description,
                        url: eventUrl
                    }).catch(() => {
                        // Fallback if share fails
                        window.open(`https://wa.me/?text=Check out this event: ${encodeURIComponent(eventUrl)}`, '_blank');
                    });
                } else {
                    // Fallback for browsers that don't support Web Share API
                    window.open(`https://wa.me/?text=Check out this event: ${encodeURIComponent(eventUrl)}`, '_blank');
                }
            }).catch(() => {
                showToast('Failed to copy event link', true);
            });
        });
    }
    
    // Function to show day events modal
    function showDayEventsModal(events, date) {
        const modalHTML = `
            <div class="event-modal-overlay" id="day-events-modal-overlay">
                <div class="event-modal">
                    <div class="event-modal-header" style="height: 100px; background: var(--primary); display: flex; align-items: center; justify-content: center;">
                        <h2 style="color: white; margin: 0;">Events on ${date}</h2>
                        <button class="event-modal-close" id="day-events-modal-close">&times;</button>
                    </div>
                    <div class="event-modal-content">
                        ${events.length === 0 ? `
                            <div style="text-align: center; padding: 40px; color: var(--gray);">
                                <i class="fas fa-calendar-times" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                                <h3>No events on this day</h3>
                            </div>
                        ` : `
                            <div class="events-list">
                                ${events.map(event => `
                                    <div class="event-item" data-id="${event.id}" style="padding: 15px; border-bottom: 1px solid #eee; cursor: pointer;">
                                        <h3 style="margin: 0 0 10px; color: var(--dark);">${event.title}</h3>
                                        <div style="display: flex; gap: 15px; color: var(--gray); font-size: 14px;">
                                            <span><i class="far fa-clock"></i> ${event.time}</span>
                                            <span><i class="fas fa-map-marker-alt"></i> ${event.location}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        const modalOverlay = document.getElementById('day-events-modal-overlay');
        const modalClose = document.getElementById('day-events-modal-close');
        
        // Show modal
        setTimeout(() => {
            modalOverlay.classList.add('active');
        }, 10);
        
        // Close modal
        modalClose.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
        
        // Add click events to event items
        document.querySelectorAll('.event-item').forEach(item => {
            item.addEventListener('click', () => {
                const eventId = item.dataset.id;
                const event = events.find(e => e.id == eventId);
                
                if (event) {
                    modalOverlay.classList.remove('active');
                    setTimeout(() => {
                        modalOverlay.remove();
                        showEventModal(event);
                    }, 300);
                }
            });
        });
    }
    
    // Function to show category events modal
    function showCategoryEventsModal(events, category) {
        const modalHTML = `
            <div class="event-modal-overlay" id="category-events-modal-overlay">
                <div class="event-modal">
                    <div class="event-modal-header" style="height: 100px; background: var(--secondary); display: flex; align-items: center; justify-content: center;">
                        <h2 style="color: white; margin: 0;">${category} Events</h2>
                        <button class="event-modal-close" id="category-events-modal-close">&times;</button>
                    </div>
                    <div class="event-modal-content">
                        ${events.length === 0 ? `
                            <div style="text-align: center; padding: 40px; color: var(--gray);">
                                <i class="fas fa-calendar-times" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                                <h3>No ${category} events</h3>
                            </div>
                        ` : `
                            <div class="events-list">
                                ${events.map(event => `
                                    <div class="event-item" data-id="${event.id}" style="padding: 15px; border-bottom: 1px solid #eee; cursor: pointer;">
                                        <h3 style="margin: 0 0 10px; color: var(--dark);">${event.title}</h3>
                                        <div style="display: flex; gap: 15px; color: var(--gray); font-size: 14px;">
                                            <span><i class="far fa-calendar-alt"></i> ${new Date(event.date).toLocaleDateString()}</span>
                                            <span><i class="far fa-clock"></i> ${event.time}</span>
                                            <span><i class="fas fa-map-marker-alt"></i> ${event.location}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        `}
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        const modalOverlay = document.getElementById('category-events-modal-overlay');
        const modalClose = document.getElementById('category-events-modal-close');
        
        // Show modal
        setTimeout(() => {
            modalOverlay.classList.add('active');
        }, 10);
        
        // Close modal
        modalClose.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
        
        // Add click events to event items
        document.querySelectorAll('.event-item').forEach(item => {
            item.addEventListener('click', () => {
                const eventId = item.dataset.id;
                const event = events.find(e => e.id == eventId);
                
                if (event) {
                    modalOverlay.classList.remove('active');
                    setTimeout(() => {
                        modalOverlay.remove();
                        showEventModal(event);
                    }, 300);
                }
            });
        });
    }
    
    // Function to show donation modal
    function showDonationModal() {
        const modalHTML = `
            <div class="donation-modal-overlay" id="donation-modal-overlay">
                <div class="donation-modal">
                    <div class="donation-modal-header">
                        <h2>Support Our Community</h2>
                        <button class="donation-modal-close" id="donation-modal-close">&times;</button>
                    </div>
                    <div class="donation-modal-content">
                        <form class="donation-form" id="donation-form">
                            <div class="form-group">
                                <label for="donor-name">Your Name</label>
                                <input type="text" id="donor-name" placeholder="Enter your name" required>
                            </div>
                            <div class="form-group">
                                <label for="donor-email">Email</label>
                                <input type="email" id="donor-email" placeholder="Enter your email" required>
                            </div>
                            <div class="form-group">
                                <label>Donation Amount</label>
                                <div class="donation-amounts">
                                    <div class="donation-amount" data-amount="100">₹100</div>
                                    <div class="donation-amount" data-amount="500">₹500</div>
                                    <div class="donation-amount" data-amount="1000">₹1000</div>
                                    <div class="donation-amount" data-amount="2000">₹2000</div>
                                    <div class="donation-amount" data-amount="5000">₹5000</div>
                                    <div class="donation-amount" data-amount="other">Other</div>
                                </div>
                                <input type="number" id="custom-amount" placeholder="Enter custom amount" style="display: none;">
                            </div>
                            <div class="form-group">
                                <label for="payment-method">Payment Method</label>
                                <select id="payment-method" required>
                                    <option value="">Select payment method</option>
                                    <option value="upi">UPI</option>
                                    <option value="card">Credit/Debit Card</option>
                                    <option value="netbanking">Net Banking</option>
                                    <option value="wallet">Wallet</option>
                                </select>
                            </div>
                            <button type="submit" class="donation-submit">Donate Now</button>
                        </form>
                    </div>
                </div>
            </div>
        `;
        
        document.body.insertAdjacentHTML('beforeend', modalHTML);
        
        const modalOverlay = document.getElementById('donation-modal-overlay');
        const modalClose = document.getElementById('donation-modal-close');
        const donationForm = document.getElementById('donation-form');
        const donationAmounts = document.querySelectorAll('.donation-amount');
        const customAmount = document.getElementById('custom-amount');
        
        // Show modal
        setTimeout(() => {
            modalOverlay.classList.add('active');
        }, 10);
        
        // Close modal
        modalClose.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
        
        // Close when clicking outside
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
                setTimeout(() => {
                    modalOverlay.remove();
                }, 300);
            }
        });
        
        // Donation amount selection
        donationAmounts.forEach(amount => {
            amount.addEventListener('click', function() {
                donationAmounts.forEach(a => a.classList.remove('selected'));
                this.classList.add('selected');
                
                if (this.dataset.amount === 'other') {
                    customAmount.style.display = 'block';
                    customAmount.focus();
                } else {
                    customAmount.style.display = 'none';
                }
            });
        });
        
        // Form submission
        donationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('donor-name').value;
            const email = document.getElementById('donor-email').value;
            const method = document.getElementById('payment-method').value;
            
            // Get selected amount
            let amount = '0';
            const selectedAmount = document.querySelector('.donation-amount.selected');
            
            if (selectedAmount) {
                if (selectedAmount.dataset.amount === 'other') {
                    amount = customAmount.value;
                } else {
                    amount = selectedAmount.dataset.amount;
                }
            }
            
            // Validate inputs
            if (!name || !email || !method || amount === '0') {
                showToast('Please fill all fields correctly', true);
                return;
            }
            
            // Create donation record
            const donation = {
                name: name,
                email: email,
                amount: `₹${amount}`,
                method: method,
                date: new Date().toLocaleDateString()
            };
            
            // Add to donation data
            donationData.push(donation);
            
            // Save to localStorage
            localStorage.setItem('donationData', JSON.stringify(donationData));
            
            // Update UI
            renderDonationTable();
            renderEventStats();
            
            // Show success message
            showToast('Thank you for your donation!');
            
            // Close modal
            modalOverlay.classList.remove('active');
            setTimeout(() => {
                modalOverlay.remove();
            }, 300);
        });
    }
    
    // Helper function to show toast notifications
    function showToast(message, isError = false) {
        // Create toast element
        const toast = document.createElement('div');
        toast.style.cssText = `
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: ${isError ? '#ff5252' : '#4caf50'};
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
            animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s forwards;
        `;
        
        toast.innerHTML = `
            <i class="fas ${isError ? 'fa-exclamation-circle' : 'fa-check-circle'}"></i>
            <span>${message}</span>
        `;
        
        document.body.appendChild(toast);
        
        // Remove toast after animation completes
        setTimeout(() => {
            if (toast.parentNode) {
                toast.parentNode.removeChild(toast);
            }
        }, 3000);
    }
    
    // Add CSS for toast animations
    const toastStyles = document.createElement('style');
    toastStyles.textContent = `
        @keyframes toastIn {
            from { opacity: 0; transform: translate(-50%, 20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }
        
        @keyframes toastOut {
            from { opacity: 1; transform: translate(-50%, 0); }
            to { opacity: 0; transform: translate(-50%, 20px); }
        }
    `;
    document.head.appendChild(toastStyles);
}

// Initialize enhanced events section when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Initialize when events tab is clicked
    document.querySelector('[data-target="events"]').addEventListener('click', function() {
        // Small delay to ensure section is visible
        setTimeout(enhanceEventsSection, 50);
    });
    
    // Also initialize if events section is already active
    if (document.getElementById('events').classList.contains('active')) {
        enhanceEventsSection();
    }
});

















    </script>
</body>
</html>
